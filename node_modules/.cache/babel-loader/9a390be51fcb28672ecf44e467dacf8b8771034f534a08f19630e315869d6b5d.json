{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-use-before-define */import{useEffect,useState}from'react';import{useDispatch}from'react-redux';/* Elements */import Layout from'components/Layout/Layout';import AccountDetails from'components/AccountDetails/accountDetails';/* Reducers & JS functions */import{setWaittingVisible}from'stores/reducers/ModalReducer';import{loadFuncParams}from'utilities/AppScriptProxy';import{getTransactions}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";var MoreTranscations=function MoreTranscations(){var _account$cardTitle;var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];/**\r\n   * 頁面啟動，初始化\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var model;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setWaittingVisible(true));// 以啟動參數(預設帳號)\n_context.next=3;return loadFuncParams();case 3:model=_context.sent;setAccount(model);case 5:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(function(){if(account)dispatch(setWaittingVisible(false));},[account]);/**\r\n   * 更新帳戶交易明細清單\r\n   * @param {*} conditions 查詢條件。\r\n   */var updateTransactions=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(conditions){var _account$currency;var request,transData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:request=_objectSpread(_objectSpread({},conditions),{},{accountNo:account.accountNo,currency:(_account$currency=account.currency)!==null&&_account$currency!==void 0?_account$currency:'TWD'});// 取得帳戶交易明細（三年內）\n_context2.next=3;return getTransactions(request);case 3:transData=_context2.sent;return _context2.abrupt(\"return\",transData);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function updateTransactions(_x){return _ref2.apply(this,arguments);};}();/**\r\n   * 頁面輸出\r\n   */return/*#__PURE__*/_jsx(Layout,{title:(_account$cardTitle=account===null||account===void 0?void 0:account.cardTitle)!==null&&_account$cardTitle!==void 0?_account$cardTitle:'帳戶交易明細',children:/*#__PURE__*/_jsx(\"div\",{children:account?/*#__PURE__*/_jsx(AccountDetails,{selectedAccount:account,onSearch:updateTransactions}):null})});};export default MoreTranscations;","map":{"version":3,"names":["useEffect","useState","useDispatch","Layout","AccountDetails","setWaittingVisible","loadFuncParams","getTransactions","MoreTranscations","dispatch","account","setAccount","model","updateTransactions","conditions","request","accountNo","currency","transData","cardTitle"],"sources":["C:/Users/allen/git/app2-webview/src/pages/MoreTranscations/index.js"],"sourcesContent":["/* eslint-disable no-use-before-define */\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport AccountDetails from 'components/AccountDetails/accountDetails';\r\n\r\n/* Reducers & JS functions */\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { loadFuncParams } from 'utilities/AppScriptProxy';\r\nimport { getTransactions } from './api';\r\n\r\nconst MoreTranscations = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [account, setAccount] = useState(null);\r\n\r\n  /**\r\n   * 頁面啟動，初始化\r\n   */\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n\r\n    // 以啟動參數(預設帳號)\r\n    const model = await loadFuncParams();\r\n    setAccount(model);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (account) dispatch(setWaittingVisible(false));\r\n  }, [account]);\r\n\r\n  /**\r\n   * 更新帳戶交易明細清單\r\n   * @param {*} conditions 查詢條件。\r\n   */\r\n  const updateTransactions = async (conditions) => {\r\n    const request = {\r\n      ...conditions,\r\n      accountNo: account.accountNo,\r\n      currency: account.currency ?? 'TWD',\r\n    };\r\n\r\n    // 取得帳戶交易明細（三年內）\r\n    const transData = await getTransactions(request);\r\n    return transData;\r\n  };\r\n\r\n  /**\r\n   * 頁面輸出\r\n   */\r\n  return (\r\n    <Layout title={account?.cardTitle ?? '帳戶交易明細'}>\r\n      <div>\r\n        {account ? (\r\n          <AccountDetails\r\n            selectedAccount={account}\r\n            onSearch={updateTransactions}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default MoreTranscations;\r\n"],"mappings":"meAAA,yCACA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,aAAa,CAEzC,cACA,MAAOC,OAAM,KAAM,0BAA0B,CAC7C,MAAOC,eAAc,KAAM,0CAA0C,CAErE,6BACA,OAASC,kBAAkB,KAAQ,8BAA8B,CACjE,OAASC,cAAc,KAAQ,0BAA0B,CACzD,OAASC,eAAe,KAAQ,OAAO,CAAC,2CAExC,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,wBAC7B,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAE9B,cAA8BD,QAAQ,CAAC,IAAI,CAAC,wCAArCS,OAAO,eAAEC,UAAU,eAE1B;AACF;AACA,KACEX,SAAS,wEAAC,+IACRS,QAAQ,CAACJ,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAElC;AAAA,sBACoBC,eAAc,EAAE,QAA9BM,KAAK,eACXD,UAAU,CAACC,KAAK,CAAC,CAAC,sDACnB,GAAE,EAAE,CAAC,CAENZ,SAAS,CAAC,UAAM,CACd,GAAIU,OAAO,CAAED,QAAQ,CAACJ,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAClD,CAAC,CAAE,CAACK,OAAO,CAAC,CAAC,CAEb;AACF;AACA;AACA,KACE,GAAMG,mBAAkB,6FAAG,kBAAOC,UAAU,oKACpCC,OAAO,gCACRD,UAAU,MACbE,SAAS,CAAEN,OAAO,CAACM,SAAS,CAC5BC,QAAQ,oBAAEP,OAAO,CAACO,QAAQ,uDAAI,KAAK,GAGrC;AAAA,uBACwBV,gBAAe,CAACQ,OAAO,CAAC,QAA1CG,SAAS,iDACRA,SAAS,0DACjB,kBAVKL,mBAAkB,6CAUvB,CAED;AACF;AACA,KACE,mBACE,KAAC,MAAM,EAAC,KAAK,qBAAEH,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAES,SAAS,yDAAI,QAAS,uBAC5C,qBACGT,OAAO,cACN,KAAC,cAAc,EACb,eAAe,CAAEA,OAAQ,CACzB,QAAQ,CAAEG,kBAAmB,EAC7B,CACA,IAAI,EACJ,EACC,CAEb,CAAC,CAED,cAAeL,iBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}