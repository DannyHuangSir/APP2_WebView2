{"ast":null,"code":"import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from'react';import Themes from'themes/theme';import FEIBRoundButton from'components/elements/FEIBRoundButton';import{AccountIcon10,EditIcon}from'assets/images/icons';import BG1 from'assets/images/deposit-plan/hero-1@2x.jpg';import BG2 from'assets/images/deposit-plan/hero-2@2x.jpg';import BG3 from'assets/images/deposit-plan/hero-3@2x.jpg';import BG4 from'assets/images/deposit-plan/hero-4@2x.jpg';import BG5 from'assets/images/deposit-plan/hero-5@2x.jpg';import BG6 from'assets/images/deposit-plan/hero-6@2x.jpg';import{showCustomDrawer}from'utilities/MessageModal';import HeroWithEditWrapper from'./HeroWithEdit.style';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HeroWithEdit=function HeroWithEdit(_ref){var planId=_ref.planId,imageId=_ref.imageId,onChange=_ref.onChange;var imageInput=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),imageSrc=_useState2[0],setImageSrc=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),newImageId=_useState4[0],setNewImageId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isDirty=_useState6[0],setIsDirty=_useState6[1];var imgSrc=function imgSrc(){switch(newImageId){case 0:if(imageSrc)return imageSrc;return\"\".concat(process.env.REACT_APP_DEPOSIT_PLAN_IMG_URL,\"/\").concat(planId,\".jpg\");case 2:return BG2;case 3:return BG3;case 4:return BG4;case 5:return BG5;case 6:return BG6;case 1:default:return BG1;}};useEffect(function(){if(imageId)setNewImageId(imageId);},[imageId]);useEffect(function(){if(isDirty)onChange(newImageId);},[newImageId]);var handleOnImageChange=function handleOnImageChange(event){var images=event.target.files;if(images.length>0){setImageSrc(URL.createObjectURL(images[0]));setIsDirty(true);setNewImageId(0);var reader=new FileReader();reader.readAsDataURL(images[0]);reader.onloadend=function(e){sessionStorage.setItem('C00600-hero',e.currentTarget.result);};}};var handleOnClick=function handleOnClick(func){if(func.id===0){imageInput.current.click();}else{setIsDirty(true);setNewImageId(func.id);}};var onSelectClick=function onSelectClick(){var list=[{title:'購物',id:1},{title:'3C',id:2},{title:'結婚',id:3},{title:'房子',id:4},{title:'車子',id:5},{title:'旅遊',id:6},{title:'上傳其他圖片',id:0}];var options=/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(func){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleOnClick(func);},children:func.title})},func.title);})});showCustomDrawer({title:'',content:options,shouldAutoClose:true});};return/*#__PURE__*/_jsxs(HeroWithEditWrapper,{children:[/*#__PURE__*/_jsx(\"input\",{hidden:true,\"aria-label\":\"\\u9078\\u64C7\\u5716\\u7247\",ref:imageInput,type:\"file\",accept:\"image/*\",onChange:handleOnImageChange}),typeof newImageId==='undefined'&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"mt-16\",onClick:onSelectClick,children:[/*#__PURE__*/_jsx(AccountIcon10,{color:Themes.colors.text.light,size:\"54\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-select\",children:\"\\u9078\\u64C7\\u5716\\u7247\"})]}),typeof newImageId!=='undefined'&&/*#__PURE__*/_jsxs(\"div\",{className:\"toolkits\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"group\",children:/*#__PURE__*/_jsx(FEIBRoundButton,{\"aria-label\":\"\\u9078\\u64C7\\u5716\\u7247\",onClick:onSelectClick,children:/*#__PURE__*/_jsx(EditIcon,{})})}),/*#__PURE__*/_jsx(\"img\",{src:imgSrc(),alt:\"\"})]})]});};export default HeroWithEdit;","map":{"version":3,"names":["React","useRef","useState","useEffect","Themes","FEIBRoundButton","AccountIcon10","EditIcon","BG1","BG2","BG3","BG4","BG5","BG6","showCustomDrawer","HeroWithEditWrapper","HeroWithEdit","planId","imageId","onChange","imageInput","imageSrc","setImageSrc","newImageId","setNewImageId","isDirty","setIsDirty","imgSrc","process","env","REACT_APP_DEPOSIT_PLAN_IMG_URL","handleOnImageChange","event","images","target","files","length","URL","createObjectURL","reader","FileReader","readAsDataURL","onloadend","e","sessionStorage","setItem","currentTarget","result","handleOnClick","func","id","current","click","onSelectClick","list","title","options","map","content","shouldAutoClose","colors","text","light"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00600_DepositPlan/components/HeroWithEdit.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\n\r\nimport Themes from 'themes/theme';\r\nimport FEIBRoundButton from 'components/elements/FEIBRoundButton';\r\nimport { AccountIcon10, EditIcon } from 'assets/images/icons';\r\n\r\nimport BG1 from 'assets/images/deposit-plan/hero-1@2x.jpg';\r\nimport BG2 from 'assets/images/deposit-plan/hero-2@2x.jpg';\r\nimport BG3 from 'assets/images/deposit-plan/hero-3@2x.jpg';\r\nimport BG4 from 'assets/images/deposit-plan/hero-4@2x.jpg';\r\nimport BG5 from 'assets/images/deposit-plan/hero-5@2x.jpg';\r\nimport BG6 from 'assets/images/deposit-plan/hero-6@2x.jpg';\r\n\r\nimport { showCustomDrawer } from 'utilities/MessageModal';\r\nimport HeroWithEditWrapper from './HeroWithEdit.style';\r\n\r\nconst HeroWithEdit = ({\r\n  planId, imageId, onChange,\r\n}) => {\r\n  const imageInput = useRef();\r\n  const [imageSrc, setImageSrc] = useState();\r\n  const [newImageId, setNewImageId] = useState();\r\n  const [isDirty, setIsDirty] = useState(false);\r\n\r\n  const imgSrc = () => {\r\n    switch (newImageId) {\r\n      case 0:\r\n        if (imageSrc) return imageSrc;\r\n        return `${process.env.REACT_APP_DEPOSIT_PLAN_IMG_URL}/${planId}.jpg`;\r\n      case 2:\r\n        return BG2;\r\n      case 3:\r\n        return BG3;\r\n      case 4:\r\n        return BG4;\r\n      case 5:\r\n        return BG5;\r\n      case 6:\r\n        return BG6;\r\n      case 1:\r\n      default:\r\n        return BG1;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (imageId) setNewImageId(imageId);\r\n  }, [imageId]);\r\n\r\n  useEffect(() => {\r\n    if (isDirty) onChange(newImageId);\r\n  }, [newImageId]);\r\n\r\n  const handleOnImageChange = (event) => {\r\n    const images = event.target.files;\r\n    if (images.length > 0) {\r\n      setImageSrc(URL.createObjectURL(images[0]));\r\n      setIsDirty(true);\r\n      setNewImageId(0);\r\n\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(images[0]);\r\n      reader.onloadend = (e) => {\r\n        sessionStorage.setItem('C00600-hero', e.currentTarget.result);\r\n      };\r\n    }\r\n  };\r\n\r\n  const handleOnClick = (func) => {\r\n    if (func.id === 0) {\r\n      imageInput.current.click();\r\n    } else {\r\n      setIsDirty(true);\r\n      setNewImageId(func.id);\r\n    }\r\n  };\r\n\r\n  const onSelectClick = () => {\r\n    const list = [\r\n      { title: '購物', id: 1 },\r\n      { title: '3C', id: 2 },\r\n      { title: '結婚', id: 3 },\r\n      { title: '房子', id: 4 },\r\n      { title: '車子', id: 5 },\r\n      { title: '旅遊', id: 6 },\r\n      { title: '上傳其他圖片', id: 0 },\r\n    ];\r\n    const options = (\r\n      <ul>\r\n        {list.map((func) => (\r\n          <li key={func.title}>\r\n            <button type=\"button\" onClick={() => handleOnClick(func)}>\r\n              {func.title}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n    showCustomDrawer({ title: '', content: options, shouldAutoClose: true });\r\n  };\r\n\r\n  return (\r\n    <HeroWithEditWrapper>\r\n      <input hidden aria-label=\"選擇圖片\" ref={imageInput} type=\"file\" accept=\"image/*\" onChange={handleOnImageChange} />\r\n      { typeof newImageId === 'undefined' && (\r\n        <button type=\"button\" className=\"mt-16\" onClick={onSelectClick}>\r\n          <AccountIcon10 color={Themes.colors.text.light} size=\"54\" />\r\n          <div className=\"text-select\">選擇圖片</div>\r\n        </button>\r\n      )}\r\n      { typeof newImageId !== 'undefined' && (\r\n      <div className=\"toolkits\">\r\n        <div className=\"group\">\r\n          <FEIBRoundButton aria-label=\"選擇圖片\" onClick={onSelectClick}>\r\n            <EditIcon />\r\n          </FEIBRoundButton>\r\n        </div>\r\n        <img src={imgSrc()} alt=\"\" />\r\n      </div>\r\n      )}\r\n    </HeroWithEditWrapper>\r\n  );\r\n};\r\nexport default HeroWithEdit;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}