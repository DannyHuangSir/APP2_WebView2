{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint react/no-array-index-key: 0 */import{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router';import{useDispatch}from'react-redux';import uuid from'react-uuid';import{setWaittingVisible}from'stores/reducers/ModalReducer';import Main from'components/Layout';import Layout from'components/Layout/Layout';import AccountCard from'components/AccountCard';import InformationList from'components/InformationList';import{accountFormatter,dateToString,currencySymbolGenerator}from'utilities/Generator';import{getInfo}from'./api';import PageWrapper from'./Details.style';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var uid=uuid();/**\r\n * L00100 貸款 資訊頁\r\n */var Page=function Page(){var _details$currency,_details$txAmt;var history=useHistory();var location=useLocation();var dispatch=useDispatch();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),param=_useState2[0],setParam=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),details=_useState4[0],setDetails=_useState4[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var account,subNo,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setWaittingVisible(true));if(location.state&&'account'in location.state&&'subNo'in location.state){account=location.state.account;subNo=location.state.subNo;setParam({account:account,subNo:subNo});}_context.next=4;return getInfo({account:account,subNo:subNo});case 4:response=_context.sent;// const response = await getLoanDetails({ accountNo: actno });\nsetDetails(response);dispatch(setWaittingVisible(false));case 7:case\"end\":return _context.stop();}}},_callee);})),[]);var getListing=function getListing(d){var _d$currency,_d$currency2;return[{title:'貸款帳號',content:accountFormatter(param.account)},{title:'貸款分號',content:param.subNo},// { title: '貸款類別', content: d.loanType }, TODO: 主機未有資料，暫隱藏\n{title:'貸款期限',content:\"\".concat(dateToString(d.startDate),\"~\").concat(dateToString(d.endDate))},{title:'每期還款日',content:\"\\u6BCF\\u6708\".concat(d.dayToPay,\"\\u65E5\")},{title:'初貸金額',content:currencySymbolGenerator((_d$currency=d.currency)!==null&&_d$currency!==void 0?_d$currency:'TWD',d.txAmt)},{title:'貸款利率',content:\"\".concat(d.rate,\"%\")},{title:'貸款餘額',content:currencySymbolGenerator((_d$currency2=d.currency)!==null&&_d$currency2!==void 0?_d$currency2:'TWD',d.loanBalance)},{title:'已繳期數',content:\"\".concat(d.periodPaid,\"\\u671F\")},{title:'剩餘期數',content:\"\".concat(d.periodRemaining,\"\\u671F\")}];};return/*#__PURE__*/_jsx(Layout,{title:\"\\u8CB8\\u6B3E\\u8CC7\\u8A0A\",goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(Main,{small:true,children:/*#__PURE__*/_jsxs(PageWrapper,{children:[/*#__PURE__*/_jsxs(AccountCard,{type:\"L\",children:[/*#__PURE__*/_jsx(\"div\",{children:details===null||details===void 0?void 0:details.type}),/*#__PURE__*/_jsx(\"div\",{children:\"\".concat(param===null||param===void 0?void 0:param.account,\" (\").concat(param===null||param===void 0?void 0:param.subNo,\")\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"justify-between items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-14\",children:\"\\u8CB8\\u6B3E\\u9918\\u984D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"balance\",children:\"\".concat(currencySymbolGenerator((_details$currency=details===null||details===void 0?void 0:details.currency)!==null&&_details$currency!==void 0?_details$currency:'NTD',(_details$txAmt=details===null||details===void 0?void 0:details.txAmt)!==null&&_details$txAmt!==void 0?_details$txAmt:0))})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[details&&getListing(details).map(function(d,i){return/*#__PURE__*/_jsx(InformationList,_objectSpread({},d),\"\".concat(uid,\"-\").concat(i));}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsx(\"p\",{className:\"remark\",children:\"\\u63D0\\u65E9\\u7D50\\u6E05\\uFF1A12\\u500B\\u6708\\u5167\\u7D50\\u6E05\\uFF0C\\u6536\\u53D63%\\u63D0\\u524D\\u9084\\u6B3E\\u624B\\u7E8C\\u8CBB\\uFF1B\\u8D85\\u904E\\u7B2C12\\u500B\\u6708\\u8D77\\u63D0\\u524D\\u9084\\u6B3E\\u6536\\u53D60%\\u624B\\u7E8C\\u8CBB\\u3002\"})]})})});};export default Page;","map":{"version":3,"names":["useState","useEffect","useHistory","useLocation","useDispatch","uuid","setWaittingVisible","Main","Layout","AccountCard","InformationList","accountFormatter","dateToString","currencySymbolGenerator","getInfo","PageWrapper","uid","Page","history","location","dispatch","param","setParam","details","setDetails","state","account","subNo","response","getListing","d","title","content","startDate","endDate","dayToPay","currency","txAmt","rate","loanBalance","periodPaid","periodRemaining","goBack","type","map","i"],"sources":["C:/Users/allen/git/app2-webview/src/pages/L00100_Loan/Details.jsx"],"sourcesContent":["/* eslint react/no-array-index-key: 0 */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\nimport uuid from 'react-uuid';\r\n\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport Main from 'components/Layout';\r\nimport Layout from 'components/Layout/Layout';\r\nimport AccountCard from 'components/AccountCard';\r\nimport InformationList from 'components/InformationList';\r\nimport {\r\n  accountFormatter, dateToString, currencySymbolGenerator,\r\n} from 'utilities/Generator';\r\n\r\nimport { getInfo } from './api';\r\nimport PageWrapper from './Details.style';\r\n\r\nconst uid = uuid();\r\n\r\n/**\r\n * L00100 貸款 資訊頁\r\n */\r\nconst Page = () => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const [param, setParam] = useState({});\r\n  const [details, setDetails] = useState();\r\n\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n    let account;\r\n    let subNo;\r\n    if (location.state && ('account' in location.state) && ('subNo' in location.state)) {\r\n      account = location.state.account;\r\n      subNo = location.state.subNo;\r\n      setParam({account, subNo});\r\n    }\r\n    const response = await getInfo({account, subNo});\r\n    // const response = await getLoanDetails({ accountNo: actno });\r\n    setDetails(response);\r\n    dispatch(setWaittingVisible(false));\r\n  }, []);\r\n\r\n  const getListing = (d) => ([\r\n    { title: '貸款帳號', content: accountFormatter(param.account) },\r\n    { title: '貸款分號', content: param.subNo },\r\n    // { title: '貸款類別', content: d.loanType }, TODO: 主機未有資料，暫隱藏\r\n    { title: '貸款期限', content: `${dateToString(d.startDate)}~${dateToString(d.endDate)}` },\r\n    { title: '每期還款日', content: `每月${d.dayToPay}日` },\r\n    { title: '初貸金額', content: currencySymbolGenerator(d.currency ?? 'TWD', d.txAmt) },\r\n    { title: '貸款利率', content: `${d.rate}%` },\r\n    { title: '貸款餘額', content: currencySymbolGenerator(d.currency ?? 'TWD', d.loanBalance) },\r\n    { title: '已繳期數', content: `${d.periodPaid}期` },\r\n    { title: '剩餘期數', content: `${d.periodRemaining}期` },\r\n  ]);\r\n\r\n  return (\r\n    <Layout title=\"貸款資訊\" goBackFunc={() => history.goBack()}>\r\n      <Main small>\r\n        <PageWrapper>\r\n          <AccountCard type=\"L\">\r\n            <div>{details?.type}</div>\r\n            <div>{`${param?.account} (${param?.subNo})`}</div>\r\n            <div className=\"justify-between items-center gap-4\">\r\n              <div className=\"text-14\">貸款餘額</div>\r\n              <div className=\"balance\">\r\n                {`${currencySymbolGenerator(details?.currency ?? 'NTD', details?.txAmt ?? 0)}`}\r\n              </div>\r\n            </div>\r\n          </AccountCard>\r\n          <div>\r\n            { details && getListing(details).map((d, i) => (\r\n              <InformationList key={`${uid}-${i}`} {...d} />\r\n            ))}\r\n            <hr />\r\n          </div>\r\n          <p className=\"remark\">提早結清：12個月內結清，收取3%提前還款手續費；超過第12個月起提前還款收取0%手續費。</p>\r\n        </PageWrapper>\r\n      </Main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}