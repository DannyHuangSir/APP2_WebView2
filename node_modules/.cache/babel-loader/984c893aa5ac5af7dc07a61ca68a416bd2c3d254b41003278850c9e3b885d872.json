{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-use-before-define */ /* eslint-disable object-curly-newline */import{useEffect,useState,useReducer}from'react';import{useDispatch}from'react-redux';import{useForm}from'react-hook-form';/* Elements */import Layout from'components/Layout/Layout';import AccountOverview from'components/AccountOverview/AccountOverview';import DepositDetailPanel from'components/DepositDetailPanel/depositDetailPanel';import{FEIBInputLabel,FEIBInput}from'components/elements';/* Reducers & JS functions */import{setWaittingVisible}from'stores/reducers/ModalReducer';import{customPopup,showPrompt}from'utilities/MessageModal';import{loadFuncParams,startFunc,closeFunc}from'utilities/AppScriptProxy';import{getAccountsList,updateAccount}from'utilities/CacheData';import{FuncID}from'utilities/FuncID';import{getTransactions,setAccountAlias,setMainCurrency}from'./api';import PageWrapper from'./C00400.style';/**\r\n * C00400 外幣帳戶首頁\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var C00400=function C00400(){var dispatch=useDispatch();var _useReducer=useReducer(function(x){return x+1;},0),_useReducer2=_slicedToArray(_useReducer,2),forceUpdate=_useReducer2[1];var _useForm=useForm(),register=_useForm.register,unregister=_useForm.unregister,handleSubmit=_useForm.handleSubmit;var _useState=useState(),_useState2=_slicedToArray(_useState,2),accounts=_useState2[0],setAccounts=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedAccountIdx=_useState4[0],setSelectedAccountIdx=_useState4[1];var selectedAccount=accounts?accounts[selectedAccountIdx!==null&&selectedAccountIdx!==void 0?selectedAccountIdx:0]:null;/**\r\n   * 頁面啟動，初始化\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(setWaittingVisible(true));// 取得帳號基本資料，不含跨轉優惠次數，且餘額「非即時」。\n// NOTE 使用非同步方式更新畫面，一開始會先顯示帳戶基本資料，待取得跨轉等資訊時再更新一次畫面。\ngetAccountsList('F',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(items){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(items.length===0)){_context.next=5;break;}_context.next=3;return showPrompt('您還沒有任何外幣存款帳戶，請在系統關閉此功能後，立即申請。',function(){return closeFunc();});case 3:_context.next=9;break;case 5:setAccounts(items);_context.next=8;return processStartParams(items);case 8:dispatch(setWaittingVisible(false));case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());case 2:case\"end\":return _context2.stop();}}},_callee2);})),[]);/**\r\n   * 處理 Function Controller 提供的啟動參數。\r\n   * @param {[*]} accts\r\n   */var processStartParams=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(accts){var startParams,index;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return loadFuncParams();case 2:startParams=_context3.sent;// 取得 Function Controller 提供的 keepData(model)\nif(startParams&&startParams instanceof Object){index=accts.findIndex(function(acc){return acc.accountNo===startParams.defaultAccount;});setSelectedAccountIdx(index);}else{setSelectedAccountIdx(0);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function processStartParams(_x2){return _ref3.apply(this,arguments);};}();/**\r\n   * 更新帳戶交易明細清單。\r\n   * @returns 需有傳回明細清單供顯示。\r\n   */var loadTransactions=function loadTransactions(account){var txnDetails=account.txnDetails;if(!account.isLoadingTxn){account.isLoadingTxn=true;// 避免因為非同步執行造成的重覆下載\nif(!txnDetails){// 取得帳戶交易明細（三年內的前25筆即可）\ngetTransactions(account.accountNo,account.currency).then(function(transData){var details=transData.acctTxDtls.slice(0,10);// 最多只需保留 10筆。\naccount.txnDetails=details;// 更新餘額。\nif(transData.length>0)account.balance=details[0].balance;delete account.isLoadingTxn;// 載入完成才能清掉旗標！\nforceUpdate();});}}return txnDetails;};/**\r\n   * 編輯帳戶名稱\r\n   * @param {*} name 原始帳戶名稱\r\n   */var showRenameDialog=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(name){var body,onOk;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// Note: 因為這個 Dialog 是動態產生的，所以一定要刪掉註冊的元件。\n//       否則，下次註冊將失效，而且持續傳回最後一次的輪入值，而不會改變。\nunregister('newName',{keepDirty:false});body=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FEIBInputLabel,{children:\"\\u65B0\\u7684\\u5E33\\u6236\\u540D\\u7A31\"}),/*#__PURE__*/_jsx(FEIBInput,_objectSpread(_objectSpread({},register('newName')),{},{autoFocus:true,inputProps:{maxLength:10,placeholder:'請設定此帳戶的專屬名稱',defaultValue:name,autoComplete:'off'}}))]});onOk=function onOk(values){selectedAccount.alias=values.newName;// 變更卡片上的帳戶名稱\nsetAccountAlias(selectedAccount.accountNo,selectedAccount.alias);forceUpdate();// NOTE 明細資料不需要存入Cache，下次進入C00400時才會更新。\nvar newAccount=_objectSpread({},selectedAccount);delete newAccount.isLoadingTxn;delete newAccount.txnDetails;updateAccount(newAccount);// 其他同帳號、不同幣別的帳戶名稱也要一併修改\naccounts.forEach(function(account){if(account.accountNo===selectedAccount.accountNo){account.alias=values.newName;updateAccount(account);}});};_context4.next=5;return customPopup('帳戶名稱編輯',body,handleSubmit(onOk));case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function showRenameDialog(_x3){return _ref4.apply(this,arguments);};}();/**\r\n   * 執行指定的單元功能。\r\n   * @param {*} funcCode 功能代碼\r\n   */var handleFunctionClick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(funcCode){var params,keepData;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:params=null;keepData={defaultAccount:selectedAccount.accountNo};_context5.t0=funcCode;_context5.next=_context5.t0==='moreTranscations'?5:_context5.t0==='foreignCurrencyTransfer'?7:_context5.t0===FuncID.E00100_換匯?7:_context5.t0==='setMainAccount'?9:_context5.t0==='foreignCurrencyPriceSetting'?11:_context5.t0==='Rename'?12:_context5.t0==='masterCardXB'?14:14;break;case 5:// 更多明細\nparams=_objectSpread(_objectSpread({},selectedAccount),{},{// 直接提供帳戶摘要資訊就不用再下載。\ncardColor:'orange'});return _context5.abrupt(\"break\",15);case 7:// 換匯\nparams=keepData;// TODO 直接提供帳戶摘要資訊，可以減少Call API；但也可以傳 null 要求重載。\nreturn _context5.abrupt(\"break\",15);case 9:// 設定為主要外幣帳戶\n// 將目前帳戶 設定為主要外幣帳戶\nsetMainCurrency(selectedAccount.accountNo,selectedAccount.currency);return _context5.abrupt(\"return\");case 11:return _context5.abrupt(\"break\",15);case 12:// 帳戶名稱編輯\nshowRenameDialog(selectedAccount.alias);return _context5.abrupt(\"return\");case 14:return _context5.abrupt(\"return\");case 15:startFunc(funcCode,params,keepData);case 16:case\"end\":return _context5.stop();}}},_callee5);}));return function handleFunctionClick(_x4){return _ref5.apply(this,arguments);};}();/**\r\n   * 頁面輸出\r\n   */return/*#__PURE__*/_jsx(Layout,{title:\"\\u5916\\u5E63\\u6D3B\\u5B58\",children:/*#__PURE__*/_jsx(PageWrapper,{small:true,children:selectedAccount?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AccountOverview,{accounts:accounts,defaultSlide:selectedAccountIdx,onAccountChanged:setSelectedAccountIdx,onFunctionClick:handleFunctionClick,cardColor:\"orange\",funcList:[{fid:'foreignCurrencyTransfer',title:'轉帳',enabled:selectedAccount.transable&&selectedAccount.balance>0},{fid:FuncID.E00100_換匯,title:'換匯',enabled:selectedAccount.balance>0}],moreFuncs:[// { fid: 'masterCardXB', title: 'MasterCard Send Cross Border', icon: 'temp' },\n{fid:'setMainAccount',title:'設定為主要外幣帳戶',icon:'temp'},{fid:'foreignCurrencyPriceSetting',title:'外幣到價通知設定',icon:'foreignCurrencyPriceSetting'},{fid:'Rename',title:'帳戶名稱編輯',icon:'edit'}]}),/*#__PURE__*/_jsx(DepositDetailPanel,{details:loadTransactions(selectedAccount),onMoreFuncClick:function onMoreFuncClick(){return handleFunctionClick('moreTranscations');}})]}):null})});};export default C00400;","map":{"version":3,"names":["useEffect","useState","useReducer","useDispatch","useForm","Layout","AccountOverview","DepositDetailPanel","FEIBInputLabel","FEIBInput","setWaittingVisible","customPopup","showPrompt","loadFuncParams","startFunc","closeFunc","getAccountsList","updateAccount","FuncID","getTransactions","setAccountAlias","setMainCurrency","PageWrapper","C00400","dispatch","x","forceUpdate","register","unregister","handleSubmit","accounts","setAccounts","selectedAccountIdx","setSelectedAccountIdx","selectedAccount","items","length","processStartParams","accts","startParams","Object","index","findIndex","acc","accountNo","defaultAccount","loadTransactions","account","txnDetails","isLoadingTxn","currency","then","transData","details","acctTxDtls","slice","balance","showRenameDialog","name","keepDirty","body","maxLength","placeholder","defaultValue","autoComplete","onOk","values","alias","newName","newAccount","forEach","handleFunctionClick","funcCode","params","keepData","E00100_換匯","cardColor","fid","title","enabled","transable","icon"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00400_ForeignDeposit/C00400.js"],"sourcesContent":["/* eslint-disable no-use-before-define */\r\n/* eslint-disable object-curly-newline */\r\nimport { useEffect, useState, useReducer } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport AccountOverview from 'components/AccountOverview/AccountOverview';\r\nimport DepositDetailPanel from 'components/DepositDetailPanel/depositDetailPanel';\r\nimport { FEIBInputLabel, FEIBInput } from 'components/elements';\r\n\r\n/* Reducers & JS functions */\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { customPopup, showPrompt } from 'utilities/MessageModal';\r\nimport { loadFuncParams, startFunc, closeFunc } from 'utilities/AppScriptProxy';\r\nimport { getAccountsList, updateAccount } from 'utilities/CacheData';\r\nimport { FuncID } from 'utilities/FuncID';\r\nimport {\r\n  getTransactions,\r\n  setAccountAlias,\r\n  setMainCurrency,\r\n} from './api';\r\nimport PageWrapper from './C00400.style';\r\n\r\n/**\r\n * C00400 外幣帳戶首頁\r\n */\r\nconst C00400 = () => {\r\n  const dispatch = useDispatch();\r\n  const [, forceUpdate] = useReducer((x) => x + 1, 0);\r\n\r\n  const { register, unregister, handleSubmit } = useForm();\r\n\r\n  const [accounts, setAccounts] = useState();\r\n  const [selectedAccountIdx, setSelectedAccountIdx] = useState();\r\n\r\n  const selectedAccount = accounts ? accounts[selectedAccountIdx ?? 0] : null;\r\n\r\n  /**\r\n   * 頁面啟動，初始化\r\n   */\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n\r\n    // 取得帳號基本資料，不含跨轉優惠次數，且餘額「非即時」。\r\n    // NOTE 使用非同步方式更新畫面，一開始會先顯示帳戶基本資料，待取得跨轉等資訊時再更新一次畫面。\r\n    getAccountsList('F', async (items) => { // M=台幣主帳戶、C=台幣子帳戶\r\n      if (items.length === 0) {\r\n        await showPrompt('您還沒有任何外幣存款帳戶，請在系統關閉此功能後，立即申請。', () => closeFunc());\r\n      } else {\r\n        setAccounts(items);\r\n        await processStartParams(items);\r\n        dispatch(setWaittingVisible(false));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  /**\r\n   * 處理 Function Controller 提供的啟動參數。\r\n   * @param {[*]} accts\r\n   */\r\n  const processStartParams = async (accts) => {\r\n    // startParams: {\r\n    //   defaultAccount: 預設帳號\r\n    // }\r\n    const startParams = await loadFuncParams();\r\n    // 取得 Function Controller 提供的 keepData(model)\r\n    if (startParams && (startParams instanceof Object)) {\r\n      const index = accts.findIndex((acc) => acc.accountNo === startParams.defaultAccount);\r\n      setSelectedAccountIdx(index);\r\n    } else {\r\n      setSelectedAccountIdx(0);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 更新帳戶交易明細清單。\r\n   * @returns 需有傳回明細清單供顯示。\r\n   */\r\n  const loadTransactions = (account) => {\r\n    const { txnDetails } = account;\r\n    if (!account.isLoadingTxn) {\r\n      account.isLoadingTxn = true; // 避免因為非同步執行造成的重覆下載\r\n      if (!txnDetails) {\r\n        // 取得帳戶交易明細（三年內的前25筆即可）\r\n        getTransactions(account.accountNo, account.currency).then((transData) => {\r\n          const details = transData.acctTxDtls.slice(0, 10); // 最多只需保留 10筆。\r\n          account.txnDetails = details;\r\n\r\n          // 更新餘額。\r\n          if (transData.length > 0) account.balance = details[0].balance;\r\n\r\n          delete account.isLoadingTxn; // 載入完成才能清掉旗標！\r\n          forceUpdate();\r\n        });\r\n      }\r\n    }\r\n    return txnDetails;\r\n  };\r\n\r\n  /**\r\n   * 編輯帳戶名稱\r\n   * @param {*} name 原始帳戶名稱\r\n   */\r\n  const showRenameDialog = async (name) => {\r\n    // Note: 因為這個 Dialog 是動態產生的，所以一定要刪掉註冊的元件。\r\n    //       否則，下次註冊將失效，而且持續傳回最後一次的輪入值，而不會改變。\r\n    unregister('newName', { keepDirty: false });\r\n\r\n    const body = (\r\n      <>\r\n        <FEIBInputLabel>新的帳戶名稱</FEIBInputLabel>\r\n        <FEIBInput\r\n          {...register('newName')}\r\n          autoFocus\r\n          inputProps={{ maxLength: 10, placeholder: '請設定此帳戶的專屬名稱', defaultValue: name, autoComplete: 'off' }}\r\n        />\r\n      </>\r\n    );\r\n    const onOk = (values) => {\r\n      selectedAccount.alias = values.newName; // 變更卡片上的帳戶名稱\r\n      setAccountAlias(selectedAccount.accountNo, selectedAccount.alias);\r\n      forceUpdate();\r\n\r\n      // NOTE 明細資料不需要存入Cache，下次進入C00400時才會更新。\r\n      const newAccount = {...selectedAccount};\r\n      delete newAccount.isLoadingTxn;\r\n      delete newAccount.txnDetails;\r\n      updateAccount(newAccount);\r\n\r\n      // 其他同帳號、不同幣別的帳戶名稱也要一併修改\r\n      accounts.forEach((account) => {\r\n        if (account.accountNo === selectedAccount.accountNo) {\r\n          account.alias = values.newName;\r\n          updateAccount(account);\r\n        }\r\n      });\r\n    };\r\n    await customPopup('帳戶名稱編輯', body, handleSubmit(onOk));\r\n  };\r\n\r\n  /**\r\n   * 執行指定的單元功能。\r\n   * @param {*} funcCode 功能代碼\r\n   */\r\n  const handleFunctionClick = async (funcCode) => {\r\n    let params = null;\r\n    const keepData = { defaultAccount: selectedAccount.accountNo };\r\n    switch (funcCode) {\r\n      case 'moreTranscations': // 更多明細\r\n        params = {\r\n          ...selectedAccount, // 直接提供帳戶摘要資訊就不用再下載。\r\n          cardColor: 'orange',\r\n        };\r\n        break;\r\n\r\n      case 'foreignCurrencyTransfer': // 轉帳\r\n      case FuncID.E00100_換匯: // 換匯\r\n        params = keepData; // TODO 直接提供帳戶摘要資訊，可以減少Call API；但也可以傳 null 要求重載。\r\n        break;\r\n\r\n      case 'setMainAccount': // 設定為主要外幣帳戶\r\n        // 將目前帳戶 設定為主要外幣帳戶\r\n        setMainCurrency(selectedAccount.accountNo, selectedAccount.currency);\r\n        return;\r\n\r\n      case 'foreignCurrencyPriceSetting': // 外幣到價通知\r\n        break;\r\n\r\n      case 'Rename': // 帳戶名稱編輯\r\n        showRenameDialog(selectedAccount.alias);\r\n        return;\r\n\r\n      case 'masterCardXB': // MasterCard Send Cross Border\r\n      default:\r\n        // TODO：未完成\r\n        return;\r\n    }\r\n\r\n    startFunc(funcCode, params, keepData);\r\n  };\r\n\r\n  /**\r\n   * 頁面輸出\r\n   */\r\n  return (\r\n    <Layout title=\"外幣活存\">\r\n      <PageWrapper small>\r\n        {selectedAccount ? (\r\n          <>\r\n            <AccountOverview\r\n              accounts={accounts}\r\n              defaultSlide={selectedAccountIdx}\r\n              onAccountChanged={setSelectedAccountIdx}\r\n              onFunctionClick={handleFunctionClick}\r\n              cardColor=\"orange\"\r\n              funcList={[\r\n                {\r\n                  fid: 'foreignCurrencyTransfer',\r\n                  title: '轉帳',\r\n                  enabled:\r\n                    selectedAccount.transable && selectedAccount.balance > 0,\r\n                },\r\n                {\r\n                  fid: FuncID.E00100_換匯,\r\n                  title: '換匯',\r\n                  enabled: selectedAccount.balance > 0,\r\n                },\r\n              ]}\r\n              moreFuncs={[\r\n                // { fid: 'masterCardXB', title: 'MasterCard Send Cross Border', icon: 'temp' },\r\n                {\r\n                  fid: 'setMainAccount',\r\n                  title: '設定為主要外幣帳戶',\r\n                  icon: 'temp',\r\n                },\r\n                {\r\n                  fid: 'foreignCurrencyPriceSetting',\r\n                  title: '外幣到價通知設定',\r\n                  icon: 'foreignCurrencyPriceSetting',\r\n                },\r\n                { fid: 'Rename', title: '帳戶名稱編輯', icon: 'edit' },\r\n              ]}\r\n            />\r\n\r\n            <DepositDetailPanel\r\n              details={loadTransactions(selectedAccount)}\r\n              onMoreFuncClick={() => handleFunctionClick('moreTranscations')}\r\n            />\r\n          </>\r\n        ) : null}\r\n      </PageWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default C00400;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}