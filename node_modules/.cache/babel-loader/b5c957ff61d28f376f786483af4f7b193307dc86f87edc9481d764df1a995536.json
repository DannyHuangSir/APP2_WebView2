{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useForm,Controller}from'react-hook-form';import{FEIBButton,FEIBInputLabel,FEIBInput}from'components/elements';import Badge from'components/Badge';import Avatar from'components/Avatar';import{accountFormatter,toHalfWidth}from'utilities/Generator';import{DrawerWrapper}from'./D00600.style';/**\r\n * 編輯/新增銀行帳號。\r\n * @param {*} initData {\r\n *   bankId: 常用轉入帳戶-銀行代碼\r\n *   acctId: 常用轉入帳戶-帳號\r\n *   bankName: 銀行名稱\r\n *   nickName: 暱稱\r\n *   headshot: 代表圖檔的UUID，用來顯示大頭貼；若為 null 表示還沒有設定頭像。\r\n * }\r\n * @param {*} onFinished 完成編輯時的事件。\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AccountEditor(_ref){var initData=_ref.initData,onFinished=_ref.onFinished;var _useState=useState(initData),_useState2=_slicedToArray(_useState,1),model=_useState2[0];// Form 欄位名稱。\nvar idNickName='nickName';// 暱稱\n/**\r\n   * 表單\r\n   */var _useForm=useForm({mode:'onSubmit',defaultValues:_objectSpread(_objectSpread({},initData),{},{nickName:toHalfWidth(initData.nickName)})}),control=_useForm.control,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors;/**\r\n   *- 初始化\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);})),[]);/**\r\n   * 輸入暱稱，編輯完成。\r\n   */var Page2=function Page2(){var onSubmit=function onSubmit(values){var newModel=_objectSpread(_objectSpread(_objectSpread({},model),values),{},{headshot:values.headshot});onFinished(newModel);};return/*#__PURE__*/_jsxs(\"form\",{className:\"flex-col\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Badge,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\u5E33\\u865F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-blue\",children:\"\".concat(model.bankName,\" \").concat(accountFormatter(model.acctId))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"self-center\",children:/*#__PURE__*/_jsx(Avatar,{editable:true,memberId:model.headshot,name:model.nickName,onNewPhotoLoaded:function onNewPhotoLoaded(headshot){return setValue('headshot',headshot);}})}),/*#__PURE__*/_jsx(FEIBInputLabel,{htmlFor:idNickName,children:\"\\u66B1\\u7A31\"}),/*#__PURE__*/_jsx(Controller,{name:idNickName,control:control,render:function render(_ref3){var field=_ref3.field;return/*#__PURE__*/_jsx(FEIBInput,_objectSpread(_objectSpread({},field),{},{autoComplete:\"off\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5BB9\\u6613\\u8B93\\u60A8\\u8A18\\u4F4F\\u6B64\\u5E33\\u865F\\u7684\\u66B1\\u7A31\",inputProps:{maxLength:20},error:!!(errors!==null&&errors!==void 0&&errors.nickName)// 畫紅底線\n}));}}),/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u5B8C\\u6210\"})]})]});};/**\r\n   * HTML輸出。\r\n   */return/*#__PURE__*/_jsx(DrawerWrapper,{children:/*#__PURE__*/_jsx(Page2,{})});}/**\r\n * 預設值：台灣銀行(004)\r\n */AccountEditor.defaultProps={initData:{bankId:'',acctId:'',nickName:''},onFinished:null};export default AccountEditor;","map":{"version":3,"names":["React","useEffect","useState","useForm","Controller","FEIBButton","FEIBInputLabel","FEIBInput","Badge","Avatar","accountFormatter","toHalfWidth","DrawerWrapper","AccountEditor","initData","onFinished","model","idNickName","mode","defaultValues","nickName","control","handleSubmit","setValue","errors","formState","Page2","onSubmit","values","newModel","headshot","bankName","acctId","field","maxLength","defaultProps","bankId"],"sources":["C:/Users/allen/git/app2-webview/src/pages/D00600_RegisteredContacts/D00600_AccountEditor.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { FEIBButton, FEIBInputLabel, FEIBInput } from 'components/elements';\r\nimport Badge from 'components/Badge';\r\nimport Avatar from 'components/Avatar';\r\nimport { accountFormatter, toHalfWidth } from 'utilities/Generator';\r\nimport { DrawerWrapper } from './D00600.style';\r\n\r\n/**\r\n * 編輯/新增銀行帳號。\r\n * @param {*} initData {\r\n *   bankId: 常用轉入帳戶-銀行代碼\r\n *   acctId: 常用轉入帳戶-帳號\r\n *   bankName: 銀行名稱\r\n *   nickName: 暱稱\r\n *   headshot: 代表圖檔的UUID，用來顯示大頭貼；若為 null 表示還沒有設定頭像。\r\n * }\r\n * @param {*} onFinished 完成編輯時的事件。\r\n */\r\nfunction AccountEditor({\r\n  initData,\r\n  onFinished,\r\n}) {\r\n  const [model] = useState(initData);\r\n\r\n  // Form 欄位名稱。\r\n  const idNickName = 'nickName'; // 暱稱\r\n\r\n  /**\r\n   * 表單\r\n   */\r\n  const {\r\n    control, handleSubmit, setValue, formState: { errors },\r\n  } = useForm({\r\n    mode: 'onSubmit',\r\n    defaultValues: {...initData, nickName: toHalfWidth(initData.nickName)},\r\n  });\r\n\r\n  /**\r\n   *- 初始化\r\n   */\r\n  useEffect(async () => {\r\n  }, []);\r\n\r\n  /**\r\n   * 輸入暱稱，編輯完成。\r\n   */\r\n  const Page2 = () => {\r\n    const onSubmit = (values) => {\r\n      const newModel = {\r\n        ...model,\r\n        ...values,\r\n        headshot: values.headshot,\r\n      };\r\n      onFinished(newModel);\r\n    };\r\n    return (\r\n      <form className=\"flex-col\" onSubmit={handleSubmit(onSubmit)}>\r\n        <Badge>\r\n          <div className=\"label\">帳號</div>\r\n          <div className=\"text-blue\">{`${model.bankName} ${accountFormatter(model.acctId)}`}</div>\r\n        </Badge>\r\n        <div className=\"flex-col\">\r\n          <div className=\"self-center\">\r\n            {/* 可變更約定帳號的人的大頭貼 */}\r\n            <Avatar editable memberId={model.headshot} name={model.nickName} onNewPhotoLoaded={(headshot) => setValue('headshot', headshot)} />\r\n          </div>\r\n          <FEIBInputLabel htmlFor={idNickName}>暱稱</FEIBInputLabel>\r\n          <Controller\r\n            name={idNickName}\r\n            control={control}\r\n            render={({ field }) => (\r\n              <FEIBInput\r\n                {...field}\r\n                autoComplete=\"off\"\r\n                placeholder=\"請輸入容易讓您記住此帳號的暱稱\"\r\n                inputProps={{ maxLength: 20 }}\r\n                error={!!errors?.nickName} // 畫紅底線\r\n              />\r\n            )}\r\n          />\r\n          <FEIBButton type=\"submit\">完成</FEIBButton>\r\n        </div>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * HTML輸出。\r\n   */\r\n  return (\r\n    <DrawerWrapper>\r\n      <Page2 />\r\n    </DrawerWrapper>\r\n  );\r\n}\r\n\r\n/**\r\n * 預設值：台灣銀行(004)\r\n */\r\nAccountEditor.defaultProps = {\r\n  initData: { bankId: '', acctId: '', nickName: '' },\r\n  onFinished: null,\r\n};\r\n\r\nexport default AccountEditor;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}