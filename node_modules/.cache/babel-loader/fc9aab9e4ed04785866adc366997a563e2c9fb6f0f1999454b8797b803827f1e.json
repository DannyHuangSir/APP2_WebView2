{"ast":null,"code":"import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";/* eslint-disable react/jsx-indent */ /* eslint-disable react/jsx-wrap-multilines */import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import Loading from'components/Loading';import Dialog from'components/Dialog';import BottomDrawer from'components/BottomDrawer';import{FEIBButton,FEIBIconButton}from'components/elements';import SuccessFailureAnimations from'components/SuccessFailureAnimations';import theme from'themes/theme';import{ArrowBackIcon,HomeIcon}from'assets/images/icons';import{goHome as goHomeFunc,closeFunc,switchLoading}from'utilities/AppScriptProxy';import{showError}from'utilities/MessageModal';import{setModalVisible,setWaittingVisible,setDrawerVisible,setAnimationModalVisible,setDialogVisible}from'../../stores/reducers/ModalReducer';import HeaderWrapper from'./Header.style';/**\r\n * 基本共用的頁面框架。\r\n * @param {{\r\n    title: '{*} 頁面上方主標題',\r\n    children: '{*} 頁面內容',\r\n    goHome: '{boolean} 表示顯示右上方的 goHome 圖示',\r\n    goBack: '{boolean} 表示顯示左上方的 goBack 圖示',\r\n    goBackFunc: '{function} 當 goBack 按下時的自訂處理函數',\r\n    inspector: '檢查是否符合資格；若不是傳回 true 則立即執行 goBackFunc 或 closeFunc',\r\n    hasClearHeader: '{boolean} 將標題設為透明的，目前用於存錢計劃',\r\n  }} props\r\n * @returns\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Layout(_ref){var title=_ref.title,children=_ref.children,_ref$goHome=_ref.goHome,goHome=_ref$goHome===void 0?true:_ref$goHome,_ref$goBack=_ref.goBack,goBack=_ref$goBack===void 0?true:_ref$goBack,goBackFunc=_ref.goBackFunc,inspector=_ref.inspector,hasClearHeader=_ref.hasClearHeader;var dispatch=useDispatch();//\n// 處理 Popup視窗、 等待中 及 Drawer。\n//\nvar _useSelector=useSelector(function(state){return state.ModalReducer;}),overPanel=_useSelector.overPanel,setResult=_useSelector.setResult,showDialog=_useSelector.showDialog;var modalData=useSelector(function(state){return state.ModalReducer.modal;});var showModal=useSelector(function(state){return state.ModalReducer.showModal;});var drawerData=useSelector(function(state){return state.ModalReducer.drawer;});var showDrawer=useSelector(function(state){return state.ModalReducer.showDrawer;});var waitting=useSelector(function(state){return state.ModalReducer.waitting;});var showAnimationModal=useSelector(function(state){return state.ModalReducer.showAnimationModal;});var animationModalData=useSelector(function(state){return state.ModalReducer.animationModal;});// 關閉 Popup視窗。\nvar onModalClose=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(modalData.onClose){modalData.onClose();}dispatch(setModalVisible(false));// dispatch(setWaittingVisible(false));\nif(setResult)setResult(null);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onModalClose(){return _ref2.apply(this,arguments);};}();// 關閉結果動畫彈窗\nvar onAnimationModalClose=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(animationModalData.onClose){animationModalData.onClose();}dispatch(setAnimationModalVisible(false));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onAnimationModalClose(){return _ref3.apply(this,arguments);};}();var onModalOk=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!modalData.onOk){_context3.next=6;break;}_context3.next=3;return modalData.onOk();case 3:_context3.t0=_context3.sent;if(!(_context3.t0===false)){_context3.next=6;break;}return _context3.abrupt(\"return\");case 6:if(!modalData.noDismiss){_context3.next=8;break;}return _context3.abrupt(\"return\");case 8:dispatch(setModalVisible(false));dispatch(setDialogVisible(false));if(setResult)setResult(true);// 傳回視窗結束狀態。\ncase 11:case\"end\":return _context3.stop();}}},_callee3);}));return function onModalOk(){return _ref4.apply(this,arguments);};}();//\nvar onModalCancel=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!modalData.onCancel){_context4.next=6;break;}_context4.next=3;return modalData.onCancel();case 3:_context4.t0=_context4.sent;if(!(_context4.t0===false)){_context4.next=6;break;}return _context4.abrupt(\"return\");case 6:dispatch(setModalVisible(false));dispatch(setDialogVisible(false));if(setResult)setResult(false);// 傳回視窗結束狀態。\ncase 9:case\"end\":return _context4.stop();}}},_callee4);}));return function onModalCancel(){return _ref5.apply(this,arguments);};}();/**\r\n   *  監控 ModalReducer.showModal, .showAnimationModal，當開啟時立即關閉 等待中 及 Drawer\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// console.log('showModal -> ', showModal || showAnimationModal);\n// 強制關掉 等待畫面，才能看到 Popup 視窗。\nif(showModal||showDialog||showAnimationModal){dispatch(setWaittingVisible(false));if(!showDialog)dispatch(setDrawerVisible(false));}case 1:case\"end\":return _context5.stop();}}},_callee5);})),[showModal,showDialog,showAnimationModal]);/**\r\n   * 顯示訊息視窗\r\n   */var MessageModal=function MessageModal(){var _modalData$title,_modalData$cancelCont,_modalData$okContent;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Dialog,{title:(_modalData$title=modalData.title)!==null&&_modalData$title!==void 0?_modalData$title:'系統訊息',isOpen:showModal||showDialog,onClose:onModalClose,content:modalData.content,showCloseButton:modalData.showCloseButton,action:/*#__PURE__*/_jsxs(_Fragment,{children:[modalData.onCancel||modalData.cancelContent?/*#__PURE__*/_jsx(FEIBButton,{$bgColor:theme.colors.background.cancel,$color:theme.colors.text.dark,onClick:onModalCancel,children:(_modalData$cancelCont=modalData.cancelContent)!==null&&_modalData$cancelCont!==void 0?_modalData$cancelCont:'取消'}):null,modalData.onOk?/*#__PURE__*/_jsx(FEIBButton,{onClick:onModalOk,children:(_modalData$okContent=modalData.okContent)!==null&&_modalData$okContent!==void 0?_modalData$okContent:'確認'}):null]})})});};/**\r\n   *  監控 ModalReducer.showDrawer，當開啟時立即關閉 等待中 及 Popup視窗。\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:// console.log('showDrawer -> ', showDrawer);\nif(showDrawer){dispatch(setWaittingVisible(false));dispatch(setModalVisible(false));}case 1:case\"end\":return _context6.stop();}}},_callee6);})),[showDrawer]);/**\r\n   * 監控 ModalReducer.waitting，當開啟時立即關閉 Drawer 及 Popup視窗。\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:// console.log('showWaitting -> ', waitting);\nswitchLoading(waitting);if(waitting){dispatch(setDrawerVisible(false));dispatch(setModalVisible(false));}case 2:case\"end\":return _context7.stop();}}},_callee7);})),[waitting]);/**\r\n   * Drawer GoBack\r\n   */var onDrawerGoBack=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return drawerData.goBack();case 2:_context8.t0=_context8.sent;if(!(_context8.t0===false)){_context8.next=5;break;}return _context8.abrupt(\"return\");case 5:// 取消 goBack 程序。\ndispatch(setDrawerVisible(false));case 6:case\"end\":return _context8.stop();}}},_callee8);}));return function onDrawerGoBack(){return _ref9.apply(this,arguments);};}();/**\r\n   * Drawer Close\r\n   */var onDrawerClose=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(){return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!drawerData.onClose){_context9.next=6;break;}_context9.next=3;return drawerData.onClose();case 3:_context9.t0=_context9.sent;if(!(_context9.t0===false)){_context9.next=6;break;}return _context9.abrupt(\"return\");case 6:dispatch(setDrawerVisible(false));case 7:case\"end\":return _context9.stop();}}},_callee9);}));return function onDrawerClose(){return _ref10.apply(this,arguments);};}();/**\r\n   * 當 Drawer 關閉時，必需將 Result 設為 false, 才會結束 Promise\r\n   */useEffect(function(){if(showDrawer===false&&setResult)setResult(false);// 傳回視窗結束狀態。\n},[showDrawer]);/**\r\n   * 下方彈出抽屜 UI。\r\n   */var Drawer=function Drawer(){return/*#__PURE__*/_jsx(BottomDrawer,{title:drawerData.title,isOpen:showDrawer,onBack:drawerData.goBack?onDrawerGoBack:null,onClose:onDrawerClose,content:drawerData.content,noScrollable:drawerData.noScrollable,shouldAutoClose:drawerData.shouldAutoClose// TODO 確認必要性。\n});};/**\r\n   * 成功失敗動畫彈窗\r\n   */var AnimationModal=function AnimationModal(){return/*#__PURE__*/_jsx(Dialog,{isOpen:showAnimationModal,onClose:onAnimationModalClose,title:\" \",content:/*#__PURE__*/_jsx(\"div\",{className:\"dialogResultContent\",children:/*#__PURE__*/_jsx(SuccessFailureAnimations,{isSuccess:animationModalData.isSuccess,successTitle:animationModalData.successTitle,successDesc:animationModalData.successDesc,errorTitle:animationModalData.errorTitle,errorCode:animationModalData.errorCode,errorDesc:animationModalData.errorDesc})})});};//\n// 檢查是否可以開啟這個頁面。\n//\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),isPassed=_useState2[0],setPassed=_useState2[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){var pass,errMesg;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:pass=true;// 若未設 inspector，則預設為檢查通過。\nif(!inspector){_context10.next=11;break;}_context10.next=4;return inspector();case 4:errMesg=_context10.sent;// console.log(errMesg);\npass=errMesg===null;if(!errMesg){_context10.next=11;break;}setPassed(errMesg);// 顯示等待中\n_context10.next=10;return showError(errMesg,goBackFunc!==null&&goBackFunc!==void 0?goBackFunc:closeFunc);case 10:return _context10.abrupt(\"return\");case 11:setPassed(pass===true);// 必須是 true/false, 否則會一直顯示等待中的畫面。\ncase 12:case\"end\":return _context10.stop();}}},_callee10);})),[]);//\n// 頁面外框\n//\nif(!waitting&&isPassed===true){// 在 isPassed 還沒有值之前，永遠顯不等待中的畫面。\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(HeaderWrapper,{$isTransparent:hasClearHeader,children:[/*#__PURE__*/_jsx(FEIBIconButton,{className:\"goBack\",$fontSize:2.4,$iconColor:theme.colors.text.dark,onClick:goBackFunc!==null&&goBackFunc!==void 0?goBackFunc:closeFunc,$hide:!goBack,children:/*#__PURE__*/_jsx(ArrowBackIcon,{})}),/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsx(FEIBIconButton,{className:\"goHome\",$fontSize:2.4,$iconColor:theme.colors.text.dark,onClick:goHomeFunc,$hide:!goHome,children:/*#__PURE__*/_jsx(HomeIcon,{})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[waitting?null:children,/*#__PURE__*/_jsx(Drawer,{}),/*#__PURE__*/_jsx(MessageModal,{}),/*#__PURE__*/_jsx(AnimationModal,{}),overPanel]})]});}return/*#__PURE__*/_jsx(\"div\",{children:isPassed===null?/*#__PURE__*/_jsx(Loading,{isFullscreen:true}):/*#__PURE__*/_jsx(MessageModal,{})});}Layout.defaultProps={title:'Bankee APP 2.0',children:/*#__PURE__*/_jsx(\"div\",{}),goHome:true,goBack:true,goBackFunc:null,inspector:null};export default Layout;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Loading","Dialog","BottomDrawer","FEIBButton","FEIBIconButton","SuccessFailureAnimations","theme","ArrowBackIcon","HomeIcon","goHome","goHomeFunc","closeFunc","switchLoading","showError","setModalVisible","setWaittingVisible","setDrawerVisible","setAnimationModalVisible","setDialogVisible","HeaderWrapper","Layout","title","children","goBack","goBackFunc","inspector","hasClearHeader","dispatch","state","ModalReducer","overPanel","setResult","showDialog","modalData","modal","showModal","drawerData","drawer","showDrawer","waitting","showAnimationModal","animationModalData","animationModal","onModalClose","onClose","onAnimationModalClose","onModalOk","onOk","noDismiss","onModalCancel","onCancel","MessageModal","content","showCloseButton","cancelContent","colors","background","cancel","text","dark","okContent","onDrawerGoBack","onDrawerClose","Drawer","noScrollable","shouldAutoClose","AnimationModal","isSuccess","successTitle","successDesc","errorTitle","errorCode","errorDesc","isPassed","setPassed","pass","errMesg","defaultProps"],"sources":["C:/Users/allen/git/app2-webview/src/components/Layout/Layout.js"],"sourcesContent":["/* eslint-disable react/jsx-indent */\r\n/* eslint-disable react/jsx-wrap-multilines */\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Loading from 'components/Loading';\r\nimport Dialog from 'components/Dialog';\r\nimport BottomDrawer from 'components/BottomDrawer';\r\nimport { FEIBButton, FEIBIconButton } from 'components/elements';\r\nimport SuccessFailureAnimations from 'components/SuccessFailureAnimations';\r\nimport theme from 'themes/theme';\r\nimport { ArrowBackIcon, HomeIcon } from 'assets/images/icons';\r\nimport { goHome as goHomeFunc, closeFunc, switchLoading } from 'utilities/AppScriptProxy';\r\nimport { showError } from 'utilities/MessageModal';\r\nimport {\r\n  setModalVisible, setWaittingVisible, setDrawerVisible, setAnimationModalVisible,\r\n  setDialogVisible,\r\n} from '../../stores/reducers/ModalReducer';\r\nimport HeaderWrapper from './Header.style';\r\n\r\n/**\r\n * 基本共用的頁面框架。\r\n * @param {{\r\n    title: '{*} 頁面上方主標題',\r\n    children: '{*} 頁面內容',\r\n    goHome: '{boolean} 表示顯示右上方的 goHome 圖示',\r\n    goBack: '{boolean} 表示顯示左上方的 goBack 圖示',\r\n    goBackFunc: '{function} 當 goBack 按下時的自訂處理函數',\r\n    inspector: '檢查是否符合資格；若不是傳回 true 則立即執行 goBackFunc 或 closeFunc',\r\n    hasClearHeader: '{boolean} 將標題設為透明的，目前用於存錢計劃',\r\n  }} props\r\n * @returns\r\n */\r\nfunction Layout({\r\n  title,\r\n  children,\r\n  goHome = true,\r\n  goBack = true,\r\n  goBackFunc,\r\n  inspector,\r\n  hasClearHeader,\r\n}) {\r\n  const dispatch = useDispatch();\r\n\r\n  //\r\n  // 處理 Popup視窗、 等待中 及 Drawer。\r\n  //\r\n  const { overPanel, setResult, showDialog } = useSelector((state) => state.ModalReducer);\r\n  const modalData = useSelector((state) => state.ModalReducer.modal);\r\n  const showModal = useSelector((state) => state.ModalReducer.showModal);\r\n  const drawerData = useSelector((state) => state.ModalReducer.drawer);\r\n  const showDrawer = useSelector((state) => state.ModalReducer.showDrawer);\r\n  const waitting = useSelector((state) => state.ModalReducer.waitting);\r\n  const showAnimationModal = useSelector((state) => state.ModalReducer.showAnimationModal);\r\n  const animationModalData = useSelector((state) => state.ModalReducer.animationModal);\r\n\r\n  // 關閉 Popup視窗。\r\n  const onModalClose = async () => {\r\n    if (modalData.onClose) {\r\n      modalData.onClose();\r\n    }\r\n    dispatch(setModalVisible(false));\r\n    // dispatch(setWaittingVisible(false));\r\n    if (setResult) setResult(null);\r\n  };\r\n\r\n  // 關閉結果動畫彈窗\r\n  const onAnimationModalClose = async () => {\r\n    if (animationModalData.onClose) {\r\n      animationModalData.onClose();\r\n    }\r\n    dispatch(setAnimationModalVisible(false));\r\n  };\r\n\r\n  const onModalOk = async () => {\r\n    if (modalData.onOk) {\r\n      if ((await modalData.onOk() === false)) return; // 取消 Ok 程序。\r\n    }\r\n    // 如果有需要接續 modal 得操作，可以設定 noDismiss 為 true，以避免點擊ok按鈕後，下個 modal 遭關閉。\r\n    if (modalData.noDismiss) return;\r\n\r\n    dispatch(setModalVisible(false));\r\n    dispatch(setDialogVisible(false));\r\n    if (setResult) setResult(true); // 傳回視窗結束狀態。\r\n  };\r\n\r\n  //\r\n  const onModalCancel = async () => {\r\n    if (modalData.onCancel) {\r\n      if ((await modalData.onCancel() === false)) return; // 取消 Cancel 程序。\r\n    }\r\n    dispatch(setModalVisible(false));\r\n    dispatch(setDialogVisible(false));\r\n    if (setResult) setResult(false); // 傳回視窗結束狀態。\r\n  };\r\n\r\n  /**\r\n   *  監控 ModalReducer.showModal, .showAnimationModal，當開啟時立即關閉 等待中 及 Drawer\r\n   */\r\n  useEffect(async () => {\r\n    // console.log('showModal -> ', showModal || showAnimationModal);\r\n    // 強制關掉 等待畫面，才能看到 Popup 視窗。\r\n    if (showModal || showDialog || showAnimationModal) {\r\n      dispatch(setWaittingVisible(false));\r\n      if (!showDialog) dispatch(setDrawerVisible(false));\r\n    }\r\n  }, [showModal, showDialog, showAnimationModal]);\r\n\r\n  /**\r\n   * 顯示訊息視窗\r\n   */\r\n  const MessageModal = () => (\r\n    <div>\r\n      <Dialog\r\n        title={modalData.title ?? '系統訊息'}\r\n        isOpen={showModal || showDialog}\r\n        onClose={onModalClose}\r\n        content={modalData.content}\r\n        showCloseButton={modalData.showCloseButton}\r\n        action={\r\n          <>\r\n            {modalData.onCancel || modalData.cancelContent ? (\r\n              <FEIBButton\r\n                $bgColor={theme.colors.background.cancel}\r\n                $color={theme.colors.text.dark}\r\n                onClick={onModalCancel}\r\n              >\r\n                {modalData.cancelContent ?? '取消'}\r\n              </FEIBButton>\r\n            ) : null}\r\n            {/*  若沒有給 onOk 則不出現確認按鈕 */}\r\n            {modalData.onOk ? (\r\n              <FEIBButton onClick={onModalOk}>\r\n                {modalData.okContent ?? '確認'}\r\n              </FEIBButton>\r\n            ) : null}\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n\r\n  /**\r\n   *  監控 ModalReducer.showDrawer，當開啟時立即關閉 等待中 及 Popup視窗。\r\n   */\r\n  useEffect(async () => {\r\n    // console.log('showDrawer -> ', showDrawer);\r\n    if (showDrawer) {\r\n      dispatch(setWaittingVisible(false));\r\n      dispatch(setModalVisible(false));\r\n    }\r\n  }, [showDrawer]);\r\n\r\n  /**\r\n   * 監控 ModalReducer.waitting，當開啟時立即關閉 Drawer 及 Popup視窗。\r\n   */\r\n  useEffect(async () => {\r\n    // console.log('showWaitting -> ', waitting);\r\n    switchLoading(waitting);\r\n    if (waitting) {\r\n      dispatch(setDrawerVisible(false));\r\n      dispatch(setModalVisible(false));\r\n    }\r\n  }, [waitting]);\r\n\r\n  /**\r\n   * Drawer GoBack\r\n   */\r\n  const onDrawerGoBack = async () => {\r\n    if ((await drawerData.goBack() === false)) return; // 取消 goBack 程序。\r\n    dispatch(setDrawerVisible(false));\r\n  };\r\n\r\n  /**\r\n   * Drawer Close\r\n   */\r\n  const onDrawerClose = async () => {\r\n    if (drawerData.onClose) {\r\n      if ((await drawerData.onClose() === false)) return; // 取消 Close 程序。\r\n    }\r\n    dispatch(setDrawerVisible(false));\r\n  };\r\n\r\n  /**\r\n   * 當 Drawer 關閉時，必需將 Result 設為 false, 才會結束 Promise\r\n   */\r\n  useEffect(() => {\r\n    if (showDrawer === false && setResult) setResult(false); // 傳回視窗結束狀態。\r\n  }, [showDrawer]);\r\n\r\n  /**\r\n   * 下方彈出抽屜 UI。\r\n   */\r\n  const Drawer = () => (\r\n    <BottomDrawer\r\n      title={drawerData.title}\r\n      isOpen={showDrawer}\r\n      onBack={drawerData.goBack ? onDrawerGoBack : null}\r\n      onClose={onDrawerClose}\r\n      content={drawerData.content}\r\n      noScrollable={drawerData.noScrollable}\r\n      shouldAutoClose={drawerData.shouldAutoClose} // TODO 確認必要性。\r\n    />\r\n  );\r\n\r\n  /**\r\n   * 成功失敗動畫彈窗\r\n   */\r\n  const AnimationModal = () => (\r\n    <Dialog\r\n      isOpen={showAnimationModal}\r\n      onClose={onAnimationModalClose}\r\n      title=\" \"\r\n      content={(\r\n        <div className=\"dialogResultContent\">\r\n          <SuccessFailureAnimations\r\n            isSuccess={animationModalData.isSuccess}\r\n            successTitle={animationModalData.successTitle}\r\n            successDesc={animationModalData.successDesc}\r\n            errorTitle={animationModalData.errorTitle}\r\n            errorCode={animationModalData.errorCode}\r\n            errorDesc={animationModalData.errorDesc}\r\n          />\r\n        </div>\r\n      )}\r\n    />\r\n  );\r\n\r\n  //\r\n  // 檢查是否可以開啟這個頁面。\r\n  //\r\n  const [isPassed, setPassed] = useState();\r\n  useEffect(async () => {\r\n    let pass = true; // 若未設 inspector，則預設為檢查通過。\r\n    if (inspector) {\r\n      const errMesg = await inspector();\r\n      // console.log(errMesg);\r\n      pass = (errMesg === null);\r\n      if (errMesg) {\r\n        setPassed(errMesg); // 顯示等待中\r\n        await showError(errMesg, (goBackFunc ?? closeFunc)); // 檢查不通過，立即關閉。\r\n        return;\r\n      }\r\n    }\r\n    setPassed(pass === true); // 必須是 true/false, 否則會一直顯示等待中的畫面。\r\n  }, []);\r\n\r\n  //\r\n  // 頁面外框\r\n  //\r\n  if (!waitting && isPassed === true) { // 在 isPassed 還沒有值之前，永遠顯不等待中的畫面。\r\n    return (\r\n      <div>\r\n        <HeaderWrapper $isTransparent={hasClearHeader}>\r\n          <FEIBIconButton className=\"goBack\" $fontSize={2.4} $iconColor={theme.colors.text.dark} onClick={goBackFunc ?? closeFunc} $hide={!goBack}>\r\n            <ArrowBackIcon />\r\n          </FEIBIconButton>\r\n          <h2>{title}</h2>\r\n          <FEIBIconButton className=\"goHome\" $fontSize={2.4} $iconColor={theme.colors.text.dark} onClick={goHomeFunc} $hide={!goHome}>\r\n            <HomeIcon />\r\n          </FEIBIconButton>\r\n        </HeaderWrapper>\r\n\r\n        <div>\r\n            {waitting ? null : children}\r\n            <Drawer />\r\n            <MessageModal />\r\n            <AnimationModal />\r\n            {overPanel}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n  <div>\r\n    {isPassed === null ? (\r\n      <Loading isFullscreen />\r\n    ) : (\r\n      <MessageModal />\r\n    )}\r\n  </div>\r\n  );\r\n}\r\n\r\nLayout.propTypes = {\r\n  title: PropTypes.string,\r\n  children: PropTypes.element,\r\n  goHome: PropTypes.bool,\r\n  goBack: PropTypes.bool,\r\n  goBackFunc: PropTypes.func,\r\n  inspector: PropTypes.func,\r\n};\r\n\r\nLayout.defaultProps = {\r\n  title: 'Bankee APP 2.0',\r\n  children: <div />,\r\n  goHome: true,\r\n  goBack: true,\r\n  goBackFunc: null,\r\n  inspector: null,\r\n};\r\n\r\nexport default Layout;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}