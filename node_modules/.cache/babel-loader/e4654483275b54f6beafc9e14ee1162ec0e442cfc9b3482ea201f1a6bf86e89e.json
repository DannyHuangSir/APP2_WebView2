{"ast":null,"code":"var findNextDayOffset=function findNextDayOffset(from,cycleTiming){var offset=1;var day=new Date(from);while(offset<=7&&day.getDay()===cycleTiming){offset+=1;day.setDate(day.getDate()+offset);}return offset;};// 計算存錢計畫的 開始、下次扣款、和結束日期。\nexport var getDurationTuple=function getDurationTuple(today,cycleDuration,cycleMode,cycleTiming){var day=today.getDate();var month=today.getMonth();var begin=new Date(today);if(cycleMode===1){// 每週\nvar weekday=today.getDay();var offset=weekday!==cycleTiming?findNextDayOffset(new Date(today),cycleTiming):0;if(offset)begin.setDate(begin.getDate()+offset);}else if(cycleTiming<day){// 每月 下個月\nif(cycleTiming<28){begin.setDate(cycleTiming);begin.setMonth(month+1);}}else{// 每月 當月\nbegin.setDate(cycleTiming);}var next=new Date(begin);if(cycleMode===1){// 每週\nnext.setDate(next.getDate()+7);}else{// 每月\nif(next.getDate()>28)next.setDate(28);next.setMonth(next.getMonth()+1);}var end=new Date(begin);if(cycleMode===1){// 每週\nend.setDate(end.getDate()+(parseInt(cycleDuration,10)*4-1)*7);}else{// 每月\nif(end.getDate()>28)end.setDate(28);end.setMonth(end.getMonth()+parseInt(cycleDuration,10));}return{begin:begin,end:end,next:next};};","map":{"version":3,"names":["findNextDayOffset","from","cycleTiming","offset","day","Date","getDay","setDate","getDate","getDurationTuple","today","cycleDuration","cycleMode","month","getMonth","begin","weekday","setMonth","next","end","parseInt"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00600_DepositPlan/utils/common.js"],"sourcesContent":["const findNextDayOffset = (from, cycleTiming) => {\r\n  let offset = 1;\r\n  const day = new Date(from);\r\n  while (offset <= 7 && day.getDay() === cycleTiming) {\r\n    offset += 1;\r\n    day.setDate(day.getDate() + offset);\r\n  }\r\n  return offset;\r\n};\r\n\r\n// 計算存錢計畫的 開始、下次扣款、和結束日期。\r\nexport const getDurationTuple = (today, cycleDuration, cycleMode, cycleTiming) => {\r\n  const day = today.getDate();\r\n  const month = today.getMonth();\r\n\r\n  const begin = new Date(today);\r\n  if (cycleMode === 1) { // 每週\r\n    const weekday = today.getDay();\r\n    const offset = (weekday !== cycleTiming) ? findNextDayOffset(new Date(today), cycleTiming) : 0;\r\n    if (offset) begin.setDate(begin.getDate() + offset);\r\n  } else if (cycleTiming < day) {\r\n    // 每月 下個月\r\n    if (cycleTiming < 28) {\r\n      begin.setDate(cycleTiming);\r\n      begin.setMonth(month + 1);\r\n    }\r\n  } else {\r\n    // 每月 當月\r\n    begin.setDate(cycleTiming);\r\n  }\r\n\r\n  const next = new Date(begin);\r\n  if (cycleMode === 1) {\r\n    // 每週\r\n    next.setDate(next.getDate() + 7);\r\n  } else {\r\n    // 每月\r\n    if (next.getDate() > 28) next.setDate(28);\r\n    next.setMonth(next.getMonth() + 1);\r\n  }\r\n\r\n  const end = new Date(begin);\r\n  if (cycleMode === 1) {\r\n    // 每週\r\n    end.setDate(end.getDate() + (((parseInt(cycleDuration, 10) * 4) - 1) * 7));\r\n  } else {\r\n    // 每月\r\n    if (end.getDate() > 28) end.setDate(28);\r\n    end.setMonth(end.getMonth() + parseInt(cycleDuration, 10));\r\n  }\r\n\r\n  return { begin, end, next };\r\n};\r\n"],"mappings":"AAAA,GAAMA,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,IAAI,CAAEC,WAAW,CAAK,CAC/C,GAAIC,OAAM,CAAG,CAAC,CACd,GAAMC,IAAG,CAAG,GAAIC,KAAI,CAACJ,IAAI,CAAC,CAC1B,MAAOE,MAAM,EAAI,CAAC,EAAIC,GAAG,CAACE,MAAM,EAAE,GAAKJ,WAAW,CAAE,CAClDC,MAAM,EAAI,CAAC,CACXC,GAAG,CAACG,OAAO,CAACH,GAAG,CAACI,OAAO,EAAE,CAAGL,MAAM,CAAC,CACrC,CACA,MAAOA,OAAM,CACf,CAAC,CAED;AACA,MAAO,IAAMM,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIC,KAAK,CAAEC,aAAa,CAAEC,SAAS,CAAEV,WAAW,CAAK,CAChF,GAAME,IAAG,CAAGM,KAAK,CAACF,OAAO,EAAE,CAC3B,GAAMK,MAAK,CAAGH,KAAK,CAACI,QAAQ,EAAE,CAE9B,GAAMC,MAAK,CAAG,GAAIV,KAAI,CAACK,KAAK,CAAC,CAC7B,GAAIE,SAAS,GAAK,CAAC,CAAE,CAAE;AACrB,GAAMI,QAAO,CAAGN,KAAK,CAACJ,MAAM,EAAE,CAC9B,GAAMH,OAAM,CAAIa,OAAO,GAAKd,WAAW,CAAIF,iBAAiB,CAAC,GAAIK,KAAI,CAACK,KAAK,CAAC,CAAER,WAAW,CAAC,CAAG,CAAC,CAC9F,GAAIC,MAAM,CAAEY,KAAK,CAACR,OAAO,CAACQ,KAAK,CAACP,OAAO,EAAE,CAAGL,MAAM,CAAC,CACrD,CAAC,IAAM,IAAID,WAAW,CAAGE,GAAG,CAAE,CAC5B;AACA,GAAIF,WAAW,CAAG,EAAE,CAAE,CACpBa,KAAK,CAACR,OAAO,CAACL,WAAW,CAAC,CAC1Ba,KAAK,CAACE,QAAQ,CAACJ,KAAK,CAAG,CAAC,CAAC,CAC3B,CACF,CAAC,IAAM,CACL;AACAE,KAAK,CAACR,OAAO,CAACL,WAAW,CAAC,CAC5B,CAEA,GAAMgB,KAAI,CAAG,GAAIb,KAAI,CAACU,KAAK,CAAC,CAC5B,GAAIH,SAAS,GAAK,CAAC,CAAE,CACnB;AACAM,IAAI,CAACX,OAAO,CAACW,IAAI,CAACV,OAAO,EAAE,CAAG,CAAC,CAAC,CAClC,CAAC,IAAM,CACL;AACA,GAAIU,IAAI,CAACV,OAAO,EAAE,CAAG,EAAE,CAAEU,IAAI,CAACX,OAAO,CAAC,EAAE,CAAC,CACzCW,IAAI,CAACD,QAAQ,CAACC,IAAI,CAACJ,QAAQ,EAAE,CAAG,CAAC,CAAC,CACpC,CAEA,GAAMK,IAAG,CAAG,GAAId,KAAI,CAACU,KAAK,CAAC,CAC3B,GAAIH,SAAS,GAAK,CAAC,CAAE,CACnB;AACAO,GAAG,CAACZ,OAAO,CAACY,GAAG,CAACX,OAAO,EAAE,CAAI,CAAEY,QAAQ,CAACT,aAAa,CAAE,EAAE,CAAC,CAAG,CAAC,CAAI,CAAC,EAAI,CAAE,CAAC,CAC5E,CAAC,IAAM,CACL;AACA,GAAIQ,GAAG,CAACX,OAAO,EAAE,CAAG,EAAE,CAAEW,GAAG,CAACZ,OAAO,CAAC,EAAE,CAAC,CACvCY,GAAG,CAACF,QAAQ,CAACE,GAAG,CAACL,QAAQ,EAAE,CAAGM,QAAQ,CAACT,aAAa,CAAE,EAAE,CAAC,CAAC,CAC5D,CAEA,MAAO,CAAEI,KAAK,CAALA,KAAK,CAAEI,GAAG,CAAHA,GAAG,CAAED,IAAI,CAAJA,IAAK,CAAC,CAC7B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}