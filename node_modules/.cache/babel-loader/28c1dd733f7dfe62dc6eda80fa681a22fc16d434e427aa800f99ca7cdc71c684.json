{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useMemo}from'react';import{getCountyList}from'pages/T00700_BasicInformation/api';export var useLocationOptions=function useLocationOptions(watchedCountyName){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),locationLists=_useState2[0],setLocationLists=_useState2[1];// 縣市選單\nvar countyOptions=useMemo(function(){if(locationLists.length){return locationLists.map(function(_ref){var countyName=_ref.countyName;return{label:countyName,value:countyName};});}return[];},[locationLists]);// 建立鄉鎮市區選單\nvar districtOptions=useMemo(function(){var foundDistrictOption=locationLists.find(function(_ref2){var countyName=_ref2.countyName;return countyName===watchedCountyName;});if(foundDistrictOption){return foundDistrictOption.cities.map(function(_ref3){var cityName=_ref3.cityName;return{label:cityName,value:cityName};});}return[];},[watchedCountyName,locationLists]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$getCountyList,code,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCountyList({});case 2:_yield$getCountyList=_context.sent;code=_yield$getCountyList.code;data=_yield$getCountyList.data;if(code==='0000'){setLocationLists(data);}case 6:case\"end\":return _context.stop();}}},_callee);})),[]);return{countyOptions:countyOptions,districtOptions:districtOptions};};","map":{"version":3,"names":["useEffect","useState","useMemo","getCountyList","useLocationOptions","watchedCountyName","locationLists","setLocationLists","countyOptions","length","map","countyName","label","value","districtOptions","foundDistrictOption","find","cities","cityName","code","data"],"sources":["C:/Users/allen/git/app2-webview/src/hooks/useLocationOptions.js"],"sourcesContent":["import { useEffect, useState, useMemo } from 'react';\r\nimport { getCountyList } from 'pages/T00700_BasicInformation/api';\r\n\r\nexport const useLocationOptions = (watchedCountyName) => {\r\n  const [locationLists, setLocationLists] = useState([]);\r\n\r\n  // 縣市選單\r\n  const countyOptions = useMemo(() => {\r\n    if (locationLists.length) {\r\n      return locationLists.map(({ countyName }) => ({\r\n        label: countyName,\r\n        value: countyName,\r\n      }));\r\n    }\r\n    return [];\r\n  }, [locationLists]);\r\n\r\n  // 建立鄉鎮市區選單\r\n  const districtOptions = useMemo(() => {\r\n    const foundDistrictOption = locationLists.find(\r\n      ({ countyName }) => countyName === watchedCountyName,\r\n    );\r\n    if (foundDistrictOption) {\r\n      return foundDistrictOption.cities.map(({ cityName }) => ({\r\n        label: cityName,\r\n        value: cityName,\r\n      }));\r\n    }\r\n    return [];\r\n  }, [watchedCountyName, locationLists]);\r\n\r\n  useEffect(async () => {\r\n    // TODO 可能需要加入 dispatch(setWaittingVisible(true/false))\r\n\r\n    const { code, data } = await getCountyList({});\r\n    if (code === '0000') {\r\n      setLocationLists(data);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    countyOptions,\r\n    districtOptions,\r\n  };\r\n};\r\n"],"mappings":"+WAAA,OAASA,SAAS,CAAEC,QAAQ,CAAEC,OAAO,KAAQ,OAAO,CACpD,OAASC,aAAa,KAAQ,mCAAmC,CAEjE,MAAO,IAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,CAAIC,iBAAiB,CAAK,CACvD,cAA0CJ,QAAQ,CAAC,EAAE,CAAC,wCAA/CK,aAAa,eAAEC,gBAAgB,eAEtC;AACA,GAAMC,cAAa,CAAGN,OAAO,CAAC,UAAM,CAClC,GAAII,aAAa,CAACG,MAAM,CAAE,CACxB,MAAOH,cAAa,CAACI,GAAG,CAAC,kBAAGC,WAAU,MAAVA,UAAU,OAAQ,CAC5CC,KAAK,CAAED,UAAU,CACjBE,KAAK,CAAEF,UACT,CAAC,EAAC,CAAC,CACL,CACA,MAAO,EAAE,CACX,CAAC,CAAE,CAACL,aAAa,CAAC,CAAC,CAEnB;AACA,GAAMQ,gBAAe,CAAGZ,OAAO,CAAC,UAAM,CACpC,GAAMa,oBAAmB,CAAGT,aAAa,CAACU,IAAI,CAC5C,mBAAGL,WAAU,OAAVA,UAAU,OAAOA,WAAU,GAAKN,iBAAiB,GACrD,CACD,GAAIU,mBAAmB,CAAE,CACvB,MAAOA,oBAAmB,CAACE,MAAM,CAACP,GAAG,CAAC,mBAAGQ,SAAQ,OAARA,QAAQ,OAAQ,CACvDN,KAAK,CAAEM,QAAQ,CACfL,KAAK,CAAEK,QACT,CAAC,EAAC,CAAC,CACL,CACA,MAAO,EAAE,CACX,CAAC,CAAE,CAACb,iBAAiB,CAAEC,aAAa,CAAC,CAAC,CAEtCN,SAAS,wEAAC,8LAGqBG,cAAa,CAAC,CAAC,CAAC,CAAC,2CAAtCgB,IAAI,sBAAJA,IAAI,CAAEC,IAAI,sBAAJA,IAAI,CAClB,GAAID,IAAI,GAAK,MAAM,CAAE,CACnBZ,gBAAgB,CAACa,IAAI,CAAC,CACxB,CAAC,sDACF,GAAE,EAAE,CAAC,CAEN,MAAO,CACLZ,aAAa,CAAbA,aAAa,CACbM,eAAe,CAAfA,eACF,CAAC,CACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}