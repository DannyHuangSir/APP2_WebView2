{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{dateToString,toCurrency}from'utilities/Generator';import{closeFunc,loadFuncParams}from'utilities/AppScriptProxy';/* Elements */import Layout from'components/Layout/Layout';import{showPrompt}from'utilities/MessageModal';import{getSubSummary,getSubPayment}from'./api';/* Styles */import PrincipalWrapper from'./principal.style';/**\r\n * L00200 貸款 應繳查詢\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var L00200=function L00200(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),detaillist=_useState2[0],setDetailList=_useState2[1];// 查詢應繳本息資訊\nvar getPrincipalData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(subNoData){var param,principalResponse,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:param={account:subNoData.account,subNo:subNoData.subNo};_context.next=3;return getSubPayment(param);case 3:principalResponse=_context.sent;if((principalResponse===null||principalResponse===void 0?void 0:principalResponse.length)>0){result=_objectSpread(_objectSpread({},param),principalResponse[0]);setDetailList([].concat(_toConsumableArray(detaillist),[result]));}case 5:case\"end\":return _context.stop();}}},_callee);}));return function getPrincipalData(_x){return _ref.apply(this,arguments);};}();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var startParams,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return loadFuncParams();case 2:startParams=_context2.sent;if(!startParams){_context2.next=7;break;}getPrincipalData(startParams);_context2.next=16;break;case 7:_context2.next=9;return getSubSummary();case 9:response=_context2.sent;if(response){_context2.next=15;break;}_context2.next=13;return showPrompt('您尚未擁有貸款，請在系統關閉此功能後，立即申請。',function(){return closeFunc();});case 13:_context2.next=16;break;case 15:getPrincipalData({account:response[0].account,subNo:response[0].subNo});case 16:case\"end\":return _context2.stop();}}},_callee2);})),[]);return/*#__PURE__*/_jsx(Layout,{title:\"\\u61C9\\u7E73\\u672C\\u606F\\u67E5\\u8A62\",children:/*#__PURE__*/_jsxs(PrincipalWrapper,{children:[detaillist.map(function(item){return/*#__PURE__*/_jsx(\"section\",{className:\"sectionTop\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"detailUl\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u672C\\u671F\\u61C9\\u7E73\\u91D1\\u984D\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",toCurrency(item.amount)]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u8CA8\\u6B3E\\u5206\\u865F\"}),/*#__PURE__*/_jsx(\"span\",{children:item.subNo})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u8A08\\u606F\\u671F\\u9593\"}),/*#__PURE__*/_jsxs(\"span\",{children:[dateToString(item.startDate),\"~\",dateToString(item.endDate)]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u5229\\u7387%\"}),/*#__PURE__*/_jsxs(\"span\",{children:[item.rate,\"%\"]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u8A08\\u606F\\u672C\\u91D1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",toCurrency(item.principal)]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u6524\\u9084\\u672C\\u91D1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",toCurrency(item.splitPrincipal)]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u5229\\u606F\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",toCurrency(item.interest)]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u903E\\u671F\\u606F\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",toCurrency(item.overInterest)]})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u9055\\u7D04\\u91D1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",toCurrency(item.defaultAmount)]})]})]})},item);}),/*#__PURE__*/_jsx(\"div\",{className:\"noticeTip\",children:\"\\u6CE8\\u610F\\u4E8B\\u9805\\uFF1A\\u67E5\\u8A62\\u65E5\\u671F\\u82E5\\u5DF2\\u903E\\u7E73\\u6B3E\\u65E5\\uFF0C\\u3010\\u9055\\u7D04\\u91D1+\\u903E\\u671F\\u606F\\u3011\\u6B04\\u4F4D\\u70BA\\u4F30\\u7B97\\u903E\\u671F\\u4E00\\u500B\\u6708\\u4E4B\\u91D1\\u984D\\u4F9B\\u53C3\\u8003\\uFF0C\\u5BE6\\u969B\\u6263\\u6B3E\\u91D1\\u984D\\u4ECD\\u4F9D\\u672C\\u884C\\u96FB\\u8166\\u7CFB\\u7D71\\u70BA\\u6E96\\u3002\\u5982\\u6B32\\u67E5\\u8A62\\u5DF2\\u903E\\u671F\\u6236\\u4E4B\\u8CB8\\u6B3E\\u8CC7\\u6599\\uFF0C\\u8ACB\\u8207\\u672C\\u884C\\u5BA2\\u6236\\u670D\\u52D9\\u4E2D\\u5FC3\\u806F\\u7E6B(02-80731166)\\u3002\"})]})});};export default L00200;","map":{"version":3,"names":["useState","useEffect","dateToString","toCurrency","closeFunc","loadFuncParams","Layout","showPrompt","getSubSummary","getSubPayment","PrincipalWrapper","L00200","detaillist","setDetailList","getPrincipalData","subNoData","param","account","subNo","principalResponse","length","result","startParams","response","map","item","amount","startDate","endDate","rate","principal","splitPrincipal","interest","overInterest","defaultAmount"],"sources":["C:/Users/allen/git/app2-webview/src/pages/L00200_Principal/L00200.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { dateToString, toCurrency } from 'utilities/Generator';\r\nimport { closeFunc, loadFuncParams } from 'utilities/AppScriptProxy';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport { showPrompt } from 'utilities/MessageModal';\r\n\r\nimport { getSubSummary, getSubPayment } from './api';\r\n\r\n/* Styles */\r\nimport PrincipalWrapper from './principal.style';\r\n\r\n/**\r\n * L00200 貸款 應繳查詢\r\n */\r\nconst L00200 = () => {\r\n  const [detaillist, setDetailList] = useState([]);\r\n\r\n  // 查詢應繳本息資訊\r\n  const getPrincipalData = async (subNoData) => {\r\n    const param = {\r\n      account: subNoData.account,\r\n      subNo: subNoData.subNo,\r\n    };\r\n    const principalResponse = await getSubPayment(param);\r\n    if (principalResponse?.length > 0) {\r\n      const result = {\r\n        ...param,\r\n        ...principalResponse[0],\r\n      };\r\n      setDetailList([...detaillist, result]);\r\n    }\r\n  };\r\n\r\n  useEffect(async () => {\r\n    const startParams = await loadFuncParams();\r\n    if (startParams) {\r\n      getPrincipalData(startParams);\r\n    } else {\r\n      const response = await getSubSummary();\r\n      if (!response) {\r\n        await showPrompt('您尚未擁有貸款，請在系統關閉此功能後，立即申請。', () => closeFunc());\r\n      } else {\r\n        getPrincipalData({ account: response[0].account, subNo: response[0].subNo });\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Layout title=\"應繳本息查詢\">\r\n      <PrincipalWrapper>\r\n        {\r\n          detaillist.map((item) => (\r\n            <section className=\"sectionTop\" key={item}>\r\n              <ul className=\"detailUl\">\r\n                <li>\r\n                  <span>本期應繳金額</span>\r\n                  <span>\r\n                    $\r\n                    { toCurrency(item.amount) }\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>貨款分號</span>\r\n                  <span>{ item.subNo }</span>\r\n                </li>\r\n                <li>\r\n                  <span>計息期間</span>\r\n                  <span>\r\n                    { dateToString(item.startDate) }\r\n                    ~\r\n                    { dateToString(item.endDate) }\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>利率%</span>\r\n                  <span>\r\n                    { item.rate }\r\n                    %\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>計息本金</span>\r\n                  <span>\r\n                    $\r\n                    { toCurrency(item.principal) }\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>攤還本金</span>\r\n                  <span>\r\n                    $\r\n                    { toCurrency(item.splitPrincipal) }\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>利息</span>\r\n                  <span>\r\n                    $\r\n                    { toCurrency(item.interest) }\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>逾期息</span>\r\n                  <span>\r\n                    $\r\n                    { toCurrency(item.overInterest) }\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>違約金</span>\r\n                  <span>\r\n                    $\r\n                    { toCurrency(item.defaultAmount) }\r\n                  </span>\r\n                </li>\r\n              </ul>\r\n            </section>\r\n          ))\r\n        }\r\n        <div className=\"noticeTip\">\r\n          注意事項：查詢日期若已逾繳款日，【違約金+逾期息】欄位為估算逾期一個月之金額供參考，實際扣款金額仍依本行電腦系統為準。如欲查詢已逾期戶之貸款資料，請與本行客戶服務中心聯繫(02-80731166)。\r\n        </div>\r\n      </PrincipalWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default L00200;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}