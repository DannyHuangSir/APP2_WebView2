{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint react/no-array-index-key: 0 */import{useState}from'react';import{useHistory}from'react-router';import{useDispatch}from'react-redux';import uuid from'react-uuid';import{setDrawer,setDrawerVisible,setWaittingVisible}from'stores/reducers/ModalReducer';import{CircleIcon,MoreIcon,ArrowNextIcon}from'assets/images/icons';import{MainScrollWrapper}from'components/Layout';import Layout from'components/Layout/Layout';import SwiperLayout from'components/SwiperLayout';import AccountCard from'components/AccountCard';import FEIBIconButton from'components/elements/FEIBIconButton';import ThreeColumnInfoPanel from'components/ThreeColumnInfoPanel';import InformationTape from'components/InformationTape';import EmptyData from'components/EmptyData';import{accountFormatter,dateToString,currencySymbolGenerator,dateToYMD,handleLoanTypeToTitle}from'utilities/Generator';import{startFunc}from'utilities/AppScriptProxy';import{FuncID}from'utilities/FuncID';import{getSubSummary,getContract,getSubPaymentHistory}from'./api';import{getLoanSummary}from'./utils';import PageWrapper,{ContentWrapper}from'./L00100.style';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var uid=uuid();/**\r\n * L00100 貸款 首頁\r\n * TODO: 調整架構，下方卡片應lazy loading\r\n */var Page=function Page(){var history=useHistory();var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),loans=_useState2[0],setLoans=_useState2[1];/**\r\n   * 產生上方卡片會用到的\r\n   */var handleMoreClick=function handleMoreClick(accountNo,loanNo){var list=[{icon:/*#__PURE__*/_jsx(CircleIcon,{}),title:'貸款資訊',onClick:function onClick(){history.push('/L001002',{account:accountNo,subNo:loanNo});}},/*\r\n      { icon: <CircleIcon />, title: '部分貸款', onClick: () => {} },\r\n      { icon: <CircleIcon />, title: '全部貸款', onClick: () => {} },\r\n      */{icon:/*#__PURE__*/_jsx(CircleIcon,{}),title:'合約下載',onClick:function onClick(){getContract({accountNo:accountNo,format:1});}}/*\r\n      { icon: <CircleIcon />, title: '清償證明下載', onClick: () => { getStatment({ accountNo, format: 1 }); } },\r\n      */];dispatch(setDrawer({title:'',content:/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(func){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:func.onClick,children:[func.icon,func.title]})},func.title);})}),shouldAutoClose:true}));dispatch(setDrawerVisible(true));};var handleSearchClick=function handleSearchClick(account,subNo){// 查詢應繳本息\nstartFunc(FuncID.L00200,{account:account,subNo:subNo});};/**\r\n   * 產生上方卡片的 slides\r\n   */var renderSlides=function renderSlides(cards){if(!cards||(cards===null||cards===void 0?void 0:cards.length)===0)return[];return cards.map(function(card,i){var _card$currency;return/*#__PURE__*/_jsxs(AccountCard,{type:\"L\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:card.loanType}),/*#__PURE__*/_jsx(\"div\",{children:\"\".concat(accountFormatter(card.accountNo),\" (\").concat(card.loanNo,\")\")})]}),/*#__PURE__*/_jsx(FEIBIconButton,{className:\"-mt-5 -mr-5\",\"aria-label\":\"\\u5C55\\u958B\\u4E0B\\u62C9\\u5F0F\\u9078\\u55AE\",onClick:function onClick(){return handleMoreClick(card.accountNo,card.loanNo);},children:/*#__PURE__*/_jsx(MoreIcon,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"justify-end items-baseline gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u8CB8\\u6B3E\\u9918\\u984D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"balance\",children:currencySymbolGenerator((_card$currency=card.currency)!==null&&_card$currency!==void 0?_card$currency:'NTD',card.balance)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"justify-end gap-6 mt-4 divider\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-16\",onClick:function onClick(){return handleSearchClick(card.accountNo,card.loanNo);},children:\"\\u672C\\u671F\\u61C9\\u7E73\\u67E5\\u8A62\"})})]},\"\".concat(uid,\"-c\").concat(i));});};/**\r\n   * 產生下方資訊會用到的\r\n   */var renderBonusContents=function renderBonusContents(info,accountNo,subNo){var _info$currency;return[{label:'應繳款日',value:\"\\u6BCF\\u6708\".concat(info.cycleTiming,\"\\u65E5\"),onClick:function onClick(){return handleSearchClick(accountNo,subNo);}},{label:'應繳本息',value:currencySymbolGenerator((_info$currency=info.currency)!==null&&_info$currency!==void 0?_info$currency:'NTD',info.interest),onClick:function onClick(){return handleSearchClick(accountNo,subNo);}},{label:'可能回饋',value:'-'}/*\r\n    {\r\n      label: '可能回饋',\r\n      value: info.isJoinedRewardProgram ? currencySymbolGenerator(info.currency ?? 'NTD', info.rewards) : '-',\r\n      onClick: () => history.push('/L001001', { accountNo }),\r\n    },\r\n    */];};var handleSingleTransaction=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(i,cardData){var param,historyResponse,singleHistoryData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setWaittingVisible(true));param={account:cardData.accountNo,subNo:cardData.loanNo,startDate:dateToYMD(new Date(new Date().setDate(new Date().getDate()-30))),endDate:dateToYMD()};_context.next=4;return getSubPaymentHistory(param);case 4:historyResponse=_context.sent;dispatch(setWaittingVisible(false));if(historyResponse){singleHistoryData=historyResponse.data[i];startFunc(\"\".concat(FuncID.L00300,\"1\"),{singleHistoryData:singleHistoryData,cardData:cardData});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSingleTransaction(_x,_x2){return _ref.apply(this,arguments);};}();var renderTransactions=function renderTransactions(card){var _card$transactions;if((card===null||card===void 0?void 0:(_card$transactions=card.transactions)===null||_card$transactions===void 0?void 0:_card$transactions.length)<=0){return/*#__PURE__*/_jsx(\"div\",{style:{height:'20rem',marginTop:'6rem'},children:/*#__PURE__*/_jsx(EmptyData,{})});}// transactions 依照日期排序（大 -> 小）\nvar sortedTransactions=card.transactions.sort(function(a,b){return parseInt(b.txnDate,10)-parseInt(a.txnDate,10);});return sortedTransactions.slice(0,3).map(function(t,i){var _t$currency,_t$currency2,_t$currency3;return/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"aria-label\":\"\\u9EDE\\u64CA\\u67E5\\u8A62\\u6B64\\u7B46\\u7D00\\u9304\\uFF0C\\u9084\\u6B3E\\u65E5:\".concat(dateToString(t.txnDate),\"\\uFF0C\\u91D1\\u984D\\uFF1A\").concat(currencySymbolGenerator((_t$currency=t.currency)!==null&&_t$currency!==void 0?_t$currency:'NTD',t.amount)),onClick:function onClick(){return handleSingleTransaction(i,card);},style:{width:'100%'},children:/*#__PURE__*/_jsx(InformationTape,{topLeft:handleLoanTypeToTitle(t.type),bottomLeft:dateToString(t.txnDate),topRight:currencySymbolGenerator((_t$currency2=t.currency)!==null&&_t$currency2!==void 0?_t$currency2:'NTD',t.amount),bottomRight:\"\\u8CB8\\u6B3E\\u9918\\u984D \".concat(currencySymbolGenerator((_t$currency3=t.currency)!==null&&_t$currency3!==void 0?_t$currency3:'NTD',t.balance))})},\"\".concat(uid,\"-t\").concat(i));});};var handleMoreTransactionsClick=function handleMoreTransactionsClick(card){startFunc(FuncID.L00300,{card:card});// TODO 需明確定義 card 的內容！\n};/**\r\n   * 產生下方交易資訊的 slides\r\n   */var renderContents=function renderContents(cards){if(!cards||(cards===null||cards===void 0?void 0:cards.length)===0)return[];return cards.map(function(card,i){return/*#__PURE__*/_jsxs(ContentWrapper,{children:[/*#__PURE__*/_jsx(ThreeColumnInfoPanel,{content:renderBonusContents(card.bonusInfo,card.accountNo,card.loanNo)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:renderTransactions(card)}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn-icon\",type:\"button\",onClick:function onClick(){return handleMoreTransactionsClick(card);},children:[\"\\u66F4\\u591A\\u660E\\u7D30\",/*#__PURE__*/_jsx(ArrowNextIcon,{})]})})]})]},\"\".concat(uid,\"-a\").concat(i));});};/**\r\n   * 檢查是否可以開啟這個頁面。\r\n   * @returns {Promise<String>} 傳回驗證結果的錯誤訊息；若是正確無誤時，需傳回 null\r\n   */var inspector=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var error,subSummaryRes;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(setWaittingVisible(true));_context2.next=3;return getSubSummary();case 3:subSummaryRes=_context2.sent;if(!(subSummaryRes.length!==0)){_context2.next=13;break;}error=null;_context2.t0=setLoans;_context2.next=9;return getLoanSummary();case 9:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);_context2.next=14;break;case 13:error='您尚未擁有貸款，請在系統關閉此功能後，立即申請。';case 14:dispatch(setWaittingVisible(false));return _context2.abrupt(\"return\",error);case 16:case\"end\":return _context2.stop();}}},_callee2);}));return function inspector(){return _ref2.apply(this,arguments);};}();/**\r\n   * 產生頁面\r\n   * 只要提供相同數量的 slides 和 content，SwiperLayout會自動切換對應的內容。\r\n   */return/*#__PURE__*/_jsx(Layout,{title:\"\\u8CB8\\u6B3E\",inspector:inspector,children:/*#__PURE__*/_jsx(MainScrollWrapper,{children:/*#__PURE__*/_jsx(PageWrapper,{children:/*#__PURE__*/_jsx(SwiperLayout,{slides:renderSlides(loans),hasDivider:false,slidesPerView:1.1,spaceBetween:8,centeredSlides:true,children:renderContents(loans)})})})});};export default Page;","map":{"version":3,"names":["useState","useHistory","useDispatch","uuid","setDrawer","setDrawerVisible","setWaittingVisible","CircleIcon","MoreIcon","ArrowNextIcon","MainScrollWrapper","Layout","SwiperLayout","AccountCard","FEIBIconButton","ThreeColumnInfoPanel","InformationTape","EmptyData","accountFormatter","dateToString","currencySymbolGenerator","dateToYMD","handleLoanTypeToTitle","startFunc","FuncID","getSubSummary","getContract","getSubPaymentHistory","getLoanSummary","PageWrapper","ContentWrapper","uid","Page","history","dispatch","loans","setLoans","handleMoreClick","accountNo","loanNo","list","icon","title","onClick","push","account","subNo","format","content","map","func","shouldAutoClose","handleSearchClick","L00200","renderSlides","cards","length","card","i","loanType","currency","balance","renderBonusContents","info","label","value","cycleTiming","interest","handleSingleTransaction","cardData","param","startDate","Date","setDate","getDate","endDate","historyResponse","singleHistoryData","data","L00300","renderTransactions","transactions","height","marginTop","sortedTransactions","sort","a","b","parseInt","txnDate","slice","t","amount","width","type","handleMoreTransactionsClick","renderContents","bonusInfo","inspector","subSummaryRes","error"],"sources":["C:/Users/allen/git/app2-webview/src/pages/L00100_Loan/L00100.jsx"],"sourcesContent":["/* eslint react/no-array-index-key: 0 */\r\n\r\nimport { useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\nimport uuid from 'react-uuid';\r\n\r\nimport { setDrawer, setDrawerVisible, setWaittingVisible } from 'stores/reducers/ModalReducer';\r\n\r\nimport { CircleIcon, MoreIcon, ArrowNextIcon } from 'assets/images/icons';\r\nimport { MainScrollWrapper } from 'components/Layout';\r\nimport Layout from 'components/Layout/Layout';\r\nimport SwiperLayout from 'components/SwiperLayout';\r\nimport AccountCard from 'components/AccountCard';\r\nimport FEIBIconButton from 'components/elements/FEIBIconButton';\r\nimport ThreeColumnInfoPanel from 'components/ThreeColumnInfoPanel';\r\nimport InformationTape from 'components/InformationTape';\r\nimport EmptyData from 'components/EmptyData';\r\nimport {\r\n  accountFormatter, dateToString, currencySymbolGenerator, dateToYMD, handleLoanTypeToTitle,\r\n} from 'utilities/Generator';\r\n\r\nimport { startFunc } from 'utilities/AppScriptProxy';\r\nimport { FuncID } from 'utilities/FuncID';\r\nimport { getSubSummary, getContract, getSubPaymentHistory } from './api';\r\nimport { getLoanSummary } from './utils';\r\nimport PageWrapper, { ContentWrapper } from './L00100.style';\r\n\r\nconst uid = uuid();\r\n\r\n/**\r\n * L00100 貸款 首頁\r\n * TODO: 調整架構，下方卡片應lazy loading\r\n */\r\nconst Page = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [loans, setLoans] = useState();\r\n\r\n  /**\r\n   * 產生上方卡片會用到的\r\n   */\r\n  const handleMoreClick = (accountNo, loanNo) => {\r\n    const list = [\r\n      { icon: <CircleIcon />, title: '貸款資訊', onClick: () => { history.push('/L001002', { account: accountNo, subNo: loanNo }); } },\r\n      /*\r\n      { icon: <CircleIcon />, title: '部分貸款', onClick: () => {} },\r\n      { icon: <CircleIcon />, title: '全部貸款', onClick: () => {} },\r\n      */\r\n      { icon: <CircleIcon />, title: '合約下載', onClick: () => { getContract({ accountNo, format: 1 }); } },\r\n      /*\r\n      { icon: <CircleIcon />, title: '清償證明下載', onClick: () => { getStatment({ accountNo, format: 1 }); } },\r\n      */\r\n    ];\r\n    dispatch(setDrawer({\r\n      title: '',\r\n      content: (\r\n        <ul>\r\n          {list.map((func) => (\r\n            <li key={func.title}>\r\n              <button type=\"button\" onClick={func.onClick}>\r\n                {func.icon}\r\n                {func.title}\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ),\r\n      shouldAutoClose: true,\r\n    }));\r\n    dispatch(setDrawerVisible(true));\r\n  };\r\n\r\n  const handleSearchClick = (account, subNo) => {\r\n    // 查詢應繳本息\r\n    startFunc(FuncID.L00200, { account, subNo });\r\n  };\r\n\r\n  /**\r\n   * 產生上方卡片的 slides\r\n   */\r\n  const renderSlides = (cards) => {\r\n    if (!cards || cards?.length === 0) return [];\r\n\r\n    return cards.map((card, i) => (\r\n      <AccountCard type=\"L\" key={`${uid}-c${i}`}>\r\n        <div className=\"justify-between items-start\">\r\n          <div>\r\n            <div>{card.loanType}</div>\r\n            <div>{`${accountFormatter(card.accountNo)} (${card.loanNo})`}</div>\r\n          </div>\r\n          <FEIBIconButton className=\"-mt-5 -mr-5\" aria-label=\"展開下拉式選單\" onClick={() => handleMoreClick(card.accountNo, card.loanNo)}>\r\n            <MoreIcon />\r\n          </FEIBIconButton>\r\n        </div>\r\n        <div className=\"justify-end items-baseline gap-4\">\r\n          <div>貸款餘額</div>\r\n          <div className=\"balance\">{currencySymbolGenerator(card.currency ?? 'NTD', card.balance)}</div>\r\n        </div>\r\n        <div className=\"justify-end gap-6 mt-4 divider\">\r\n          <button type=\"button\" className=\"text-16\" onClick={() => handleSearchClick(card.accountNo, card.loanNo)}>本期應繳查詢</button>\r\n        </div>\r\n      </AccountCard>\r\n    ));\r\n  };\r\n\r\n  /**\r\n   * 產生下方資訊會用到的\r\n   */\r\n  const renderBonusContents = (info, accountNo, subNo) => ([\r\n    {\r\n      label: '應繳款日',\r\n      value: `每月${info.cycleTiming}日`,\r\n      onClick: () => handleSearchClick(accountNo, subNo),\r\n    },\r\n    {\r\n      label: '應繳本息',\r\n      value: currencySymbolGenerator(info.currency ?? 'NTD', info.interest),\r\n      onClick: () => handleSearchClick(accountNo, subNo),\r\n    },\r\n    {\r\n      label: '可能回饋',\r\n      value: '-',\r\n    },\r\n    /*\r\n    {\r\n      label: '可能回饋',\r\n      value: info.isJoinedRewardProgram ? currencySymbolGenerator(info.currency ?? 'NTD', info.rewards) : '-',\r\n      onClick: () => history.push('/L001001', { accountNo }),\r\n    },\r\n    */\r\n  ]);\r\n\r\n  const handleSingleTransaction = async (i, cardData) => {\r\n    dispatch(setWaittingVisible(true));\r\n    const param = {\r\n      account: cardData.accountNo,\r\n      subNo: cardData.loanNo,\r\n      startDate: dateToYMD(new Date(new Date().setDate(new Date().getDate() - 30))),\r\n      endDate: dateToYMD(),\r\n    };\r\n    const historyResponse = await getSubPaymentHistory(param);\r\n    dispatch(setWaittingVisible(false));\r\n    if (historyResponse) {\r\n      const singleHistoryData = historyResponse.data[i];\r\n      startFunc(`${FuncID.L00300}1`, { singleHistoryData, cardData });\r\n    }\r\n  };\r\n\r\n  const renderTransactions = (card) => {\r\n    if (card?.transactions?.length <= 0) {\r\n      return (\r\n        <div style={{ height: '20rem', marginTop: '6rem' }}>\r\n          <EmptyData />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // transactions 依照日期排序（大 -> 小）\r\n    const sortedTransactions = card.transactions.sort((a, b) => parseInt(b.txnDate, 10) - parseInt(a.txnDate, 10));\r\n\r\n    return sortedTransactions.slice(0, 3).map((t, i) => (\r\n      <button\r\n        key={`${uid}-t${i}`}\r\n        type=\"button\"\r\n        aria-label={`點擊查詢此筆紀錄，還款日:${dateToString(t.txnDate)}，金額：${currencySymbolGenerator(t.currency ?? 'NTD', t.amount)}`}\r\n        onClick={() => handleSingleTransaction(i, card)}\r\n        style={{ width: '100%' }}\r\n      >\r\n        <InformationTape\r\n          topLeft={handleLoanTypeToTitle(t.type)}\r\n          bottomLeft={dateToString(t.txnDate)}\r\n          topRight={currencySymbolGenerator(t.currency ?? 'NTD', t.amount)}\r\n          bottomRight={`貸款餘額 ${currencySymbolGenerator(t.currency ?? 'NTD', t.balance)}`}\r\n        />\r\n      </button>\r\n    ));\r\n  };\r\n\r\n  const handleMoreTransactionsClick = (card) => {\r\n    startFunc(FuncID.L00300, { card }); // TODO 需明確定義 card 的內容！\r\n  };\r\n\r\n  /**\r\n   * 產生下方交易資訊的 slides\r\n   */\r\n  const renderContents = (cards) => {\r\n    if (!cards || cards?.length === 0) return [];\r\n\r\n    return cards.map((card, i) => (\r\n      <ContentWrapper key={`${uid}-a${i}`}>\r\n        <ThreeColumnInfoPanel content={renderBonusContents(card.bonusInfo, card.accountNo, card.loanNo)} />\r\n        <div>\r\n          <div>{ renderTransactions(card) }</div>\r\n          <div className=\"toolbar\">\r\n            <button className=\"btn-icon\" type=\"button\" onClick={() => handleMoreTransactionsClick(card)}>\r\n              更多明細\r\n              <ArrowNextIcon />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </ContentWrapper>\r\n    ));\r\n  };\r\n\r\n  /**\r\n   * 檢查是否可以開啟這個頁面。\r\n   * @returns {Promise<String>} 傳回驗證結果的錯誤訊息；若是正確無誤時，需傳回 null\r\n   */\r\n  const inspector = async () => {\r\n    dispatch(setWaittingVisible(true));\r\n    let error;\r\n\r\n    // 分帳應繳摘要資訊\r\n    const subSummaryRes = await getSubSummary();\r\n\r\n    if (subSummaryRes.length !== 0) {\r\n      error = null;\r\n      setLoans(await getLoanSummary());\r\n    } else {\r\n      error = '您尚未擁有貸款，請在系統關閉此功能後，立即申請。';\r\n    }\r\n\r\n    dispatch(setWaittingVisible(false));\r\n    return error;\r\n  };\r\n\r\n  /**\r\n   * 產生頁面\r\n   * 只要提供相同數量的 slides 和 content，SwiperLayout會自動切換對應的內容。\r\n   */\r\n  return (\r\n    <Layout title=\"貸款\" inspector={inspector}>\r\n      <MainScrollWrapper>\r\n        <PageWrapper>\r\n          <SwiperLayout slides={renderSlides(loans)} hasDivider={false} slidesPerView={1.1} spaceBetween={8} centeredSlides>\r\n            { renderContents(loans) }\r\n          </SwiperLayout>\r\n        </PageWrapper>\r\n      </MainScrollWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}