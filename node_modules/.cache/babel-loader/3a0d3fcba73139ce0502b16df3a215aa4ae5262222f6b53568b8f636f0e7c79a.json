{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"readonly\"];/* eslint-disable no-unused-vars */import{useState,useEffect}from'react';import{FEIBErrorMessage,FEIBInput,FEIBInputLabel}from'components/elements';import{ListIcon}from'assets/images/icons';import{useController}from'react-hook-form';import{getBankCode}from'utilities/CacheData';import BankCode from'./bankSelector';/*\r\n* ================== BankCodeInput 組件說明 ==================\r\n* BankCodeInput 組件封裝了 Input 和 BankCode 清單\r\n* ================== BankCodeInput 可傳參數 ==================\r\n* *** 所有參數皆供表單驗證與取值用 ***\r\n* 1. readonly -> 是否可選擇\r\n* 2. controlProps -> 包含 react-hook-form 的參數，ex: {control, name, defaultValues:optional,.... }\r\n* */import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BankCodeInputField=function BankCodeInputField(_ref){var _bankList$find$bankNa,_bankList$find,_fieldState$error;var readonly=_ref.readonly,controlProps=_objectWithoutProperties(_ref,_excluded);var _useState=useState(),_useState2=_slicedToArray(_useState,2),bankList=_useState2[0],setBankList=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),showSelector=_useState4[0],setShowSelector=_useState4[1];var _useController=useController(controlProps),field=_useController.field,fieldState=_useController.fieldState;var onChange=field.onChange,value=field.value,name=field.name;/**\r\n   *- 初始化\r\n   */useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getBankCode().then(function(banks){return setBankList(banks);});case 1:case\"end\":return _context.stop();}}},_callee);})),[]);/**\r\n   * HTML輸出。\r\n   */return/*#__PURE__*/_jsxs(\"div\",{style:{pointerEvents:readonly?'none':'auto'},children:[/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FEIBInputLabel,{htmlFor:name,children:\"\\u9280\\u884C\\u4EE3\\u78BC\"}),/*#__PURE__*/_jsx(FEIBInput,{placeholder:\"\\u8ACB\\u9078\\u64C7\",value:\"\".concat(value!==null&&value!==void 0?value:'',\" \").concat((_bankList$find$bankNa=bankList===null||bankList===void 0?void 0:(_bankList$find=bankList.find(function(b){return b.bankNo===value;}))===null||_bankList$find===void 0?void 0:_bankList$find.bankName)!==null&&_bankList$find$bankNa!==void 0?_bankList$find$bankNa:''),$icon:/*#__PURE__*/_jsx(ListIcon,{}),$iconFontSize:2.4,$iconOnClick:function $iconOnClick(){return setShowSelector(true);},readOnly:true,error:!!fieldState.error,onClick:function onClick(){return setShowSelector(true);}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_fieldState$error=fieldState.error)===null||_fieldState$error===void 0?void 0:_fieldState$error.message})]}),showSelector?/*#__PURE__*/_jsx(BankCode,{banks:bankList,onClose:function onClose(){return setShowSelector(false);},onSelected:function onSelected(bank){onChange(bank.bankNo);}}):null]});};export default BankCodeInputField;","map":{"version":3,"names":["useState","useEffect","FEIBErrorMessage","FEIBInput","FEIBInputLabel","ListIcon","useController","getBankCode","BankCode","BankCodeInputField","readonly","controlProps","bankList","setBankList","showSelector","setShowSelector","field","fieldState","onChange","value","name","then","banks","pointerEvents","find","b","bankNo","bankName","error","message","bank"],"sources":["C:/Users/allen/git/app2-webview/src/pages/R00400_CCPayment/fields/BankCodeInputField/index.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { useState, useEffect } from 'react';\r\nimport { FEIBErrorMessage, FEIBInput, FEIBInputLabel } from 'components/elements';\r\nimport { ListIcon } from 'assets/images/icons';\r\nimport { useController } from 'react-hook-form';\r\nimport { getBankCode } from 'utilities/CacheData';\r\nimport BankCode from './bankSelector';\r\n\r\n/*\r\n* ================== BankCodeInput 組件說明 ==================\r\n* BankCodeInput 組件封裝了 Input 和 BankCode 清單\r\n* ================== BankCodeInput 可傳參數 ==================\r\n* *** 所有參數皆供表單驗證與取值用 ***\r\n* 1. readonly -> 是否可選擇\r\n* 2. controlProps -> 包含 react-hook-form 的參數，ex: {control, name, defaultValues:optional,.... }\r\n* */\r\n\r\nconst BankCodeInputField = ({\r\n  readonly,\r\n  ...controlProps\r\n}) => {\r\n  const [bankList, setBankList] = useState();\r\n  const [showSelector, setShowSelector] = useState();\r\n  const { field, fieldState } = useController(controlProps);\r\n  const {\r\n    onChange, value, name,\r\n  } = field;\r\n  /**\r\n   *- 初始化\r\n   */\r\n  useEffect(async () => {\r\n    getBankCode().then((banks) => setBankList(banks));\r\n  }, []);\r\n\r\n  /**\r\n   * HTML輸出。\r\n   */\r\n  return (\r\n    <div style={{ pointerEvents: readonly ? 'none' : 'auto' }}>\r\n      <>\r\n        <FEIBInputLabel htmlFor={name}>銀行代碼</FEIBInputLabel>\r\n        <FEIBInput\r\n          placeholder=\"請選擇\"\r\n          value={`${value ?? ''} ${\r\n            bankList?.find((b) => b.bankNo === value)?.bankName ?? ''\r\n          }`}\r\n          $icon={<ListIcon />}\r\n          $iconFontSize={2.4}\r\n          $iconOnClick={() => setShowSelector(true)}\r\n          readOnly\r\n          error={!!fieldState.error}\r\n          onClick={() => setShowSelector(true)}\r\n        />\r\n        <FEIBErrorMessage>{fieldState.error?.message}</FEIBErrorMessage>\r\n      </>\r\n      {showSelector ? (\r\n        <BankCode\r\n          banks={bankList}\r\n          onClose={() => setShowSelector(false)}\r\n          onSelected={(bank) => {\r\n            onChange(bank.bankNo);\r\n          }}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BankCodeInputField;\r\n"],"mappings":"mhBAAA,mCACA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,gBAAgB,CAAEC,SAAS,CAAEC,cAAc,KAAQ,qBAAqB,CACjF,OAASC,QAAQ,KAAQ,qBAAqB,CAC9C,OAASC,aAAa,KAAQ,iBAAiB,CAC/C,OAASC,WAAW,KAAQ,qBAAqB,CACjD,MAAOC,SAAQ,KAAM,gBAAgB,CAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAPA,6IASA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,MAGlB,+DAFJC,SAAQ,MAARA,QAAQ,CACLC,YAAY,0CAEf,cAAgCX,QAAQ,EAAE,wCAAnCY,QAAQ,eAAEC,WAAW,eAC5B,eAAwCb,QAAQ,EAAE,yCAA3Cc,YAAY,eAAEC,eAAe,eACpC,mBAA8BT,aAAa,CAACK,YAAY,CAAC,CAAjDK,KAAK,gBAALA,KAAK,CAAEC,UAAU,gBAAVA,UAAU,CACzB,GACEC,SAAQ,CACNF,KAAK,CADPE,QAAQ,CAAEC,KAAK,CACbH,KAAK,CADGG,KAAK,CAAEC,IAAI,CACnBJ,KAAK,CADUI,IAAI,CAEvB;AACF;AACA,KACEnB,SAAS,wEAAC,qIACRM,WAAW,EAAE,CAACc,IAAI,CAAC,SAACC,KAAK,QAAKT,YAAW,CAACS,KAAK,CAAC,GAAC,CAAC,sDACnD,GAAE,EAAE,CAAC,CAEN;AACF;AACA,KACE,mBACE,aAAK,KAAK,CAAE,CAAEC,aAAa,CAAEb,QAAQ,CAAG,MAAM,CAAG,MAAO,CAAE,wBACxD,wCACE,KAAC,cAAc,EAAC,OAAO,CAAEU,IAAK,sCAAsB,cACpD,KAAC,SAAS,EACR,WAAW,CAAC,oBAAK,CACjB,KAAK,WAAKD,KAAK,SAALA,KAAK,UAALA,KAAK,CAAI,EAAE,oCACnBP,QAAQ,SAARA,QAAQ,iCAARA,QAAQ,CAAEY,IAAI,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,MAAM,GAAKP,KAAK,GAAC,yCAAzC,eAA2CQ,QAAQ,+DAAI,EAAE,CACxD,CACH,KAAK,cAAE,KAAC,QAAQ,IAAI,CACpB,aAAa,CAAE,GAAI,CACnB,YAAY,CAAE,8BAAMZ,gBAAe,CAAC,IAAI,CAAC,EAAC,CAC1C,QAAQ,MACR,KAAK,CAAE,CAAC,CAACE,UAAU,CAACW,KAAM,CAC1B,OAAO,CAAE,yBAAMb,gBAAe,CAAC,IAAI,CAAC,EAAC,EACrC,cACF,KAAC,gBAAgB,8BAAEE,UAAU,CAACW,KAAK,4CAAhB,kBAAkBC,OAAO,EAAoB,GAC/D,CACFf,YAAY,cACX,KAAC,QAAQ,EACP,KAAK,CAAEF,QAAS,CAChB,OAAO,CAAE,yBAAMG,gBAAe,CAAC,KAAK,CAAC,EAAC,CACtC,UAAU,CAAE,oBAACe,IAAI,CAAK,CACpBZ,QAAQ,CAACY,IAAI,CAACJ,MAAM,CAAC,CACvB,CAAE,EACF,CACA,IAAI,GACJ,CAEV,CAAC,CAED,cAAejB,mBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}