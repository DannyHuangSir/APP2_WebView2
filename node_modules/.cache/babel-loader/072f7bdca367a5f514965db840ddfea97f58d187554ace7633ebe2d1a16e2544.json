{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{useLocation,useHistory}from'react-router';/* Elements */import Layout from'components/Layout/Layout';import{ArrowNextIcon}from'assets/images/icons';import{showCustomPrompt}from'utilities/MessageModal';import{switchZhNumber}from'utilities/Generator';import{getDepositPlusLevelList}from'./api';/* Style */import{DepositPlusDetailWrapper,LevelDialogContentWrapper}from'./depositPlus.style';/**\r\n * DepositPlusDetail 各項活動說明\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DepositPlusDetail=function DepositPlusDetail(){var location=useLocation();var history=useHistory();var url26Pa='https://www.bankee.com.tw/event/26Pa/index.html';// 調整優惠列表中的數字顯示\nvar handleLevelList=function handleLevelList(list){return list.map(function(item,index){// offlineDepositRange\nvar offlineDepositRange=item.offlineDepositRange.replace(/,/g,'');var offlineDepositRangeNum={firstNum:offlineDepositRange.match(/\\d+/g)[0],secondNum:offlineDepositRange.match(/\\d+/g)[1]};var offlineDepositRangeInt={firstNum:parseInt(offlineDepositRangeNum.firstNum,10),secondNum:parseInt(offlineDepositRangeNum.secondNum,10)};var offlineDepositRangeFinalRes='';if(index===0){offlineDepositRangeFinalRes=\"\".concat(switchZhNumber(offlineDepositRangeInt.firstNum,false),\"(\\u4E0D\\u542B) \\u4EE5\\u4E0B\");}else if(index===13){offlineDepositRangeFinalRes=\"\".concat(switchZhNumber(offlineDepositRangeInt.firstNum,false),\"(\\u542B) \\u4EE5\\u4E0A\");}else{offlineDepositRangeFinalRes=\"\".concat(switchZhNumber(offlineDepositRangeInt.firstNum,false),\"(\\u542B) ~\").concat(switchZhNumber(offlineDepositRangeInt.secondNum,false));}// plus\nvar plus=item.plus.replace(/,/g,'');var plusFinalRes=parseInt(plus,10)===0?'0':\"\".concat(switchZhNumber(parseInt(plus,10),true),\"(\\u542B)\");var newItem=_objectSpread(_objectSpread({},item),{},{plus:plusFinalRes,offlineDepositRange:offlineDepositRangeFinalRes});return newItem;});};var renderLevelDialogContent=function renderLevelDialogContent(levelList){return/*#__PURE__*/_jsx(LevelDialogContentWrapper,{children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"caption\",{children:\"\\u5E63\\u5225\\uFF1A\\u65B0\\u81FA\\u5E63\\uFF08\\u5143\\uFF09\"}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u7B49\\u7D1A\"}),/*#__PURE__*/_jsxs(\"th\",{children:[\"\\u793E\\u7FA4\\u5708\\u5B58\\u6B3E\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u6708\\u5E73\\u5747\\u9918\\u984D\\u4E4B\\u7E3D\\u984D\"]}),/*#__PURE__*/_jsxs(\"th\",{children:[\"\\u63A8\\u85A6\\u4EBA\\u500B\\u4EBA\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u512A\\u60E0\\u5229\\u7387\\u5B58\\u6B3E\\u984D\\u5EA6\"]})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"rowCenter1 rowRight2 rowRight3\",children:levelList.map(function(item){var range=item.range,offlineDepositRange=item.offlineDepositRange,plus=item.plus;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:range}),/*#__PURE__*/_jsx(\"td\",{children:offlineDepositRange}),/*#__PURE__*/_jsx(\"td\",{children:plus})]},range);})})]})});};var handleDetailOnClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(detailText){var year,levelList,adjustedLevelList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(detailText==='優惠額度等級表')){_context.next=9;break;}year=location.state.year;_context.next=4;return getDepositPlusLevelList({year:year});case 4:levelList=_context.sent;adjustedLevelList=handleLevelList(levelList);showCustomPrompt({title:'存款優惠利率額度等級表',message:renderLevelDialogContent(adjustedLevelList)});_context.next=10;break;case 9:window.open(url26Pa,'_blank');case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleDetailOnClick(_x){return _ref.apply(this,arguments);};}();var ActivityCard=function ActivityCard(data){var title=data.title,detail=data.detail;/* 取得連結文字 */var detailLinkText=detail.match(/\">(.*?)<\\/a>/g)[0].replace(/<\\/?a>/g,'').replace(/\">/g,'');/* 移除<a>，將字串依換行符號切成字串陣列，移除所有'●' */var aTagRemovedDetail=detail.replace(/<a(.*?)<\\/a>/g,'').replaceAll('●','');var detailList=aTagRemovedDetail.split('<br>');return/*#__PURE__*/_jsxs(\"div\",{className:\"activityCard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"activityCard_upper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return handleDetailOnClick(detailLinkText);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);})),children:[detailLinkText,/*#__PURE__*/_jsx(ArrowNextIcon,{})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"activityCard_lower\",children:detailList.map(function(item){return/*#__PURE__*/_jsx(\"p\",{children:item},item);})})]});};return/*#__PURE__*/_jsx(DepositPlusDetailWrapper,{children:/*#__PURE__*/_jsx(Layout,{title:\"\\u5404\\u9805\\u6D3B\\u52D5\\u8AAA\\u660E\",goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(\"div\",{children:location.state.bonusDetail.map(function(detail){return/*#__PURE__*/_jsx(ActivityCard,{title:detail.promotionName,detail:detail.brief},detail);})})})});};export default DepositPlusDetail;","map":{"version":3,"names":["React","useLocation","useHistory","Layout","ArrowNextIcon","showCustomPrompt","switchZhNumber","getDepositPlusLevelList","DepositPlusDetailWrapper","LevelDialogContentWrapper","DepositPlusDetail","location","history","url26Pa","handleLevelList","list","map","item","index","offlineDepositRange","replace","offlineDepositRangeNum","firstNum","match","secondNum","offlineDepositRangeInt","parseInt","offlineDepositRangeFinalRes","plus","plusFinalRes","newItem","renderLevelDialogContent","levelList","range","handleDetailOnClick","detailText","year","state","adjustedLevelList","title","message","window","open","ActivityCard","data","detail","detailLinkText","aTagRemovedDetail","replaceAll","detailList","split","goBack","bonusDetail","promotionName","brief"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00300_NtdDeposit/DepositPlus/depositPlusDetail.js"],"sourcesContent":["import React from 'react';\r\nimport { useLocation, useHistory } from 'react-router';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport { ArrowNextIcon } from 'assets/images/icons';\r\nimport { showCustomPrompt } from 'utilities/MessageModal';\r\nimport { switchZhNumber } from 'utilities/Generator';\r\nimport { getDepositPlusLevelList } from './api';\r\n\r\n/* Style */\r\nimport { DepositPlusDetailWrapper, LevelDialogContentWrapper } from './depositPlus.style';\r\n\r\n/**\r\n * DepositPlusDetail 各項活動說明\r\n */\r\nconst DepositPlusDetail = () => {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const url26Pa = 'https://www.bankee.com.tw/event/26Pa/index.html';\r\n\r\n  // 調整優惠列表中的數字顯示\r\n  const handleLevelList = (list) => list.map((item, index) => {\r\n  // offlineDepositRange\r\n    const offlineDepositRange = item.offlineDepositRange.replace(/,/g, '');\r\n    const offlineDepositRangeNum = {\r\n      firstNum: offlineDepositRange.match(/\\d+/g)[0],\r\n      secondNum: offlineDepositRange.match(/\\d+/g)[1],\r\n    };\r\n    const offlineDepositRangeInt = {\r\n      firstNum: parseInt(offlineDepositRangeNum.firstNum, 10),\r\n      secondNum: parseInt(offlineDepositRangeNum.secondNum, 10),\r\n    };\r\n    let offlineDepositRangeFinalRes = '';\r\n\r\n    if (index === 0) {\r\n      offlineDepositRangeFinalRes = `${switchZhNumber(offlineDepositRangeInt.firstNum, false)}(不含) 以下`;\r\n    } else if (index === 13) {\r\n      offlineDepositRangeFinalRes = `${switchZhNumber(offlineDepositRangeInt.firstNum, false)}(含) 以上`;\r\n    } else {\r\n      offlineDepositRangeFinalRes = `${switchZhNumber(offlineDepositRangeInt.firstNum, false)\r\n      }(含) ~${\r\n        switchZhNumber(offlineDepositRangeInt.secondNum, false)}`;\r\n    }\r\n\r\n    // plus\r\n    const plus = item.plus.replace(/,/g, '');\r\n    const plusFinalRes = parseInt(plus, 10) === 0\r\n      ? '0'\r\n      : `${switchZhNumber(parseInt(plus, 10), true)}(含)`;\r\n\r\n    const newItem = {\r\n      ...item,\r\n      plus: plusFinalRes,\r\n      offlineDepositRange: offlineDepositRangeFinalRes,\r\n    };\r\n\r\n    return newItem;\r\n  });\r\n\r\n  const renderLevelDialogContent = (levelList) => (\r\n    <LevelDialogContentWrapper>\r\n      <table>\r\n        <caption>幣別：新臺幣（元）</caption>\r\n        <thead>\r\n          <tr>\r\n            <th>等級</th>\r\n            <th>\r\n              社群圈存款\r\n              <br />\r\n              月平均餘額之總額\r\n            </th>\r\n            <th>\r\n              推薦人個人\r\n              <br />\r\n              優惠利率存款額度\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"rowCenter1 rowRight2 rowRight3\">\r\n          { levelList.map((item) => {\r\n            const { range, offlineDepositRange, plus } = item;\r\n            return (\r\n              <tr key={range}>\r\n                <td>{range}</td>\r\n                <td>{offlineDepositRange}</td>\r\n                <td>{plus}</td>\r\n              </tr>\r\n            );\r\n          }) }\r\n        </tbody>\r\n      </table>\r\n    </LevelDialogContentWrapper>\r\n  );\r\n\r\n  const handleDetailOnClick = async (detailText) => {\r\n    if (detailText === '優惠額度等級表') {\r\n      const { year } = location.state;\r\n      const levelList = await getDepositPlusLevelList({ year });\r\n      const adjustedLevelList = handleLevelList(levelList);\r\n      showCustomPrompt({\r\n        title: '存款優惠利率額度等級表',\r\n        message: renderLevelDialogContent(adjustedLevelList),\r\n      });\r\n    } else {\r\n      window.open(url26Pa, '_blank');\r\n    }\r\n  };\r\n\r\n  const ActivityCard = (data) => {\r\n    const { title, detail } = data;\r\n\r\n    /* 取得連結文字 */\r\n    const detailLinkText = detail.match(/\">(.*?)<\\/a>/g)[0].replace(/<\\/?a>/g, '').replace(/\">/g, '');\r\n\r\n    /* 移除<a>，將字串依換行符號切成字串陣列，移除所有'●' */\r\n    const aTagRemovedDetail = detail.replace(/<a(.*?)<\\/a>/g, '').replaceAll('●', '');\r\n\r\n    const detailList = aTagRemovedDetail.split('<br>');\r\n\r\n    return (\r\n      <div className=\"activityCard\">\r\n        <div className=\"activityCard_upper\">\r\n          <div className=\"title\">{title}</div>\r\n          <div className=\"detail\" onClick={async () => await handleDetailOnClick(detailLinkText)}>\r\n            {detailLinkText}\r\n            <ArrowNextIcon />\r\n          </div>\r\n        </div>\r\n        <div className=\"activityCard_lower\">\r\n          {detailList.map((item) => <p key={item}>{item}</p>)}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <DepositPlusDetailWrapper>\r\n      <Layout title=\"各項活動說明\" goBackFunc={() => history.goBack()}>\r\n        <div>\r\n          {location.state.bonusDetail.map((detail) => (\r\n            <ActivityCard key={detail} title={detail.promotionName} detail={detail.brief} />\r\n          ))}\r\n        </div>\r\n      </Layout>\r\n    </DepositPlusDetailWrapper>\r\n  );\r\n};\r\n\r\nexport default DepositPlusDetail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}