{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useHistory}from'react-router';import{useDispatch}from'react-redux';import Main from'components/Layout';import Layout from'components/Layout/Layout';import CreditCard from'components/CreditCard';import SwiperLayout from'components/SwiperLayout';import CreditCardTxsList from'components/CreditCardTxsList';import ThreeColumnInfoPanel from'components/ThreeColumnInfoPanel';import{FuncID}from'utilities/FuncID';import{currencySymbolGenerator}from'utilities/Generator';import{closeFunc,loadFuncParams,startFunc}from'utilities/AppScriptProxy';import{showCustomDrawer,showCustomPrompt}from'utilities/MessageModal';import{CreditCardIcon5,CreditCardIcon6,CircleIcon}from'assets/images/icons';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{getCards,getTransactionPromise,updateTxnNotes}from'./api';import{backInfo,generateTwoCardsArray,levelInfo,renderBody,renderHead}from'./utils';import{SwiperCreditCard,DetailDialogContentWrapper,TableDialog}from'./C00700.style';/**\r\n * C00700 信用卡 首頁\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreditCardPage=function CreditCardPage(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cardsInfo=_useState2[0],setCardsInfo=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),usedCardLimit=_useState4[0],setUsedCardLimit=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),transactionMap=_useState6[0],setTransactionMap=_useState6[1];var dispatch=useDispatch();var go2Func=function go2Func(funcId,params){startFunc(funcId,params,{transactionMap:transactionMap,cardsInfo:cardsInfo,usedCardLimit:usedCardLimit});};var fetchTransactions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(cards,currentIndex){var transactionsArray,flattedTransactions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(cards.map(function(_ref2){var cardNo=_ref2.cardNo;return getTransactionPromise(cardNo);}));case 2:transactionsArray=_context.sent;flattedTransactions=transactionsArray.flat();setTransactionMap(function(prevMap){return _objectSpread(_objectSpread({},prevMap),{},_defineProperty({},currentIndex,flattedTransactions));});case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchTransactions(_x,_x2){return _ref.apply(this,arguments);};}();// 滑動卡片時，拿取當下信用卡的交易明細\nvar onSlideChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(swiper){var currentCards;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!transactionMap[swiper.activeIndex]){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:currentCards=cardsInfo[swiper.activeIndex].cards;fetchTransactions(currentCards,swiper.activeIndex);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function onSlideChange(_x3){return _ref3.apply(this,arguments);};}();// 編輯信用卡明細備註的 Handler\nvar onTxnNotesEdit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(payload,isBankeeCard){var _yield$updateTxnNotes,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return updateTxnNotes(payload);case 2:_yield$updateTxnNotes=_context3.sent;result=_yield$updateTxnNotes.result;if(result){_context3.next=6;break;}return _context3.abrupt(\"return\");case 6:// updateTxNotes API 打成功才更新畫面\nsetTransactionMap(function(prevMap){var key=isBankeeCard?0:1;var updatedCards=prevMap[key].map(function(card){return card.txKey===payload.txKey?_objectSpread(_objectSpread({},card),{},{note:payload.note}):card;});return _objectSpread(_objectSpread({},prevMap),{},_defineProperty({},key,updatedCards));});case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function onTxnNotesEdit(_x4,_x5){return _ref4.apply(this,arguments);};}();// 信用卡卡面右上角的功能列表\nvar functionAllList=function functionAllList(item){var list=[{fid:FuncID.R00200,title:'晚點付',cardNo:item.cards[0].cardNo},{fid:FuncID.R00300,title:'帳單',cardNo:item.cards[0].cardNo},{fid:FuncID.R00400,title:'繳費',cardNo:item.isBankeeCard?item.cards[0].cardNo:''}];if(!item.isBankeeCard)list.splice(0,1);return/*#__PURE__*/_jsx(\"ul\",{className:\"functionList\",children:list.map(function(func){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return go2Func(func.fid,{cardNo:func.cardNo});},children:func.title})},func.fid);})});};// 信用卡更多\nvar handleMoreClick=function handleMoreClick(card){var list=[{fid:'/C007001',icon:/*#__PURE__*/_jsx(CreditCardIcon6,{}),title:'信用卡資訊',param:card},{fid:\"/\".concat(FuncID.R00500),icon:/*#__PURE__*/_jsx(CreditCardIcon5,{}),title:'自動扣繳'},{fid:'/C007002',icon:/*#__PURE__*/_jsx(CircleIcon,{}),title:'每月現金回饋'}];var options=/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:function onClick(){if(item.fid.includes(FuncID.R00500))go2Func(item.fid,null);else history.push(item.fid,item===null||item===void 0?void 0:item.param);},children:[item.icon,item.title]})},item.fid);})});showCustomDrawer({content:options,shouldAutoClose:true});};// 信用卡卡號(產生上方內容的 slides)\nvar renderSlides=function renderSlides(){if(!cardsInfo.length)return null;return cardsInfo.map(function(cardSet){return/*#__PURE__*/_jsx(SwiperCreditCard,{children:/*#__PURE__*/_jsx(CreditCard,{cardName:cardSet.isBankeeCard?'Bankee信用卡':'所有信用卡',accountNo:cardSet.isBankeeCard&&cardSet.cards[0].cardNo,balance:usedCardLimit,color:\"green\",annotation:\"\\u5DF2\\u4F7F\\u7528\\u984D\\u5EA6\",onMoreClicked:function onMoreClicked(){return handleMoreClick(cardSet);},functionList:functionAllList(cardSet)},cardSet.cards[0].cardNo)});});};var showDialog=function showDialog(title,info){showCustomPrompt({title:title,message:/*#__PURE__*/_jsxs(TableDialog,{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:renderHead(info.title)})}),/*#__PURE__*/_jsx(\"tbody\",{children:renderBody(info.body)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"remark\",children:\"\\uFF0A\\u4F9D\\u500B\\u4EBABankee\\u6578\\u5B58\\u6708\\u5E73\\u5747\\u5B58\\u6B3E\\u9918\\u984D\\u6838\\u5B9A\\u7B49\\u7D1A\"})]})});};var bonusInfo=function bonusInfo(bankeeCard){return[{label:'會員等級',value:\"\".concat(bankeeCard.memberLevel),iconType:'Arrow',onClick:function onClick(){return showDialog('會員等級',levelInfo);}},{label:'國內/外回饋',value:\"\".concat(bankeeCard.rewardsRateDomestic,\"/\").concat(bankeeCard.rewardsRateOverseas,\"%\"),iconType:'Arrow',onClick:function onClick(){return showDialog('國內外回饋',backInfo);}},{label:'回饋試算',value:currencySymbolGenerator('TWD',bankeeCard.rewardsAmount),iconType:'Arrow',onClick:function onClick(){return history.push('/C007002',{accountNo:bankeeCard.cardNo});}}];};// 信用卡明細總覽\nvar renderCreditList=function renderCreditList(){if(!cardsInfo.length)return null;return cardsInfo.map(function(cardInfo,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(DetailDialogContentWrapper,{children:cardInfo.isBankeeCard&&/*#__PURE__*/_jsx(\"div\",{className:\"panel\",children:/*#__PURE__*/_jsx(ThreeColumnInfoPanel,{content:bonusInfo(cardInfo)})})}),/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'20rem'},children:/*#__PURE__*/_jsx(CreditCardTxsList,{showAll:false,card:cardInfo,go2MoreDetails:function go2MoreDetails(){return go2Func(FuncID.R00100,{card:cardInfo,usedCardLimit:usedCardLimit,transactions:transactionMap[index]});},transactions:transactionMap[index],onTxnNotesEdit:onTxnNotesEdit})})]},cardInfo.cards[0].cardNo);});};// 拿取信用卡資訊 & 第一張卡面的交易明細\nuseEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var keepData,_yield$getCards,cards,limit,transferedCards;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(setWaittingVisible(true));_context4.next=3;return loadFuncParams();case 3:keepData=_context4.sent;if(!keepData){_context4.next=10;break;}setTransactionMap(keepData.transactionMap);setCardsInfo(keepData.cardsInfo);setUsedCardLimit(keepData.usedCardLimit);_context4.next=24;break;case 10:_context4.next=12;return getCards();case 12:_yield$getCards=_context4.sent;cards=_yield$getCards.cards;limit=_yield$getCards.usedCardLimit;if(!cards.length){_context4.next=22;break;}transferedCards=generateTwoCardsArray(cards);fetchTransactions(transferedCards[0].cards,0);setCardsInfo(transferedCards);setUsedCardLimit(limit);_context4.next=24;break;case 22:_context4.next=24;return showCustomPrompt({message:'您尚未持有Bankee信用卡，請在系統關閉此功能後，立即申請。',onClose:closeFunc});case 24:dispatch(setWaittingVisible(false));case 25:case\"end\":return _context4.stop();}}},_callee4);})),[]);return/*#__PURE__*/_jsx(Layout,{title:\"\\u4FE1\\u7528\\u5361\",goBackFunc:closeFunc,children:/*#__PURE__*/_jsx(Main,{small:true,children:/*#__PURE__*/_jsx(SwiperLayout,{slides:renderSlides(),onSlideChange:onSlideChange,hasDivider:false,slidesPerView:1.06,children:renderCreditList()})})});};export default CreditCardPage;","map":{"version":3,"names":["useEffect","useState","useHistory","useDispatch","Main","Layout","CreditCard","SwiperLayout","CreditCardTxsList","ThreeColumnInfoPanel","FuncID","currencySymbolGenerator","closeFunc","loadFuncParams","startFunc","showCustomDrawer","showCustomPrompt","CreditCardIcon5","CreditCardIcon6","CircleIcon","setWaittingVisible","getCards","getTransactionPromise","updateTxnNotes","backInfo","generateTwoCardsArray","levelInfo","renderBody","renderHead","SwiperCreditCard","DetailDialogContentWrapper","TableDialog","CreditCardPage","history","cardsInfo","setCardsInfo","usedCardLimit","setUsedCardLimit","transactionMap","setTransactionMap","dispatch","go2Func","funcId","params","fetchTransactions","cards","currentIndex","Promise","all","map","cardNo","transactionsArray","flattedTransactions","flat","prevMap","onSlideChange","swiper","activeIndex","currentCards","onTxnNotesEdit","payload","isBankeeCard","result","key","updatedCards","card","txKey","note","functionAllList","item","list","fid","R00200","title","R00300","R00400","splice","func","handleMoreClick","icon","param","R00500","options","includes","push","content","shouldAutoClose","renderSlides","length","cardSet","showDialog","info","message","body","bonusInfo","bankeeCard","label","value","memberLevel","iconType","onClick","rewardsRateDomestic","rewardsRateOverseas","rewardsAmount","accountNo","renderCreditList","cardInfo","index","minHeight","R00100","transactions","keepData","limit","transferedCards","onClose"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00700_CreditCard/C00700.jsx"],"sourcesContent":["import { useEffect, useState} from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport Main from 'components/Layout';\r\nimport Layout from 'components/Layout/Layout';\r\nimport CreditCard from 'components/CreditCard';\r\nimport SwiperLayout from 'components/SwiperLayout';\r\nimport CreditCardTxsList from 'components/CreditCardTxsList';\r\nimport ThreeColumnInfoPanel from 'components/ThreeColumnInfoPanel';\r\n\r\nimport { FuncID } from 'utilities/FuncID';\r\nimport { currencySymbolGenerator } from 'utilities/Generator';\r\nimport { closeFunc, loadFuncParams, startFunc } from 'utilities/AppScriptProxy';\r\nimport { showCustomDrawer, showCustomPrompt } from 'utilities/MessageModal';\r\nimport { CreditCardIcon5, CreditCardIcon6, CircleIcon } from 'assets/images/icons';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\n\r\nimport { getCards, getTransactionPromise, updateTxnNotes } from './api';\r\nimport {\r\n  backInfo, generateTwoCardsArray, levelInfo, renderBody, renderHead,\r\n} from './utils';\r\nimport {SwiperCreditCard, DetailDialogContentWrapper, TableDialog} from './C00700.style';\r\n\r\n/**\r\n * C00700 信用卡 首頁\r\n */\r\nconst CreditCardPage = () => {\r\n  const history = useHistory();\r\n  const [cardsInfo, setCardsInfo] = useState([]);\r\n  const [usedCardLimit, setUsedCardLimit] = useState();\r\n  const [transactionMap, setTransactionMap] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const go2Func = (funcId, params) => {\r\n    startFunc(funcId, params, {transactionMap, cardsInfo, usedCardLimit});\r\n  };\r\n\r\n  const fetchTransactions = async (cards, currentIndex) => {\r\n    const transactionsArray = await Promise.all(\r\n      cards.map(({ cardNo }) => getTransactionPromise(cardNo)),\r\n    );\r\n\r\n    const flattedTransactions = transactionsArray.flat();\r\n    setTransactionMap((prevMap) => ({...prevMap, [currentIndex]: flattedTransactions}));\r\n  };\r\n\r\n  // 滑動卡片時，拿取當下信用卡的交易明細\r\n  const onSlideChange = async (swiper) => {\r\n    if (transactionMap[swiper.activeIndex]) return;\r\n    const currentCards = cardsInfo[swiper.activeIndex].cards;\r\n    fetchTransactions(currentCards, swiper.activeIndex);\r\n  };\r\n\r\n  // 編輯信用卡明細備註的 Handler\r\n  const onTxnNotesEdit = async (payload, isBankeeCard) => {\r\n    const { result } = await updateTxnNotes(payload);\r\n    if (!result) return;\r\n    // updateTxNotes API 打成功才更新畫面\r\n    setTransactionMap((prevMap) => {\r\n      const key = isBankeeCard ? 0 : 1;\r\n      const updatedCards = prevMap[key].map((card) => (\r\n        card.txKey === payload.txKey ? {...card, note: payload.note} : card\r\n      ));\r\n      return {...prevMap, [key]: updatedCards};\r\n    });\r\n  };\r\n\r\n  // 信用卡卡面右上角的功能列表\r\n  const functionAllList = (item) => {\r\n    const list = [\r\n      { fid: FuncID.R00200, title: '晚點付', cardNo: item.cards[0].cardNo },\r\n      { fid: FuncID.R00300, title: '帳單', cardNo: item.cards[0].cardNo },\r\n      { fid: FuncID.R00400, title: '繳費', cardNo: item.isBankeeCard ? item.cards[0].cardNo : '' },\r\n    ];\r\n    if (!item.isBankeeCard) list.splice(0, 1);\r\n\r\n    return (\r\n      <ul className=\"functionList\">\r\n        { list.map((func) => (\r\n          <li key={func.fid}>\r\n            <button type=\"button\" onClick={() => go2Func(func.fid, { cardNo: func.cardNo })}>\r\n              {func.title}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  // 信用卡更多\r\n  const handleMoreClick = (card) => {\r\n    const list = [\r\n      {\r\n        fid: '/C007001', icon: <CreditCardIcon6 />, title: '信用卡資訊', param: card,\r\n      },\r\n      { fid: `/${FuncID.R00500}`, icon: <CreditCardIcon5 />, title: '自動扣繳' },\r\n      { fid: '/C007002', icon: <CircleIcon />, title: '每月現金回饋' },\r\n    ];\r\n    const options = (\r\n      <ul>\r\n        {list.map((item) => (\r\n          <li key={item.fid}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (item.fid.includes(FuncID.R00500)) go2Func(item.fid, null);\r\n                else history.push(item.fid, item?.param);\r\n              }}\r\n            >\r\n              {item.icon}\r\n              {item.title}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n    showCustomDrawer({ content: options, shouldAutoClose: true });\r\n  };\r\n\r\n  // 信用卡卡號(產生上方內容的 slides)\r\n  const renderSlides = () => {\r\n    if (!cardsInfo.length) return null;\r\n    return (\r\n      cardsInfo.map((cardSet) => (\r\n        <SwiperCreditCard>\r\n          <CreditCard\r\n            key={cardSet.cards[0].cardNo}\r\n            cardName={cardSet.isBankeeCard ? 'Bankee信用卡' : '所有信用卡'}\r\n            accountNo={cardSet.isBankeeCard && cardSet.cards[0].cardNo}\r\n            balance={usedCardLimit}\r\n            color=\"green\"\r\n            annotation=\"已使用額度\"\r\n            onMoreClicked={() => handleMoreClick(cardSet)}\r\n            functionList={functionAllList(cardSet)}\r\n          />\r\n        </SwiperCreditCard>\r\n      ))\r\n    );\r\n  };\r\n\r\n  const showDialog = (title, info) => {\r\n    showCustomPrompt({\r\n      title,\r\n      message: (\r\n        <TableDialog>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                {renderHead(info.title)}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              { renderBody(info.body)}\r\n            </tbody>\r\n          </table>\r\n          <span className=\"remark\">\r\n            ＊依個人Bankee數存月平均存款餘額核定等級\r\n          </span>\r\n        </TableDialog>\r\n      ),\r\n    });\r\n  };\r\n\r\n  const bonusInfo = (bankeeCard) => [\r\n    {\r\n      label: '會員等級',\r\n      value: `${bankeeCard.memberLevel}`,\r\n      iconType: 'Arrow',\r\n      onClick: () => showDialog('會員等級', levelInfo),\r\n    },\r\n    {\r\n      label: '國內/外回饋',\r\n      value: `${bankeeCard.rewardsRateDomestic}/${bankeeCard.rewardsRateOverseas}%`,\r\n      iconType: 'Arrow',\r\n      onClick: () => showDialog('國內外回饋', backInfo),\r\n    },\r\n    {\r\n      label: '回饋試算',\r\n      value: currencySymbolGenerator('TWD', bankeeCard.rewardsAmount),\r\n      iconType: 'Arrow',\r\n      onClick: () => history.push('/C007002', { accountNo: bankeeCard.cardNo }),\r\n    },\r\n  ];\r\n\r\n  // 信用卡明細總覽\r\n  const renderCreditList = () => {\r\n    if (!cardsInfo.length) return null;\r\n    return (\r\n      cardsInfo.map((cardInfo, index) => (\r\n        <div key={cardInfo.cards[0].cardNo}>\r\n          <DetailDialogContentWrapper>\r\n            {cardInfo.isBankeeCard && (\r\n            <div className=\"panel\">\r\n              <ThreeColumnInfoPanel content={bonusInfo(cardInfo)} />\r\n            </div>\r\n            )}\r\n          </DetailDialogContentWrapper>\r\n          <div style={{minHeight: '20rem'}}>\r\n            <CreditCardTxsList\r\n              showAll={false}\r\n              card={cardInfo}\r\n              go2MoreDetails={() => go2Func(FuncID.R00100, {card: cardInfo, usedCardLimit, transactions: transactionMap[index]})}\r\n              transactions={transactionMap[index]}\r\n              onTxnNotesEdit={onTxnNotesEdit}\r\n            />\r\n          </div>\r\n        </div>\r\n      ))\r\n    );\r\n  };\r\n\r\n  // 拿取信用卡資訊 & 第一張卡面的交易明細\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n    const keepData = await loadFuncParams();\r\n    if (keepData) {\r\n      setTransactionMap(keepData.transactionMap);\r\n      setCardsInfo(keepData.cardsInfo);\r\n      setUsedCardLimit(keepData.usedCardLimit);\r\n    } else {\r\n      const {cards, usedCardLimit: limit} = await getCards();\r\n      if (cards.length) {\r\n        const transferedCards = generateTwoCardsArray(cards);\r\n        fetchTransactions(transferedCards[0].cards, 0);\r\n        setCardsInfo(transferedCards);\r\n        setUsedCardLimit(limit);\r\n      } else {\r\n        await showCustomPrompt({\r\n          message: '您尚未持有Bankee信用卡，請在系統關閉此功能後，立即申請。',\r\n          onClose: closeFunc,\r\n        });\r\n      }\r\n    }\r\n    dispatch(setWaittingVisible(false));\r\n  }, []);\r\n\r\n  return (\r\n    <Layout title=\"信用卡\" goBackFunc={closeFunc}>\r\n      <Main small>\r\n        <SwiperLayout slides={renderSlides()} onSlideChange={onSlideChange} hasDivider={false} slidesPerView={1.06}>\r\n          {renderCreditList()}\r\n        </SwiperLayout>\r\n      </Main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CreditCardPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}