{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";/* eslint-disable no-unused-vars */import{useHistory}from'react-router';import Accordion from'components/Accordion';import Layout from'components/Layout/Layout';import{FEIBButton}from'components/elements';import InformationList from'components/InformationList';import{currencySymbolGenerator,dateToString,toCurrency}from'utilities/Generator';import{switchLoading,transactionAuth}from'utilities/AppScriptProxy';import{cancelReserveTransfer}from'pages/D00800_ReserveTransferSearch/api';import{AuthCode}from'utilities/TxnAuthCode';import{useDispatch}from'react-redux';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{ReserveTransferSearchWrapper}from'./D00800.style';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReserveTransferSearch1=function ReserveTransferSearch1(_ref){var _location$state2,_location$state3,_location$state4,_location$state5,_location$state6,_location$state7,_location$state8,_location$state9,_location$state10,_location$state11,_location$state12,_location$state13,_location$state14,_location$state15,_location$state16,_location$state17,_location$state18;var location=_ref.location;var history=useHistory();var dispatch=useDispatch();var goBack=function goBack(){return history.goBack();};var toResultPage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var jsRs,_location$state,trnsDate,accountId,seqNo,source,data,_yield$cancelReserveT,code,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return transactionAuth(AuthCode.D00800);case 2:jsRs=_context.sent;if(!jsRs.result){_context.next=14;break;}// switchLoading(true);\ndispatch(setWaittingVisible(true));_location$state=location.state,trnsDate=_location$state.trnsDate,accountId=_location$state.accountId,seqNo=_location$state.seqNo,source=_location$state.source;data={trnsDate:trnsDate,acctId:accountId,seqNo:seqNo,queryType:source};_context.next=9;return cancelReserveTransfer(data);case 9:_yield$cancelReserveT=_context.sent;code=_yield$cancelReserveT.code;message=_yield$cancelReserveT.message;// switchLoading(false);\ndispatch(setWaittingVisible(false));if(code==='0000'){history.push('/D008002',_objectSpread({},location.state));}else{history.push('/D008002',{code:code,message:message});}case 14:case\"end\":return _context.stop();}}},_callee);}));return function toResultPage(){return _ref2.apply(this,arguments);};}();console.log('location.state',location.state);return/*#__PURE__*/_jsx(Layout,{title:\"\\u53D6\\u6D88\\u9810\\u7D04\\u8F49\\u5E33\",goBackFunc:goBack,children:/*#__PURE__*/_jsxs(ReserveTransferSearchWrapper,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"confrimDataContainer lighterBlueLine\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dataLabel\",children:\"\\u8F49\\u51FA\\u91D1\\u984D\\u8207\\u8F49\\u5165\\u5E33\\u865F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"balance\",children:currencySymbolGenerator('TWD',(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.amount)}),/*#__PURE__*/_jsxs(\"div\",{className:\"accountInfo\",children:[(_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.inBankName,\"(\",(_location$state4=location.state)===null||_location$state4===void 0?void 0:_location$state4.inBank,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"accountInfo\",children:(_location$state5=location.state)===null||_location$state5===void 0?void 0:_location$state5.inActNo})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"informationListContainer\",children:[/*#__PURE__*/_jsx(InformationList,{title:\"\\u8F49\\u51FA\\u5E33\\u865F\",content:(_location$state6=location.state)===null||_location$state6===void 0?void 0:_location$state6.acctId,remark:(_location$state7=location.state)===null||_location$state7===void 0?void 0:_location$state7.showName}),/*#__PURE__*/_jsx(InformationList,{title:\"\\u9810\\u7D04\\u8F49\\u5E33\\u65E5\",content:dateToString((_location$state8=location.state)===null||_location$state8===void 0?void 0:_location$state8.payDate)}),((_location$state9=location.state)===null||_location$state9===void 0?void 0:_location$state9.chargeMode)==='1'?/*#__PURE__*/_jsx(InformationList,{title:\"\\u9031\\u671F\",content:\"\\u55AE\\u6B21\",remark:\"\"}):/*#__PURE__*/_jsx(InformationList,{title:\"\\u9031\\u671F\",content:(_location$state10=location.state)===null||_location$state10===void 0?void 0:_location$state10.payDateWording,remark:\"\"}),(((_location$state11=location.state)===null||_location$state11===void 0?void 0:_location$state11.chargeMode)==='W'||((_location$state12=location.state)===null||_location$state12===void 0?void 0:_location$state12.chargeMode)==='M')&&/*#__PURE__*/_jsx(InformationList,{title:\"\\u671F\\u9593\",content:\"\".concat(dateToString((_location$state13=location.state)===null||_location$state13===void 0?void 0:_location$state13.payDate),\"~\").concat(dateToString((_location$state14=location.state)===null||_location$state14===void 0?void 0:_location$state14.payDateEnd))})]}),/*#__PURE__*/_jsx(\"section\",{className:\"accordionContainer\",children:/*#__PURE__*/_jsxs(Accordion,{title:\"\\u8A73\\u7D30\\u4EA4\\u6613\",space:\"bottom\",children:[/*#__PURE__*/_jsx(InformationList,{title:\"\\u9810\\u7D04\\u8A2D\\u5B9A\\u65E5\",content:(_location$state15=location.state)===null||_location$state15===void 0?void 0:_location$state15.trnsDate}),/*#__PURE__*/_jsx(InformationList,{title:\"\\u5E33\\u6236\\u9918\\u984D\",content:\"\".concat(currencySymbolGenerator('TWD',(_location$state16=location.state)===null||_location$state16===void 0?void 0:_location$state16.acctBalx)),remark:(_location$state17=location.state)===null||_location$state17===void 0?void 0:_location$state17.showName}),/*#__PURE__*/_jsx(InformationList,{title:\"\\u5099\\u8A3B\",content:(_location$state18=location.state)===null||_location$state18===void 0?void 0:_location$state18.memo})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"buttonContainer\",children:/*#__PURE__*/_jsx(FEIBButton,{onClick:toResultPage,children:\"\\u78BA\\u8A8D\\u53D6\\u6D88\"})})]})});};export default ReserveTransferSearch1;","map":{"version":3,"names":["useHistory","Accordion","Layout","FEIBButton","InformationList","currencySymbolGenerator","dateToString","toCurrency","switchLoading","transactionAuth","cancelReserveTransfer","AuthCode","useDispatch","setWaittingVisible","ReserveTransferSearchWrapper","ReserveTransferSearch1","location","history","dispatch","goBack","toResultPage","D00800","jsRs","result","state","trnsDate","accountId","seqNo","source","data","acctId","queryType","code","message","push","console","log","amount","inBankName","inBank","inActNo","showName","payDate","chargeMode","payDateWording","payDateEnd","acctBalx","memo"],"sources":["C:/Users/allen/git/app2-webview/src/pages/D00800_ReserveTransferSearch/D00800_1.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { useHistory } from 'react-router';\r\n\r\nimport Accordion from 'components/Accordion';\r\nimport Layout from 'components/Layout/Layout';\r\nimport { FEIBButton } from 'components/elements';\r\nimport InformationList from 'components/InformationList';\r\nimport { currencySymbolGenerator, dateToString, toCurrency } from 'utilities/Generator';\r\nimport { switchLoading, transactionAuth } from 'utilities/AppScriptProxy';\r\nimport { cancelReserveTransfer } from 'pages/D00800_ReserveTransferSearch/api';\r\n\r\nimport { AuthCode } from 'utilities/TxnAuthCode';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { ReserveTransferSearchWrapper } from './D00800.style';\r\n\r\nconst ReserveTransferSearch1 = ({ location }) => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const goBack = () => history.goBack();\r\n\r\n  const toResultPage = async () => {\r\n    const jsRs = await transactionAuth(AuthCode.D00800);\r\n    if (jsRs.result) {\r\n      // switchLoading(true);\r\n      dispatch(setWaittingVisible(true));\r\n      const {\r\n        trnsDate, accountId, seqNo, source,\r\n      } = location.state;\r\n      const data = {\r\n        trnsDate, acctId: accountId, seqNo, queryType: source,\r\n      };\r\n      const { code, message } = await cancelReserveTransfer(data);\r\n      // switchLoading(false);\r\n      dispatch(setWaittingVisible(false));\r\n      if (code === '0000') {\r\n        history.push('/D008002', { ...location.state });\r\n      } else {\r\n        history.push('/D008002', { code, message });\r\n      }\r\n    }\r\n  };\r\n\r\n  console.log('location.state', location.state);\r\n  return (\r\n    <Layout title=\"取消預約轉帳\" goBackFunc={goBack}>\r\n      <ReserveTransferSearchWrapper>\r\n        <section className=\"confrimDataContainer lighterBlueLine\">\r\n          <div className=\"dataLabel\">轉出金額與轉入帳號</div>\r\n          <div className=\"balance\">\r\n            {currencySymbolGenerator('TWD', location.state?.amount)}\r\n          </div>\r\n          <div className=\"accountInfo\">\r\n            {location.state?.inBankName}\r\n            (\r\n            {location.state?.inBank}\r\n            )\r\n          </div>\r\n          <div className=\"accountInfo\">{location.state?.inActNo}</div>\r\n        </section>\r\n        <section className=\"informationListContainer\">\r\n          <InformationList\r\n            title=\"轉出帳號\"\r\n            content={location.state?.acctId}\r\n            remark={location.state?.showName}\r\n          />\r\n          <InformationList\r\n            title=\"預約轉帳日\"\r\n            content={dateToString(location.state?.payDate)}\r\n          />\r\n          {location.state?.chargeMode === '1' ? (\r\n            <InformationList title=\"週期\" content=\"單次\" remark=\"\" />\r\n          ) : (\r\n            <InformationList\r\n              title=\"週期\"\r\n              content={location.state?.payDateWording}\r\n              remark=\"\"\r\n            />\r\n          )}\r\n          {(location.state?.chargeMode === 'W'\r\n            || location.state?.chargeMode === 'M') && (\r\n            <InformationList\r\n              title=\"期間\"\r\n              content={`${dateToString(location.state?.payDate)}~${dateToString(\r\n                location.state?.payDateEnd,\r\n              )}`}\r\n            />\r\n          )}\r\n        </section>\r\n        <section className=\"accordionContainer\">\r\n          <Accordion title=\"詳細交易\" space=\"bottom\">\r\n            <InformationList\r\n              title=\"預約設定日\"\r\n              content={location.state?.trnsDate}\r\n            />\r\n            {/* {\r\n              location.state?.bookType === '2' && (<InformationList title=\"預約轉帳總金額\" content=\"$200,000\" />)\r\n            } */}\r\n            <InformationList\r\n              title=\"帳戶餘額\"\r\n              content={`${currencySymbolGenerator(\r\n                'TWD',\r\n                location.state?.acctBalx,\r\n              )}`}\r\n              remark={location.state?.showName}\r\n            />\r\n            <InformationList title=\"備註\" content={location.state?.memo} />\r\n          </Accordion>\r\n        </section>\r\n        <section className=\"buttonContainer\">\r\n          <FEIBButton onClick={toResultPage}>確認取消</FEIBButton>\r\n        </section>\r\n      </ReserveTransferSearchWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ReserveTransferSearch1;\r\n"],"mappings":"8WAAA,mCACA,OAASA,UAAU,KAAQ,cAAc,CAEzC,MAAOC,UAAS,KAAM,sBAAsB,CAC5C,MAAOC,OAAM,KAAM,0BAA0B,CAC7C,OAASC,UAAU,KAAQ,qBAAqB,CAChD,MAAOC,gBAAe,KAAM,4BAA4B,CACxD,OAASC,uBAAuB,CAAEC,YAAY,CAAEC,UAAU,KAAQ,qBAAqB,CACvF,OAASC,aAAa,CAAEC,eAAe,KAAQ,0BAA0B,CACzE,OAASC,qBAAqB,KAAQ,wCAAwC,CAE9E,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,kBAAkB,KAAQ,8BAA8B,CACjE,OAASC,4BAA4B,KAAQ,gBAAgB,CAAC,wFAE9D,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAsB,MAAqB,kTAAfC,SAAQ,MAARA,QAAQ,CACxC,GAAMC,QAAO,CAAGjB,UAAU,EAAE,CAC5B,GAAMkB,SAAQ,CAAGN,WAAW,EAAE,CAC9B,GAAMO,OAAM,CAAG,QAATA,OAAM,SAASF,QAAO,CAACE,MAAM,EAAE,GAErC,GAAMC,aAAY,6FAAG,4PACAX,gBAAe,CAACE,QAAQ,CAACU,MAAM,CAAC,QAA7CC,IAAI,mBACNA,IAAI,CAACC,MAAM,0BACb;AACAL,QAAQ,CAACL,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,gBAG/BG,QAAQ,CAACQ,KAAK,CADhBC,QAAQ,iBAARA,QAAQ,CAAEC,SAAS,iBAATA,SAAS,CAAEC,KAAK,iBAALA,KAAK,CAAEC,MAAM,iBAANA,MAAM,CAE9BC,IAAI,CAAG,CACXJ,QAAQ,CAARA,QAAQ,CAAEK,MAAM,CAAEJ,SAAS,CAAEC,KAAK,CAALA,KAAK,CAAEI,SAAS,CAAEH,MACjD,CAAC,uBAC+BlB,sBAAqB,CAACmB,IAAI,CAAC,4CAAnDG,IAAI,uBAAJA,IAAI,CAAEC,OAAO,uBAAPA,OAAO,CACrB;AACAf,QAAQ,CAACL,kBAAkB,CAAC,KAAK,CAAC,CAAC,CACnC,GAAImB,IAAI,GAAK,MAAM,CAAE,CACnBf,OAAO,CAACiB,IAAI,CAAC,UAAU,kBAAOlB,QAAQ,CAACQ,KAAK,EAAG,CACjD,CAAC,IAAM,CACLP,OAAO,CAACiB,IAAI,CAAC,UAAU,CAAE,CAAEF,IAAI,CAAJA,IAAI,CAAEC,OAAO,CAAPA,OAAQ,CAAC,CAAC,CAC7C,CAAC,uDAEJ,kBApBKb,aAAY,2CAoBjB,CAEDe,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEpB,QAAQ,CAACQ,KAAK,CAAC,CAC7C,mBACE,KAAC,MAAM,EAAC,KAAK,CAAC,sCAAQ,CAAC,UAAU,CAAEL,MAAO,uBACxC,MAAC,4BAA4B,yBAC3B,iBAAS,SAAS,CAAC,sCAAsC,wBACvD,YAAK,SAAS,CAAC,WAAW,oEAAgB,cAC1C,YAAK,SAAS,CAAC,SAAS,UACrBd,uBAAuB,CAAC,KAAK,mBAAEW,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBa,MAAM,CAAC,EACnD,cACN,aAAK,SAAS,CAAC,aAAa,6BACzBrB,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBc,UAAU,uBAE1BtB,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBe,MAAM,OAEnB,cACN,YAAK,SAAS,CAAC,aAAa,4BAAEvB,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBgB,OAAO,EAAO,GACpD,cACV,iBAAS,SAAS,CAAC,0BAA0B,wBAC3C,KAAC,eAAe,EACd,KAAK,CAAC,0BAAM,CACZ,OAAO,mBAAExB,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBM,MAAO,CAChC,MAAM,mBAAEd,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBiB,QAAS,EACjC,cACF,KAAC,eAAe,EACd,KAAK,CAAC,gCAAO,CACb,OAAO,CAAEnC,YAAY,mBAACU,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBkB,OAAO,CAAE,EAC/C,CACD,mBAAA1B,QAAQ,CAACQ,KAAK,2CAAd,iBAAgBmB,UAAU,IAAK,GAAG,cACjC,KAAC,eAAe,EAAC,KAAK,CAAC,cAAI,CAAC,OAAO,CAAC,cAAI,CAAC,MAAM,CAAC,EAAE,EAAG,cAErD,KAAC,eAAe,EACd,KAAK,CAAC,cAAI,CACV,OAAO,oBAAE3B,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBoB,cAAe,CACxC,MAAM,CAAC,EAAE,EAEZ,CACA,CAAC,oBAAA5B,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBmB,UAAU,IAAK,GAAG,EAC/B,oBAAA3B,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBmB,UAAU,IAAK,GAAG,gBACrC,KAAC,eAAe,EACd,KAAK,CAAC,cAAI,CACV,OAAO,WAAKrC,YAAY,oBAACU,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBkB,OAAO,CAAC,aAAIpC,YAAY,oBAC/DU,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBqB,UAAU,CAC3B,CAAG,EAEP,GACO,cACV,gBAAS,SAAS,CAAC,oBAAoB,uBACrC,MAAC,SAAS,EAAC,KAAK,CAAC,0BAAM,CAAC,KAAK,CAAC,QAAQ,wBACpC,KAAC,eAAe,EACd,KAAK,CAAC,gCAAO,CACb,OAAO,oBAAE7B,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBC,QAAS,EAClC,cAIF,KAAC,eAAe,EACd,KAAK,CAAC,0BAAM,CACZ,OAAO,WAAKpB,uBAAuB,CACjC,KAAK,oBACLW,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBsB,QAAQ,CACzB,CAAG,CACJ,MAAM,oBAAE9B,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBiB,QAAS,EACjC,cACF,KAAC,eAAe,EAAC,KAAK,CAAC,cAAI,CAAC,OAAO,oBAAEzB,QAAQ,CAACQ,KAAK,4CAAd,kBAAgBuB,IAAK,EAAG,GACnD,EACJ,cACV,gBAAS,SAAS,CAAC,iBAAiB,uBAClC,KAAC,UAAU,EAAC,OAAO,CAAE3B,YAAa,sCAAkB,EAC5C,GACmB,EACxB,CAEb,CAAC,CAED,cAAeL,uBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}