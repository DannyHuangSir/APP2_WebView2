{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint react/no-array-index-key: 0 */import{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router';import{useDispatch}from'react-redux';import uuid from'react-uuid';import{setWaittingVisible}from'stores/reducers/ModalReducer';import Main from'components/Layout';import Layout from'components/Layout/Layout';import Badge from'components/Badge';import InformationList from'components/InformationList';import EmptyData from'components/EmptyData';import{dateToString,currencySymbolGenerator}from'utilities/Generator';import{getLoanRewards}from'./api';import PageWrapper from'./Rewards.style';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var uid=uuid();/**\r\n * L00100 貸款 可能回饋頁\r\n */var Page=function Page(){var _rewards$currency,_rewards$rewards,_rewards$transactions;var history=useHistory();var location=useLocation();var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),rewards=_useState2[0],setRewards=_useState2[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accountNo,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setWaittingVisible(true));if(location.state&&'accountNo'in location.state)accountNo=location.state.accountNo;_context.next=4;return getLoanRewards({accountNo:accountNo});case 4:response=_context.sent;setRewards(response);dispatch(setWaittingVisible(false));case 7:case\"end\":return _context.stop();}}},_callee);})),[]);var renderTransactions=function renderTransactions(transactions){return transactions.map(function(t,i){var _t$currency,_t$currency2;return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(InformationList,{title:dateToString(t.txnDate),content:t.isSuccess?\"\\u5229\\u606F\\u91D1\\u984D \".concat(currencySymbolGenerator((_t$currency=t.currency)!==null&&_t$currency!==void 0?_t$currency:'TWD',t.amount)):'當日扣款失敗',remark:t.isSuccess?\"\".concat(t.rate,\"%\\u5229\\u606F \").concat(currencySymbolGenerator((_t$currency2=t.currency)!==null&&_t$currency2!==void 0?_t$currency2:'TWD',Math.round(t.amount*(t.rate/100)))):/*#__PURE__*/_jsx(\"span\",{className:\"text-red\",children:\"\\u6311\\u6230\\u5931\\u6557\"})})},\"\".concat(uid,\"-\").concat(i));});};return/*#__PURE__*/_jsx(Layout,{title:\"\\u53EF\\u80FD\\u56DE\\u994B\",goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(Main,{small:true,children:/*#__PURE__*/_jsxs(PageWrapper,{children:[/*#__PURE__*/_jsx(Badge,{label:rewards!==null&&rewards!==void 0&&rewards.isJoinedRewardProgram?'回饋累計':'您尚未參加挑戰',value:rewards!==null&&rewards!==void 0&&rewards.isJoinedRewardProgram?currencySymbolGenerator((_rewards$currency=rewards===null||rewards===void 0?void 0:rewards.currency)!==null&&_rewards$currency!==void 0?_rewards$currency:'NTD',(_rewards$rewards=rewards===null||rewards===void 0?void 0:rewards.rewards)!==null&&_rewards$rewards!==void 0?_rewards$rewards:0):'-'}),(rewards===null||rewards===void 0?void 0:(_rewards$transactions=rewards.transactions)===null||_rewards$transactions===void 0?void 0:_rewards$transactions.length)>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6263\\u6B3E\\u660E\\u7D30\"}),/*#__PURE__*/_jsx(\"ul\",{children:renderTransactions(rewards.transactions)})]}):/*#__PURE__*/_jsx(\"div\",{style:{height:'20rem',marginTop:'6rem'},children:/*#__PURE__*/_jsx(EmptyData,{})})]})})});};export default Page;","map":{"version":3,"names":["useState","useEffect","useHistory","useLocation","useDispatch","uuid","setWaittingVisible","Main","Layout","Badge","InformationList","EmptyData","dateToString","currencySymbolGenerator","getLoanRewards","PageWrapper","uid","Page","history","location","dispatch","rewards","setRewards","state","accountNo","response","renderTransactions","transactions","map","t","i","txnDate","isSuccess","currency","amount","rate","Math","round","goBack","isJoinedRewardProgram","length","height","marginTop"],"sources":["C:/Users/allen/git/app2-webview/src/pages/L00100_Loan/Rewards.jsx"],"sourcesContent":["/* eslint react/no-array-index-key: 0 */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\nimport uuid from 'react-uuid';\r\n\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport Main from 'components/Layout';\r\nimport Layout from 'components/Layout/Layout';\r\nimport Badge from 'components/Badge';\r\nimport InformationList from 'components/InformationList';\r\nimport EmptyData from 'components/EmptyData';\r\nimport {\r\n  dateToString, currencySymbolGenerator,\r\n} from 'utilities/Generator';\r\n\r\nimport { getLoanRewards } from './api';\r\nimport PageWrapper from './Rewards.style';\r\n\r\nconst uid = uuid();\r\n\r\n/**\r\n * L00100 貸款 可能回饋頁\r\n */\r\nconst Page = () => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const [rewards, setRewards] = useState();\r\n\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n    let accountNo;\r\n    if (location.state && ('accountNo' in location.state)) accountNo = location.state.accountNo;\r\n    const response = await getLoanRewards({ accountNo });\r\n    setRewards(response);\r\n    dispatch(setWaittingVisible(false));\r\n  }, []);\r\n\r\n  const renderTransactions = (transactions) => transactions.map((t, i) => (\r\n    <li key={`${uid}-${i}`}>\r\n      <InformationList\r\n        title={dateToString(t.txnDate)}\r\n        content={t.isSuccess ? `利息金額 ${currencySymbolGenerator(t.currency ?? 'TWD', t.amount)}` : '當日扣款失敗'}\r\n        remark={t.isSuccess ? `${t.rate}%利息 ${currencySymbolGenerator(t.currency ?? 'TWD', Math.round(t.amount * (t.rate / 100)))}` : <span className=\"text-red\">挑戰失敗</span>}\r\n      />\r\n    </li>\r\n  ));\r\n\r\n  return (\r\n    <Layout title=\"可能回饋\" goBackFunc={() => history.goBack()}>\r\n      <Main small>\r\n        <PageWrapper>\r\n          <Badge\r\n            label={rewards?.isJoinedRewardProgram ? '回饋累計' : '您尚未參加挑戰'}\r\n            value={rewards?.isJoinedRewardProgram ? currencySymbolGenerator(rewards?.currency ?? 'NTD', rewards?.rewards ?? 0) : '-'}\r\n          />\r\n          { rewards?.transactions?.length > 0 ? (\r\n            <div>\r\n              <h2>扣款明細</h2>\r\n              <ul>\r\n                {renderTransactions(rewards.transactions)}\r\n              </ul>\r\n            </div>\r\n          ) : (\r\n            <div style={{ height: '20rem', marginTop: '6rem' }}>\r\n              <EmptyData />\r\n            </div>\r\n          ) }\r\n        </PageWrapper>\r\n      </Main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}