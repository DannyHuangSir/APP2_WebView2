{"ast":null,"code":"/* eslint no-underscore-dangle: [\"error\", {\"allow\": [\"_data\"] }] */import{useRef,useEffect}from'react';import{Chart,ArcElement,DoughnutController}from'chart.js';import{accountOverviewCardVarient,currencySymbolGenerator}from'utilities/Generator';import Theme from'themes/theme';import PieChartWrapper from'./PieChart.style';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Chart.register(ArcElement,DoughnutController);/*\r\n* ==================== PieChart 組件說明 ====================\r\n* 圓餅圖組件\r\n* ==================== PieChart 可傳參數 ====================\r\n* 1. data -> API回傳之格式。\r\n* 2. label -> 圓餅圖標題。\r\n* 3. dollarSign -> 資產貨幣。\r\n* 4. width -> 圓餅圖圖寬。\r\n* 5. height -> 圓餅圖圖高。\r\n* 6. isCentered -> 將圓餅圖至中。\r\n* */var PieChart=function PieChart(_ref){var data=_ref.data,_ref$label=_ref.label,label=_ref$label===void 0?'正資產':_ref$label,_ref$dollarSign=_ref.dollarSign,dollarSign=_ref$dollarSign===void 0?'NTD':_ref$dollarSign,_ref$width=_ref.width,width=_ref$width===void 0?210:_ref$width,_ref$height=_ref.height,height=_ref$height===void 0?210:_ref$height,_ref$isCentered=_ref.isCentered,isCentered=_ref$isCentered===void 0?false:_ref$isCentered,space=_ref.space;var ctx=useRef();var _data={labels:data.map(function(d){var _d$alias;return(_d$alias=d.alias)!==null&&_d$alias!==void 0?_d$alias:accountOverviewCardVarient(d.type).name;}),datasets:[{label:label,data:data.map(function(d){return Math.abs(d.balance);}),backgroundColor:data.map(function(d){return Theme.colors.card[accountOverviewCardVarient(d.type).color];}),cutout:'94%',borderWidth:0}]};var totalBalance=data.reduce(function(prev,current){return prev+Math.abs(current.balance);},0);useEffect(function(){// eslint-disable-next-line\nvar chart=new Chart(ctx.current,{type:'doughnut',data:_data,options:{responsive:false,animation:false}});},[]);return/*#__PURE__*/_jsxs(PieChartWrapper,{$isCentered:isCentered,$space:space,children:[/*#__PURE__*/_jsx(\"canvas\",{width:width,height:height,ref:ctx}),/*#__PURE__*/_jsxs(\"div\",{className:\"group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"label\",children:[label,\"\\u7E3D\\u984D\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"balance \".concat(currencySymbolGenerator(dollarSign,totalBalance).length>12&&'small'),children:\"\".concat(currencySymbolGenerator(dollarSign,totalBalance))})]})]});};export default PieChart;","map":{"version":3,"names":["useRef","useEffect","Chart","ArcElement","DoughnutController","accountOverviewCardVarient","currencySymbolGenerator","Theme","PieChartWrapper","register","PieChart","data","label","dollarSign","width","height","isCentered","space","ctx","_data","labels","map","d","alias","type","name","datasets","Math","abs","balance","backgroundColor","colors","card","color","cutout","borderWidth","totalBalance","reduce","prev","current","chart","options","responsive","animation","length"],"sources":["C:/Users/allen/git/app2-webview/src/components/PieChart/index.jsx"],"sourcesContent":["/* eslint no-underscore-dangle: [\"error\", {\"allow\": [\"_data\"] }] */\r\n\r\nimport { useRef, useEffect } from 'react';\r\nimport { Chart, ArcElement, DoughnutController } from 'chart.js';\r\nimport { accountOverviewCardVarient, currencySymbolGenerator } from 'utilities/Generator';\r\nimport Theme from 'themes/theme';\r\n\r\nimport PieChartWrapper from './PieChart.style';\r\n\r\nChart.register(ArcElement, DoughnutController);\r\n\r\n/*\r\n* ==================== PieChart 組件說明 ====================\r\n* 圓餅圖組件\r\n* ==================== PieChart 可傳參數 ====================\r\n* 1. data -> API回傳之格式。\r\n* 2. label -> 圓餅圖標題。\r\n* 3. dollarSign -> 資產貨幣。\r\n* 4. width -> 圓餅圖圖寬。\r\n* 5. height -> 圓餅圖圖高。\r\n* 6. isCentered -> 將圓餅圖至中。\r\n* */\r\n\r\nconst PieChart = ({\r\n  data, label = '正資產', dollarSign = 'NTD', width = 210, height = 210, isCentered = false, space,\r\n}) => {\r\n  const ctx = useRef();\r\n\r\n  const _data = {\r\n    labels: data.map((d) => d.alias ?? accountOverviewCardVarient(d.type).name),\r\n    datasets: [{\r\n      label,\r\n      data: data.map((d) => Math.abs(d.balance)),\r\n      backgroundColor: data.map((d) => Theme.colors.card[accountOverviewCardVarient(d.type).color]),\r\n      cutout: '94%',\r\n      borderWidth: 0,\r\n    }],\r\n  };\r\n\r\n  const totalBalance = data.reduce((prev, current) => prev + Math.abs(current.balance), 0);\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line\r\n    const chart = new Chart(ctx.current, {\r\n      type: 'doughnut',\r\n      data: _data,\r\n      options: {\r\n        responsive: false,\r\n        animation: false,\r\n      },\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <PieChartWrapper $isCentered={isCentered} $space={space}>\r\n      <canvas width={width} height={height} ref={ctx} />\r\n      <div className=\"group\">\r\n        <div className=\"label\">\r\n          {label}\r\n          總額\r\n        </div>\r\n        <div className={`balance ${currencySymbolGenerator(dollarSign, totalBalance).length > 12 && 'small'}`}>{`${currencySymbolGenerator(dollarSign, totalBalance)}`}</div>\r\n      </div>\r\n    </PieChartWrapper>\r\n  );\r\n};\r\n\r\nexport default PieChart;\r\n"],"mappings":"AAAA,mEAEA,OAASA,MAAM,CAAEC,SAAS,KAAQ,OAAO,CACzC,OAASC,KAAK,CAAEC,UAAU,CAAEC,kBAAkB,KAAQ,UAAU,CAChE,OAASC,0BAA0B,CAAEC,uBAAuB,KAAQ,qBAAqB,CACzF,MAAOC,MAAK,KAAM,cAAc,CAEhC,MAAOC,gBAAe,KAAM,kBAAkB,CAAC,wFAE/CN,KAAK,CAACO,QAAQ,CAACN,UAAU,CAAEC,kBAAkB,CAAC,CAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAEA,GAAMM,SAAQ,CAAG,QAAXA,SAAQ,MAER,IADJC,KAAI,MAAJA,IAAI,iBAAEC,KAAK,CAALA,KAAK,qBAAG,KAAK,iCAAEC,UAAU,CAAVA,UAAU,0BAAG,KAAK,iCAAEC,KAAK,CAALA,KAAK,qBAAG,GAAG,6BAAEC,MAAM,CAANA,MAAM,sBAAG,GAAG,kCAAEC,UAAU,CAAVA,UAAU,0BAAG,KAAK,iBAAEC,KAAK,MAALA,KAAK,CAE7F,GAAMC,IAAG,CAAGlB,MAAM,EAAE,CAEpB,GAAMmB,MAAK,CAAG,CACZC,MAAM,CAAET,IAAI,CAACU,GAAG,CAAC,SAACC,CAAC,+BAAKA,CAAC,CAACC,KAAK,qCAAIlB,0BAA0B,CAACiB,CAAC,CAACE,IAAI,CAAC,CAACC,IAAI,GAAC,CAC3EC,QAAQ,CAAE,CAAC,CACTd,KAAK,CAALA,KAAK,CACLD,IAAI,CAAEA,IAAI,CAACU,GAAG,CAAC,SAACC,CAAC,QAAKK,KAAI,CAACC,GAAG,CAACN,CAAC,CAACO,OAAO,CAAC,GAAC,CAC1CC,eAAe,CAAEnB,IAAI,CAACU,GAAG,CAAC,SAACC,CAAC,QAAKf,MAAK,CAACwB,MAAM,CAACC,IAAI,CAAC3B,0BAA0B,CAACiB,CAAC,CAACE,IAAI,CAAC,CAACS,KAAK,CAAC,GAAC,CAC7FC,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,CACf,CAAC,CACH,CAAC,CAED,GAAMC,aAAY,CAAGzB,IAAI,CAAC0B,MAAM,CAAC,SAACC,IAAI,CAAEC,OAAO,QAAKD,KAAI,CAAGX,IAAI,CAACC,GAAG,CAACW,OAAO,CAACV,OAAO,CAAC,GAAE,CAAC,CAAC,CAExF5B,SAAS,CAAC,UAAM,CACd;AACA,GAAMuC,MAAK,CAAG,GAAItC,MAAK,CAACgB,GAAG,CAACqB,OAAO,CAAE,CACnCf,IAAI,CAAE,UAAU,CAChBb,IAAI,CAAEQ,KAAK,CACXsB,OAAO,CAAE,CACPC,UAAU,CAAE,KAAK,CACjBC,SAAS,CAAE,KACb,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,MAAC,eAAe,EAAC,WAAW,CAAE3B,UAAW,CAAC,MAAM,CAAEC,KAAM,wBACtD,eAAQ,KAAK,CAAEH,KAAM,CAAC,MAAM,CAAEC,MAAO,CAAC,GAAG,CAAEG,GAAI,EAAG,cAClD,aAAK,SAAS,CAAC,OAAO,wBACpB,aAAK,SAAS,CAAC,OAAO,WACnBN,KAAK,kBAEF,cACN,YAAK,SAAS,mBAAaN,uBAAuB,CAACO,UAAU,CAAEuB,YAAY,CAAC,CAACQ,MAAM,CAAG,EAAE,EAAI,OAAO,CAAG,oBAAKtC,uBAAuB,CAACO,UAAU,CAAEuB,YAAY,CAAC,GAAS,GACjK,GACU,CAEtB,CAAC,CAED,cAAe1B,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}