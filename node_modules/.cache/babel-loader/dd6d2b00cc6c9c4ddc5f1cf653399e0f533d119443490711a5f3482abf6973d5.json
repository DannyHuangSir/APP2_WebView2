{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useDispatch}from'react-redux';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import{transactionAuth}from'utilities/AppScriptProxy';import{changeCardlessPwd}from'pages/D00400_CardLessWithDrawChgPwd/api';/* Elements */import Layout from'components/Layout/Layout';import{FEIBButton}from'components/elements';import Accordion from'components/Accordion';import{PasswordInputField}from'components/Fields';/* Styles */import{AuthCode}from'utilities/TxnAuthCode';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{showAnimationModal}from'utilities/MessageModal';import CardLessATMWrapper from'../D00300_CardLessATM/D00300.style';import{validationSchema}from'./validationSchema';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardLessWithDrawChgPwd=function CardLessWithDrawChgPwd(){var dispatch=useDispatch();var _useForm=useForm({defaultValues:{oldPassword:'',newPassword:'',newPasswordConfirm:''},resolver:yupResolver(validationSchema)}),handleSubmit=_useForm.handleSubmit,control=_useForm.control;// 設定無卡提款密碼\nvar changePwdHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(param){var _yield$transactionAut,result,_yield$changeCardless,code,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return transactionAuth(AuthCode.D00400);case 2:_yield$transactionAut=_context.sent;result=_yield$transactionAut.result;if(!result){_context.next=13;break;}dispatch(setWaittingVisible(true));_context.next=8;return changeCardlessPwd(param);case 8:_yield$changeCardless=_context.sent;code=_yield$changeCardless.code;message=_yield$changeCardless.message;dispatch(setWaittingVisible(false));showAnimationModal({isSuccess:code==='0000',successTitle:'設定成功',errorTitle:'設定失敗',successDesc:'您的無卡提款密碼變更成功囉！',errorCode:code,errorDesc:message});case 13:case\"end\":return _context.stop();}}},_callee);}));return function changePwdHandler(_x){return _ref.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var param;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:param={oldPassword:data.oldPassword,newPassword:data.newPassword};changePwdHandler(param);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x2){return _ref2.apply(this,arguments);};}();var renderForm=function renderForm(){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u820A\\u63D0\\u6B3E\\u5BC6\\u78BC\",name:\"oldPassword\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u820A\\u63D0\\u6B3E\\u5BC6\\u78BC(4-12\\u4F4D\\u6578\\u5B57)\",control:control}),/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u65B0\\u63D0\\u6B3E\\u5BC6\\u78BC\",name:\"newPassword\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u65B0\\u63D0\\u6B3E\\u5BC6\\u78BC(4-12\\u4F4D\\u6578\\u5B57)\",control:control}),/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u78BA\\u8A8D\\u65B0\\u63D0\\u6B3E\\u5BC6\\u78BC\",name:\"newPasswordConfirm\",placeholder:\"\\u8ACB\\u518D\\u8F38\\u5165\\u4E00\\u6B21\\u65B0\\u63D0\\u6B3E\\u5BC6\\u78BC(4-12\\u4F4D\\u6578\\u5B57)\",control:control}),/*#__PURE__*/_jsx(Accordion,{space:\"both\",children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:\"\\u63D0\\u9192\\u60A8\\u61C9\\u6CE8\\u610F\\u5BC6\\u78BC\\u4E4B\\u8A2D\\u7F6E\\u53CA\\u4F7F\\u7528\\uFF0C\\u4E0D\\u5B9C\\u4F7F\\u7528\\u8207\\u60A8\\u500B\\u4EBA\\u8CC7\\u6599\\u6709\\u95DC\\u6216\\u5177\\u9023\\u7E8C\\u6027\\u3001\\u91CD\\u8907\\u6027\\u6216\\u898F\\u5247\\u6027\\u4E4B\\u865F\\u78BC\\u70BA\\u5BC6\\u78BC\\uFF0C\\u4E14\\u4E0D\\u5F97\\u5C07\\u4E0A\\u958B\\u4EA4\\u6613\\u9A57\\u8B49\\u8CC7\\u8A0A\\u4EE5\\u4EFB\\u4F55\\u65B9\\u5F0F\\u4F7F\\u7B2C\\u4E09\\u4EBA\\u77E5\\u6089\\u7372\\u5F97\\u4EE5\\u77E5\\u6089\\uFF0C\\u4EE5\\u78BA\\u4FDD\\u4EA4\\u6613\\u5B89\\u5168\\u3002\"})})})]}),/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u78BA\\u8A8D\"})]});};return/*#__PURE__*/_jsx(Layout,{title:\"\\u8B8A\\u66F4\\u7121\\u5361\\u63D0\\u6B3E\\u5BC6\\u78BC\",children:/*#__PURE__*/_jsx(CardLessATMWrapper,{children:renderForm()})});};export default CardLessWithDrawChgPwd;","map":{"version":3,"names":["useDispatch","useForm","yupResolver","transactionAuth","changeCardlessPwd","Layout","FEIBButton","Accordion","PasswordInputField","AuthCode","setWaittingVisible","showAnimationModal","CardLessATMWrapper","validationSchema","CardLessWithDrawChgPwd","dispatch","defaultValues","oldPassword","newPassword","newPasswordConfirm","resolver","handleSubmit","control","changePwdHandler","param","D00400","result","code","message","isSuccess","successTitle","errorTitle","successDesc","errorCode","errorDesc","onSubmit","data","renderForm"],"sources":["C:/Users/allen/git/app2-webview/src/pages/D00400_CardLessWithDrawChgPwd/D00400.js"],"sourcesContent":["import { useDispatch } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { transactionAuth } from 'utilities/AppScriptProxy';\r\nimport { changeCardlessPwd } from 'pages/D00400_CardLessWithDrawChgPwd/api';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport {\r\n  FEIBButton,\r\n} from 'components/elements';\r\nimport Accordion from 'components/Accordion';\r\nimport { PasswordInputField } from 'components/Fields';\r\n\r\n/* Styles */\r\nimport { AuthCode } from 'utilities/TxnAuthCode';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { showAnimationModal } from 'utilities/MessageModal';\r\nimport CardLessATMWrapper from '../D00300_CardLessATM/D00300.style';\r\nimport { validationSchema } from './validationSchema';\r\n\r\nconst CardLessWithDrawChgPwd = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { handleSubmit, control } = useForm({\r\n    defaultValues: {\r\n      oldPassword: '',\r\n      newPassword: '',\r\n      newPasswordConfirm: '',\r\n    },\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n  // 設定無卡提款密碼\r\n  const changePwdHandler = async (param) => {\r\n    const {result} = await transactionAuth(AuthCode.D00400);\r\n    if (result) {\r\n      dispatch(setWaittingVisible(true));\r\n      const { code, message } = await changeCardlessPwd(param);\r\n      dispatch(setWaittingVisible(false));\r\n\r\n      showAnimationModal({\r\n        isSuccess: code === '0000',\r\n        successTitle: '設定成功',\r\n        errorTitle: '設定失敗',\r\n        successDesc: '您的無卡提款密碼變更成功囉！',\r\n        errorCode: code,\r\n        errorDesc: message,\r\n      });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    const param = {\r\n      oldPassword: data.oldPassword,\r\n      newPassword: data.newPassword,\r\n    };\r\n    changePwdHandler(param);\r\n  };\r\n\r\n  const renderForm = () => (\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n      <div>\r\n        <PasswordInputField\r\n          labelName=\"舊提款密碼\"\r\n          name=\"oldPassword\"\r\n          placeholder=\"請輸入舊提款密碼(4-12位數字)\"\r\n          control={control}\r\n        />\r\n        <PasswordInputField\r\n          labelName=\"新提款密碼\"\r\n          name=\"newPassword\"\r\n          placeholder=\"請輸入新提款密碼(4-12位數字)\"\r\n          control={control}\r\n        />\r\n        <PasswordInputField\r\n          labelName=\"確認新提款密碼\"\r\n          name=\"newPasswordConfirm\"\r\n          placeholder=\"請再輸入一次新提款密碼(4-12位數字)\"\r\n          control={control}\r\n        />\r\n        <Accordion space=\"both\">\r\n          <ul>\r\n            <li>\r\n              提醒您應注意密碼之設置及使用，不宜使用與您個人資料有關或具連續性、重複性或規則性之號碼為密碼，且不得將上開交易驗證資訊以任何方式使第三人知悉獲得以知悉，以確保交易安全。\r\n            </li>\r\n          </ul>\r\n        </Accordion>\r\n      </div>\r\n      <FEIBButton type=\"submit\">確認</FEIBButton>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <Layout title=\"變更無卡提款密碼\">\r\n      <CardLessATMWrapper>\r\n        {renderForm()}\r\n      </CardLessATMWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CardLessWithDrawChgPwd;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}