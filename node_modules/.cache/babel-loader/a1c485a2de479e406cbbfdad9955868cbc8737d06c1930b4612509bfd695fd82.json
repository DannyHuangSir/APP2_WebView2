{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from'react';import{useHistory}from'react-router';import{useDispatch}from'react-redux';import{closeFunc,startFunc}from'utilities/AppScriptProxy';import{showCustomPrompt}from'utilities/MessageModal';import Layout from'components/Layout/Layout';import{FuncID}from'utilities/FuncID';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{getStatus,getCardlessWdStatus}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";var CardLessATM=function CardLessATM(){var dispatch=useDispatch();var history=useHistory();// 確認金融卡卡況以及無卡提款狀態\nuseEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$getStatus,status,cwdStatus;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setWaittingVisible(true));// 確認金融卡是否已經開卡?\n_context.next=3;return getStatus();case 3:_yield$getStatus=_context.sent;status=_yield$getStatus.status;if(!(status!==4)){_context.next=10;break;}_context.next=8;return showCustomPrompt({message:'請先完成金融卡開卡以啟用無卡提款服務！',onOk:function onOk(){return startFunc(FuncID.S00700);},okContent:'立即開卡',onCancel:closeFunc,showCloseButton:true});case 8:_context.next=19;break;case 10:_context.next=12;return getCardlessWdStatus();case 12:cwdStatus=_context.sent;if(!(cwdStatus==='2')){_context.next=17;break;}history.push('/D003001');_context.next=19;break;case 17:_context.next=19;return showCustomPrompt({message:'愛方便的您, 怎能少了無卡提款服務, 快來啟用吧',onOk:function onOk(){return startFunc(FuncID.T00400);},showCloseButton:true});case 19:dispatch(setWaittingVisible(false));case 20:case\"end\":return _context.stop();}}},_callee);})),[]);return/*#__PURE__*/_jsx(Layout,{title:\"\\u7121\\u5361\\u63D0\\u6B3E\"});};export default CardLessATM;","map":{"version":3,"names":["useEffect","useHistory","useDispatch","closeFunc","startFunc","showCustomPrompt","Layout","FuncID","setWaittingVisible","getStatus","getCardlessWdStatus","CardLessATM","dispatch","history","status","message","onOk","S00700","okContent","onCancel","showCloseButton","cwdStatus","push","T00400"],"sources":["C:/Users/allen/git/app2-webview/src/pages/D00300_CardLessATM/D00300.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\nimport { closeFunc, startFunc } from 'utilities/AppScriptProxy';\r\nimport { showCustomPrompt } from 'utilities/MessageModal';\r\n\r\nimport Layout from 'components/Layout/Layout';\r\nimport { FuncID } from 'utilities/FuncID';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { getStatus, getCardlessWdStatus } from './api';\r\n\r\nconst CardLessATM = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  // 確認金融卡卡況以及無卡提款狀態\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n\r\n    // 確認金融卡是否已經開卡?\r\n    const { status } = await getStatus();\r\n    if (status !== 4) {\r\n      await showCustomPrompt({\r\n        message: '請先完成金融卡開卡以啟用無卡提款服務！',\r\n        onOk: () => startFunc(FuncID.S00700),\r\n        okContent: '立即開卡',\r\n        onCancel: closeFunc,\r\n        showCloseButton: true,\r\n      });\r\n    } else {\r\n    // 檢查無卡提款狀態; 0=未申請, 1=已申請未開通, 2=已開通, 3=已註銷, 4=已失效, 5=其他\r\n      const cwdStatus = await getCardlessWdStatus();\r\n      if (cwdStatus === '2') history.push('/D003001');\r\n      else {\r\n        await showCustomPrompt({\r\n          message: '愛方便的您, 怎能少了無卡提款服務, 快來啟用吧',\r\n          onOk: () => startFunc(FuncID.T00400),\r\n          showCloseButton: true,\r\n        });\r\n      }\r\n    }\r\n    dispatch(setWaittingVisible(false));\r\n  }, []);\r\n\r\n  return <Layout title=\"無卡提款\" />;\r\n};\r\n\r\nexport default CardLessATM;\r\n"],"mappings":"0PAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,SAAS,CAAEC,SAAS,KAAQ,0BAA0B,CAC/D,OAASC,gBAAgB,KAAQ,wBAAwB,CAEzD,MAAOC,OAAM,KAAM,0BAA0B,CAC7C,OAASC,MAAM,KAAQ,kBAAkB,CACzC,OAASC,kBAAkB,KAAQ,8BAA8B,CACjE,OAASC,SAAS,CAAEC,mBAAmB,KAAQ,OAAO,CAAC,2CAEvD,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxB,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAC9B,GAAMW,QAAO,CAAGZ,UAAU,EAAE,CAE5B;AACAD,SAAS,wEAAC,2KACRY,QAAQ,CAACJ,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAElC;AAAA,sBACyBC,UAAS,EAAE,uCAA5BK,MAAM,kBAANA,MAAM,MACVA,MAAM,GAAK,CAAC,iDACRT,iBAAgB,CAAC,CACrBU,OAAO,CAAE,qBAAqB,CAC9BC,IAAI,CAAE,sBAAMZ,UAAS,CAACG,MAAM,CAACU,MAAM,CAAC,GACpCC,SAAS,CAAE,MAAM,CACjBC,QAAQ,CAAEhB,SAAS,CACnBiB,eAAe,CAAE,IACnB,CAAC,CAAC,8DAGsBV,oBAAmB,EAAE,SAAvCW,SAAS,oBACXA,SAAS,GAAK,GAAG,2BAAER,OAAO,CAACS,IAAI,CAAC,UAAU,CAAC,CAAC,sDAExCjB,iBAAgB,CAAC,CACrBU,OAAO,CAAE,0BAA0B,CACnCC,IAAI,CAAE,sBAAMZ,UAAS,CAACG,MAAM,CAACgB,MAAM,CAAC,GACpCH,eAAe,CAAE,IACnB,CAAC,CAAC,SAGNR,QAAQ,CAACJ,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,uDACrC,GAAE,EAAE,CAAC,CAEN,mBAAO,KAAC,MAAM,EAAC,KAAK,CAAC,0BAAM,EAAG,CAChC,CAAC,CAED,cAAeG,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}