{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/**\r\n * /* eslint-disable no-unused-vars\r\n *\r\n * @format\r\n */import{useState,useEffect}from'react';import{useHistory}from'react-router';import{isEmployee,getAccountsList,getCcyList,getExchangePropertyList,getExchangeRateInfo}from'pages/E00100_Exchange/api';/* Elements */import{FEIBSelect,FEIBOption,FEIBInputLabel,FEIBInput,FEIBRadio,FEIBRadioLabel,FEIBBorderButton,FEIBButton,FEIBErrorMessage}from'components/elements';import Layout from'components/Layout/Layout';import{RadioGroup}from'@material-ui/core';import{Controller,useForm}from'react-hook-form';import*as yup from'yup';import{yupResolver}from'@hookform/resolvers/yup';import{numberToChinese,currencySymbolGenerator,toCurrency}from'utilities/Generator';// TODO: 移除\n// import Dialog from 'components/Dialog';\nimport Accordion from'components/Accordion';import InfoArea from'components/InfoArea';import{showCustomPrompt,showInfo}from'utilities/MessageModal';import{useDispatch}from'react-redux';import{setWaittingVisible}from'stores/reducers/ModalReducer';import E00100Rules from'./E00100_Rules';import E00100Notice from'./E00100_Notice';import E00100Table from'./E00100_Table';/* Styles */import ExchangeWrapper from'./E00100.style';/**\r\n * E00100 外幣換匯首頁\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var E00100=function E00100(){var _errors$outAccount,_errors$currency,_errors$inAccount,_errors$property,_errors$memo;var history=useHistory();var dispatch=useDispatch();/**\r\n   *- 資料驗證\r\n   */var schema=yup.object().shape({outAccount:yup.string().required('請選擇轉出帳號'),currency:yup.string().required('請選擇換匯幣別'),inAccount:yup.string().required('請選擇轉入帳號'),property:yup.string().required('請選擇匯款性質'),foreignBalance:yup.string().when('outType',{is:function is(val){return val==='1';},then:yup.string().required('請輸入金額'),otherwise:yup.string().notRequired()}),ntDollorBalance:yup.string().when('outType',{is:function is(val){return val==='2';},then:yup.string().required('請輸入金額'),otherwise:yup.string().notRequired()}),memo:yup.string()});var _useForm=useForm({defaultValues:{exchangeType:'1',outType:'1',foreignBalance:'',ntDollorBalance:''},resolver:yupResolver(schema),reValidateMode:'onBlur'}),handleSubmit=_useForm.handleSubmit,control=_useForm.control,errors=_useForm.formState.errors,watch=_useForm.watch,setValue=_useForm.setValue,getValues=_useForm.getValues;// TODO: 移除\n// const [openDialog, setOpenDialog] = useState(false);\n// const [dialogMessage, setDialogMessage] = useState('');\n// const [isCloseFunc, setIsCloseFunc] = useState(false);\n// const [showTableDialog, setShowTableDialog] = useState(false);\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),banker=_useState2[0],setBanker=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),accountsList=_useState4[0],setAccountsList=_useState4[1];// TODO: 移除\n// const [ntdAccountsList, setNtdAccountsList] = useState([]);\n// const [frgnAccountsList, setFrgnAccountsList] = useState([]);\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),currencyTypeList=_useState6[0],setCurrencyTypeList=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedCurrency=_useState8[0],setSelectedCurrency=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),propertiesList=_useState10[0],setPropertiesList=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),ntDollorStr=_useState12[0],setNtDollorStr=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),foreignDollorStr=_useState14[0],setForeignDollorStr=_useState14[1];// TODO: 移除\n// 設定訊息彈窗\n// const handleSetDialog = (msg) => {\n//   setDialogMessage(msg);\n//   setIsCloseFunc(isCloseFun);\n//   setOpenDialog(true);\n//   showInfo(msg);\n// };\n// TODO: 移除\n// 處理訊息彈窗關閉\n// const handleCloseDialog = () => {\n//   // setOpenDialog(false);\n//   if (isCloseFunc) {\n//     closeFunc();\n//   }\n// };\n// 查詢是否為行員\nvar getIsEmployee=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return isEmployee({});case 2:response=_context.sent;if(response.bankerCd){setBanker(response);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getIsEmployee(){return _ref.apply(this,arguments);};}();// 查詢所有帳戶資料\nvar fetchAccountsList=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,accounts;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAccountsList('MSF');case 2:response=_context2.sent;if((response===null||response===void 0?void 0:response.length)>0){accounts=response.filter(function(acct){return acct.transable;});// 要排除不可轉帳的帳號。\nsetAccountsList(accounts);setValue('outAccount',accounts[0].account);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchAccountsList(){return _ref2.apply(this,arguments);};}();// 取得可交易幣別清單\nvar fetchCcyList=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getCcyList({currency:''});case 2:response=_context3.sent;if(response!==null&&response!==void 0&&response.length){setCurrencyTypeList(response);setValue('currency',response[0].Currency);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchCcyList(){return _ref3.apply(this,arguments);};}();// 取得交易性質列表\nvar getEchgPropertyList=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(trnsType,init){var response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getExchangePropertyList({trnsType:trnsType,action:'1'});case 2:response=_context4.sent;if(Array.isArray(response)){setPropertiesList(response);setValue('property',response[0].leglCode);if(init){fetchAccountsList();// getNtdAccountsList();\n// getFcAccountsList();\nfetchCcyList();getIsEmployee();}}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function getEchgPropertyList(_x,_x2){return _ref4.apply(this,arguments);};}();var handleBalanceChange=function handleBalanceChange(event){var targetName=event.target.name;var targetValue=event.target.value;setValue(targetName,targetValue);if(targetName==='foreignBalance'){if(!targetValue){setForeignDollorStr('');}else{setForeignDollorStr(\"\".concat(currencySymbolGenerator(selectedCurrency===null||selectedCurrency===void 0?void 0:selectedCurrency.ccyCd)).concat(targetValue).concat(numberToChinese(targetValue)));}}if(targetName==='ntDollorBalance'){if(!targetValue){setNtDollorStr('');}else{setNtDollorStr(\"$\".concat(targetValue).concat(numberToChinese(targetValue)));}}};// TODO: 移除\n// const handleTableToggle = () => {\n//   setShowTableDialog((prev) => !prev);\n// };\n// 換匯種類變更\nvar handleExchangeTypeChange=function handleExchangeTypeChange(event){setValue('exchangeType',event.target.value);getEchgPropertyList(event.target.value);var _getValues=getValues(),inAccount=_getValues.inAccount,outAccount=_getValues.outAccount;setValue('outAccount',inAccount);setValue('inAccount',outAccount);};// 取得帳戶餘額\nvar getAmount=function getAmount(currency){var _accountsList$find,_accountsList$find$de;return((_accountsList$find=accountsList.find(function(item){return item.account===watch(currency==='TWD'?'outAccount':'inAccount');}))===null||_accountsList$find===void 0?void 0:(_accountsList$find$de=_accountsList$find.details.find(function(item){return item.currency===selectedCurrency.ccyCd;}))===null||_accountsList$find$de===void 0?void 0:_accountsList$find$de.balance)||'0';};// TODO: 移除\n// // 取得台幣帳戶餘額\n// const getNTDAmt = () => ntdAccountsList.find((item) => (\n//   watch('exchangeType') === '1' ? item.accountId === watch('outAccount') : item.accountId === watch('inAccount')\n// ))?.accountBalx;\n// TODO: 移除\n// // 取得外幣帳戶餘額\n// const getFrgnAmt = () => frgnAccountsList.find((item) => (\n//   watch('exchangeType') === '1' ? item.accountId === watch('inAccount') : item.accountId === watch('outAccount')\n// ))?.details.find((item) => item.ccyCd === selectedCurrency.ccyCd)?.acctBalx || '0';\n// 檢查是否超出餘額\nvar checkOverAmt=function checkOverAmt(data){var amt=Number(data);// 判斷台轉外, 外轉台\nvar exchangeType=watch('exchangeType')==='1'?'n2f':'f2n';// 判斷幣別\nvar isNTD=watch('outType')==='2';var ntAmt=getAmount('TWD');var frgnAmt=Number(getAmount(selectedCurrency.ccyCd).replace(/,/gi,''));// 如果是台轉外，檢查是否超過台幣餘額\nif(exchangeType==='n2f'){if(isNTD){return amt>ntAmt;}if(!isNTD){return amt>ntAmt/selectedCurrency.sellRate;}}// 如果是外轉台，檢查是否超過外幣餘額\nif(exchangeType==='f2n'){if(isNTD){return amt/selectedCurrency.sellRate>frgnAmt;}if(!isNTD){return amt>frgnAmt;}}return true;};// 取得換匯資訊與密文\nvar onSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(data){var exchangeType,foreignBalance,ntDollorBalance,inAccount,memo,outAccount,outType,property,trfAmt,checkOverResult,param,response,confirmData;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:exchangeType=data.exchangeType,foreignBalance=data.foreignBalance,ntDollorBalance=data.ntDollorBalance,inAccount=data.inAccount,memo=data.memo,outAccount=data.outAccount,outType=data.outType,property=data.property;trfAmt=outType==='1'?foreignBalance:ntDollorBalance;checkOverResult=checkOverAmt(trfAmt);if(!checkOverResult){_context5.next=7;break;}_context5.next=6;return showInfo('您輸入的金額已超過轉出帳號的餘額');case 6:return _context5.abrupt(\"return\");case 7:// switchLoading(true);\ndispatch(setWaittingVisible(true));param={trnsType:exchangeType,outAcct:outAccount,inAcct:inAccount,ccyCd:selectedCurrency.ccyCd,trfCcyCd:outType==='1'?selectedCurrency.ccyCd:'NTD',trfAmt:trfAmt,bankerCd:(banker===null||banker===void 0?void 0:banker.bankerCd)||''};_context5.next=11;return getExchangeRateInfo(param);case 11:response=_context5.sent;dispatch(setWaittingVisible(false));// switchLoading(false);\nif(response.message){_context5.next=18;break;}confirmData=_objectSpread(_objectSpread({},response),{},{memo:memo,leglCode:property,leglDesc:propertiesList.find(function(item){return item.leglCode===property;}).leglDesc,outAccountAmount:exchangeType==='1'?getAmount('TWD'):Number(getAmount(selectedCurrency.ccyCd).replace(/,/gi,''))});history.push('/E001001',_objectSpread({},confirmData));_context5.next=20;break;case 18:_context5.next=20;return showInfo(response.message);case 20:case\"end\":return _context5.stop();}}},_callee5);}));return function onSubmit(_x3){return _ref5.apply(this,arguments);};}();var generateAvailibleAmount=function generateAvailibleAmount(){var ntAmt=getAmount('TWD');var frgnAmt=Number(getAmount(selectedCurrency.ccyCd).replace(/,/gi,''));if(watch('exchangeType')==='1'){return toCurrency(Math.round(ntAmt/selectedCurrency.sellRate)||0);}return toCurrency(Math.round(frgnAmt*selectedCurrency.sellRate)||0);};// TODO: 移除\n// const ExchangeTableDialog = () => (\n//   <Dialog\n//     title=\"匯率\"\n//     isOpen={showTableDialog}\n//     onClose={handleTableToggle}\n//     content={<ExchangeTable />}\n//     action={<FEIBButton onClick={handleTableToggle}>確定</FEIBButton>}\n//   />\n// );\n// const renderDialog = () => (\n//   <Dialog\n//     isOpen={openDialog}\n//     onClose={handleCloseDialog}\n//     content={<p>{dialogMessage}</p>}\n//     action={<FEIBButton onClick={handleCloseDialog}>確認</FEIBButton>}\n//   />\n// );\n/**\r\n   * 列出帳戶清單。\r\n   * @param {*} showTwdAccount 若為 true 則列出台幣帳戶清單，反之則列出外幣帳戶清單。\r\n   */var renderAccountOption=function renderAccountOption(showTwdAccount){return accountsList.filter(function(acct){return acct.details.find(function(item){return showTwdAccount&&item.currency==='TWD';});}).map(function(item){return/*#__PURE__*/_jsx(FEIBOption,{value:item.account,children:item.account},item.account);});};var renderTrnsTypeList=function renderTrnsTypeList(data){return data.map(function(item){return/*#__PURE__*/_jsx(FEIBOption,{value:item.leglCode,children:item.leglDesc},item.leglCode);});};var renderNTBlance=function renderNTBlance(){return/*#__PURE__*/_jsxs(FEIBErrorMessage,{className:\"balance\",children:[\"\\u53EF\\u7528\\u9918\\u984D NTD\\xA0\",toCurrency(getAmount('TWD')||0)]});};var renderFrgnBalance=function renderFrgnBalance(){return/*#__PURE__*/_jsxs(FEIBErrorMessage,{className:\"balance\",children:[\"\\u53EF\\u7528\\u9918\\u984D \\xA0\",selectedCurrency.ccyCd,\"\\xA0\",getAmount(selectedCurrency.ccyCd)]});};// TODO: 移除\n// useEffect(() => {\n//   setValue('exchangeType', '1');\n//   setValue('outType', '1');\n//   setValue('foreignBalance', '');\n//   setValue('ntDollorBalance', '');\n// }, []);\nuseEffect(function(){getEchgPropertyList('1',true);},[]);useEffect(function(){var selCcy=currencyTypeList.find(function(item){return(item===null||item===void 0?void 0:item.Currency)===watch('currency');});if(selCcy){setSelectedCurrency(selCcy);}},[watch('currency')]);return/*#__PURE__*/_jsx(Layout,{title:\"\\u5916\\u5E63\\u63DB\\u532F\",children:/*#__PURE__*/_jsxs(ExchangeWrapper,{style:{padding:'2.4rem 1.6rem 2.4rem 1.6rem'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"borderBtnContainer\",children:/*#__PURE__*/_jsx(FEIBBorderButton,{className:\"customSize\",type:\"button\",onClick:function onClick(){return showCustomPrompt({title:'匯率',message:/*#__PURE__*/_jsx(E00100Table,{}),okContent:'確定'});},children:\"\\u5916\\u532F\\u532F\\u7387\\u67E5\\u8A62\"})}),/*#__PURE__*/_jsx(\"form\",{autoComplete:\"off\",onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(FEIBInputLabel,{className:\"exchangeTypeLabel\",children:\"\\u63DB\\u532F\\u7A2E\\u985E\"}),/*#__PURE__*/_jsx(Controller,{name:\"exchangeType\",control:control,defaultValue:\"1\",render:function render(_ref6){var field=_ref6.field;return/*#__PURE__*/_jsxs(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":\"\\u63DB\\u532F\\u7A2E\\u985E\",id:\"exchangeType\",name:\"exchangeType\",defaultValue:\"1\",style:{flexDirection:'row',marginBottom:'.6rem'},onChange:handleExchangeTypeChange,children:[/*#__PURE__*/_jsx(FEIBRadioLabel,{value:\"1\",control:/*#__PURE__*/_jsx(FEIBRadio,{}),label:\"\\u65B0\\u81FA\\u5E63\\u8F49\\u5916\\u5E63\"}),/*#__PURE__*/_jsx(FEIBRadioLabel,{value:\"2\",control:/*#__PURE__*/_jsx(FEIBRadio,{}),label:\"\\u5916\\u5E63\\u8F49\\u65B0\\u81FA\\u5E63\"})]}));}}),/*#__PURE__*/_jsx(FEIBInputLabel,{children:\"\\u8F49\\u51FA\\u5E33\\u865F\"}),/*#__PURE__*/_jsx(Controller,{name:\"outAccount\",defaultValue:\"\",control:control,render:function render(_ref7){var field=_ref7.field;return/*#__PURE__*/_jsx(FEIBSelect,_objectSpread(_objectSpread({},field),{},{id:\"outAccount\",name:\"outAccount\",error:!!errors.outAccount,children:renderAccountOption(watch('exchangeType')==='1')}));}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$outAccount=errors.outAccount)===null||_errors$outAccount===void 0?void 0:_errors$outAccount.message}),watch('exchangeType')==='1'?renderNTBlance():renderFrgnBalance(),/*#__PURE__*/_jsx(FEIBInputLabel,{children:\"\\u63DB\\u532F\\u5E63\\u5225\"}),/*#__PURE__*/_jsx(Controller,{name:\"currency\",defaultValue:\"\",control:control,render:function render(_ref8){var field=_ref8.field;return/*#__PURE__*/_jsx(FEIBSelect,_objectSpread(_objectSpread({},field),{},{id:\"currency\",name:\"currency\",error:!!errors.currency,children:currencyTypeList.map(function(item){return/*#__PURE__*/_jsxs(FEIBOption,{value:item===null||item===void 0?void 0:item.Currency,children:[item===null||item===void 0?void 0:item.CurrencyName,item===null||item===void 0?void 0:item.Currency]},item===null||item===void 0?void 0:item.Currency);})}));}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$currency=errors.currency)===null||_errors$currency===void 0?void 0:_errors$currency.message}),/*#__PURE__*/_jsxs(FEIBErrorMessage,{className:\"balance\",children:[\"\\u9810\\u4F30\\u53EF\\u63DB \\xA0\",watch('exchangeType')==='1'?selectedCurrency.ccyCd:'NTD',\"\\xA0\",generateAvailibleAmount(),\"\\uFF08\\u5BE6\\u969B\\u91D1\\u984D\\u4EE5\\u4EA4\\u6613\\u7D50\\u679C\\u70BA\\u6E96\\uFF09\"]}),/*#__PURE__*/_jsx(FEIBInputLabel,{children:\"\\u8F49\\u5165\\u5E33\\u865F\"}),/*#__PURE__*/_jsx(Controller,{name:\"inAccount\",defaultValue:\"\",control:control,render:function render(_ref9){var field=_ref9.field;return/*#__PURE__*/_jsx(FEIBSelect,_objectSpread(_objectSpread({},field),{},{id:\"inAccount\",name:\"inAccount\",error:!!errors.inAccount,children:renderAccountOption(watch('exchangeType')==='2')}));}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$inAccount=errors.inAccount)===null||_errors$inAccount===void 0?void 0:_errors$inAccount.message}),watch('exchangeType')==='1'?renderFrgnBalance():renderNTBlance(),/*#__PURE__*/_jsx(Controller,{name:\"outType\",control:control,defaultValue:\"1\",render:function render(_ref10){var _errors$foreignBalanc,_errors$ntDollorBalan;var field=_ref10.field;return/*#__PURE__*/_jsxs(RadioGroup,_objectSpread(_objectSpread({},field),{},{id:\"outType\",name:\"outType\",defaultValue:\"1\",children:[/*#__PURE__*/_jsx(FEIBRadioLabel,{className:\"outTypeRadioLabel\",value:\"1\",control:/*#__PURE__*/_jsx(FEIBRadio,{}),label:\"\\u5E0C\\u671B\".concat(watch('exchangeType')==='2'?'轉出':'轉入').concat((selectedCurrency===null||selectedCurrency===void 0?void 0:selectedCurrency.ccyName)||'')}),/*#__PURE__*/_jsx(Controller,{name:\"foreignBalance\",defaultValue:\"\",control:control,render:function render(_ref11){var balanceField=_ref11.balanceField;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FEIBInput,_objectSpread(_objectSpread({},balanceField),{},{type:\"number\",inputMode:\"numeric\",id:\"foreignBalance\",name:\"foreignBalance\",placeholder:\"\\u8ACB\\u8F38\\u5165\".concat(watch('exchangeType')==='2'?'轉出':'轉入',\"\\u91D1\\u984D\"),error:!!errors.foreignBalance,disabled:watch('outType')!=='1',onChange:handleBalanceChange,inputProps:{maxLength:9,autoComplete:'off'}})),/*#__PURE__*/_jsx(\"div\",{className:\"balanceLayout\",children:foreignDollorStr})]});}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$foreignBalanc=errors.foreignBalance)===null||_errors$foreignBalanc===void 0?void 0:_errors$foreignBalanc.message}),/*#__PURE__*/_jsx(FEIBRadioLabel,{className:\"outTypeRadioLabel\",value:\"2\",control:/*#__PURE__*/_jsx(FEIBRadio,{}),label:\"\\u5E0C\\u671B\".concat(watch('exchangeType')==='2'?'轉入':'轉出',\"\\u65B0\\u81FA\\u5E63\")}),/*#__PURE__*/_jsx(Controller,{name:\"ntDollorBalance\",defaultValue:\"\",control:control,render:function render(_ref12){var balanceField=_ref12.balanceField;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FEIBInput,_objectSpread(_objectSpread({},balanceField),{},{autoComplete:\"off\",type:\"number\",inputMode:\"numeric\",id:\"ntDollorBalance\",name:\"ntDollorBalance\",placeholder:\"\\u8ACB\\u8F38\\u5165\".concat(watch('exchangeType')==='2'?'轉入':'轉出',\"\\u91D1\\u984D\"),error:!!errors.ntDollorBalance,disabled:watch('outType')!=='2',onChange:handleBalanceChange,inputProps:{maxLength:9,autoComplete:'off'}})),/*#__PURE__*/_jsx(\"div\",{className:\"balanceLayout\",children:ntDollorStr})]});}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$ntDollorBalan=errors.ntDollorBalance)===null||_errors$ntDollorBalan===void 0?void 0:_errors$ntDollorBalan.message})]}));}}),/*#__PURE__*/_jsx(FEIBInputLabel,{children:\"\\u532F\\u6B3E\\u6027\\u8CEA\"}),/*#__PURE__*/_jsx(Controller,{name:\"property\",defaultValue:\"\",control:control,render:function render(_ref13){var field=_ref13.field;return/*#__PURE__*/_jsx(FEIBSelect,_objectSpread(_objectSpread({},field),{},{id:\"property\",name:\"property\",error:!!errors.property,children:renderTrnsTypeList(propertiesList)}));}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$property=errors.property)===null||_errors$property===void 0?void 0:_errors$property.message}),/*#__PURE__*/_jsx(FEIBInputLabel,{children:\"\\u5099\\u8A3B\"}),/*#__PURE__*/_jsx(Controller,{name:\"memo\",defaultValue:\"\",control:control,render:function render(_ref14){var field=_ref14.field;return/*#__PURE__*/_jsx(FEIBInput,_objectSpread(_objectSpread({},field),{},{autoComplete:\"off\",type:\"text\",id:\"memo\",name:\"memo\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5099\\u8A3B\",error:!!errors.memo}));}}),/*#__PURE__*/_jsx(FEIBErrorMessage,{children:(_errors$memo=errors.memo)===null||_errors$memo===void 0?void 0:_errors$memo.message}),/*#__PURE__*/_jsx(Accordion,{title:\"\\u5916\\u5E63\\u63DB\\u532F\\u898F\\u7BC4\",space:\"bottom\",children:/*#__PURE__*/_jsx(E00100Rules,{})}),/*#__PURE__*/_jsx(Accordion,{space:\"bottom\",children:/*#__PURE__*/_jsx(E00100Notice,{})}),banker.bankerCd&&/*#__PURE__*/_jsx(InfoArea,{children:\"\\u63DB\\u532F\\u532F\\u7387\\u5C07\\u4F9D\\u64DA\\u672C\\u884C\\u54E1\\u5DE5\\u512A\\u60E0\\u532F\\u7387\\u9032\\u884C\\u4EA4\\u6613\"}),/*#__PURE__*/_jsx(\"div\",{className:\"submitBtn\",children:/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u540C\\u610F\\u689D\\u6B3E\\u4E26\\u78BA\\u8A8D\"})})]})})]})});};export default E00100;","map":{"version":3,"names":["useState","useEffect","useHistory","isEmployee","getAccountsList","getCcyList","getExchangePropertyList","getExchangeRateInfo","FEIBSelect","FEIBOption","FEIBInputLabel","FEIBInput","FEIBRadio","FEIBRadioLabel","FEIBBorderButton","FEIBButton","FEIBErrorMessage","Layout","RadioGroup","Controller","useForm","yup","yupResolver","numberToChinese","currencySymbolGenerator","toCurrency","Accordion","InfoArea","showCustomPrompt","showInfo","useDispatch","setWaittingVisible","E00100Rules","E00100Notice","E00100Table","ExchangeWrapper","E00100","history","dispatch","schema","object","shape","outAccount","string","required","currency","inAccount","property","foreignBalance","when","is","val","then","otherwise","notRequired","ntDollorBalance","memo","defaultValues","exchangeType","outType","resolver","reValidateMode","handleSubmit","control","errors","formState","watch","setValue","getValues","banker","setBanker","accountsList","setAccountsList","currencyTypeList","setCurrencyTypeList","selectedCurrency","setSelectedCurrency","propertiesList","setPropertiesList","ntDollorStr","setNtDollorStr","foreignDollorStr","setForeignDollorStr","getIsEmployee","response","bankerCd","fetchAccountsList","length","accounts","filter","acct","transable","account","fetchCcyList","Currency","getEchgPropertyList","trnsType","init","action","Array","isArray","leglCode","handleBalanceChange","event","targetName","target","name","targetValue","value","ccyCd","handleExchangeTypeChange","getAmount","find","item","details","balance","checkOverAmt","data","amt","Number","isNTD","ntAmt","frgnAmt","replace","sellRate","onSubmit","trfAmt","checkOverResult","param","outAcct","inAcct","trfCcyCd","message","confirmData","leglDesc","outAccountAmount","push","generateAvailibleAmount","Math","round","renderAccountOption","showTwdAccount","map","renderTrnsTypeList","renderNTBlance","renderFrgnBalance","selCcy","padding","title","okContent","field","flexDirection","marginBottom","CurrencyName","ccyName","balanceField","maxLength","autoComplete"],"sources":["C:/Users/allen/git/app2-webview/src/pages/E00100_Exchange/E00100.js"],"sourcesContent":["/**\r\n * /* eslint-disable no-unused-vars\r\n *\r\n * @format\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport {\r\n  isEmployee,\r\n  getAccountsList,\r\n  getCcyList,\r\n  getExchangePropertyList,\r\n  getExchangeRateInfo,\r\n} from 'pages/E00100_Exchange/api';\r\n\r\n/* Elements */\r\nimport {\r\n  FEIBSelect,\r\n  FEIBOption,\r\n  FEIBInputLabel,\r\n  FEIBInput,\r\n  FEIBRadio,\r\n  FEIBRadioLabel,\r\n  FEIBBorderButton,\r\n  FEIBButton,\r\n  FEIBErrorMessage,\r\n} from 'components/elements';\r\nimport Layout from 'components/Layout/Layout';\r\nimport { RadioGroup } from '@material-ui/core';\r\nimport { Controller, useForm } from 'react-hook-form';\r\nimport * as yup from 'yup';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { numberToChinese, currencySymbolGenerator, toCurrency } from 'utilities/Generator';\r\n// TODO: 移除\r\n// import Dialog from 'components/Dialog';\r\nimport Accordion from 'components/Accordion';\r\nimport InfoArea from 'components/InfoArea';\r\nimport { showCustomPrompt, showInfo } from 'utilities/MessageModal';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport E00100Rules from './E00100_Rules';\r\nimport E00100Notice from './E00100_Notice';\r\nimport E00100Table from './E00100_Table';\r\n\r\n/* Styles */\r\nimport ExchangeWrapper from './E00100.style';\r\n\r\n/**\r\n * E00100 外幣換匯首頁\r\n */\r\n\r\nconst E00100 = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  /**\r\n   *- 資料驗證\r\n   */\r\n  const schema = yup.object().shape({\r\n    outAccount: yup.string().required('請選擇轉出帳號'),\r\n    currency: yup.string().required('請選擇換匯幣別'),\r\n    inAccount: yup.string().required('請選擇轉入帳號'),\r\n    property: yup.string().required('請選擇匯款性質'),\r\n    foreignBalance: yup.string().when('outType', {\r\n      is: (val) => val === '1',\r\n      then: yup.string().required('請輸入金額'),\r\n      otherwise: yup.string().notRequired(),\r\n    }),\r\n    ntDollorBalance: yup.string().when('outType', {\r\n      is: (val) => val === '2',\r\n      then: yup.string().required('請輸入金額'),\r\n      otherwise: yup.string().notRequired(),\r\n    }),\r\n    memo: yup.string(),\r\n  });\r\n  const {\r\n    handleSubmit,\r\n    control,\r\n    formState: { errors },\r\n    watch,\r\n    setValue,\r\n    getValues,\r\n  } = useForm({\r\n    defaultValues: {\r\n      exchangeType: '1',\r\n      outType: '1',\r\n      foreignBalance: '',\r\n      ntDollorBalance: '',\r\n    },\r\n    resolver: yupResolver(schema),\r\n    reValidateMode: 'onBlur',\r\n  });\r\n\r\n  // TODO: 移除\r\n  // const [openDialog, setOpenDialog] = useState(false);\r\n  // const [dialogMessage, setDialogMessage] = useState('');\r\n  // const [isCloseFunc, setIsCloseFunc] = useState(false);\r\n  // const [showTableDialog, setShowTableDialog] = useState(false);\r\n  const [banker, setBanker] = useState({});\r\n  const [accountsList, setAccountsList] = useState([]);\r\n  // TODO: 移除\r\n  // const [ntdAccountsList, setNtdAccountsList] = useState([]);\r\n  // const [frgnAccountsList, setFrgnAccountsList] = useState([]);\r\n  const [currencyTypeList, setCurrencyTypeList] = useState([]);\r\n  const [selectedCurrency, setSelectedCurrency] = useState({});\r\n  const [propertiesList, setPropertiesList] = useState([]);\r\n  const [ntDollorStr, setNtDollorStr] = useState('');\r\n  const [foreignDollorStr, setForeignDollorStr] = useState('');\r\n\r\n  // TODO: 移除\r\n  // 設定訊息彈窗\r\n  // const handleSetDialog = (msg) => {\r\n  //   setDialogMessage(msg);\r\n  //   setIsCloseFunc(isCloseFun);\r\n  //   setOpenDialog(true);\r\n  //   showInfo(msg);\r\n  // };\r\n\r\n  // TODO: 移除\r\n  // 處理訊息彈窗關閉\r\n  // const handleCloseDialog = () => {\r\n  //   // setOpenDialog(false);\r\n  //   if (isCloseFunc) {\r\n  //     closeFunc();\r\n  //   }\r\n  // };\r\n\r\n  // 查詢是否為行員\r\n  const getIsEmployee = async () => {\r\n    const response = await isEmployee({});\r\n    if (response.bankerCd) {\r\n      setBanker(response);\r\n    }\r\n  };\r\n\r\n  // 查詢所有帳戶資料\r\n  const fetchAccountsList = async () => {\r\n    const response = await getAccountsList('MSF');\r\n    if (response?.length > 0) {\r\n      const accounts = response.filter((acct) => acct.transable); // 要排除不可轉帳的帳號。\r\n      setAccountsList(accounts);\r\n      setValue('outAccount', accounts[0].account);\r\n    }\r\n  };\r\n\r\n  // 取得可交易幣別清單\r\n  const fetchCcyList = async () => {\r\n    const response = await getCcyList({ currency: '' });\r\n    if (response?.length) {\r\n      setCurrencyTypeList(response);\r\n      setValue('currency', response[0].Currency);\r\n    }\r\n  };\r\n\r\n  // 取得交易性質列表\r\n  const getEchgPropertyList = async (trnsType, init) => {\r\n    const response = await getExchangePropertyList({\r\n      trnsType,\r\n      action: '1',\r\n    });\r\n\r\n    if (Array.isArray(response)) {\r\n      setPropertiesList(response);\r\n      setValue('property', response[0].leglCode);\r\n      if (init) {\r\n        fetchAccountsList();\r\n        // getNtdAccountsList();\r\n        // getFcAccountsList();\r\n        fetchCcyList();\r\n        getIsEmployee();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleBalanceChange = (event) => {\r\n    const targetName = event.target.name;\r\n    const targetValue = event.target.value;\r\n    setValue(targetName, targetValue);\r\n    if (targetName === 'foreignBalance') {\r\n      if (!targetValue) {\r\n        setForeignDollorStr('');\r\n      } else {\r\n        setForeignDollorStr(\r\n          `${currencySymbolGenerator(selectedCurrency?.ccyCd)}${targetValue}${numberToChinese(\r\n            targetValue,\r\n          )}`,\r\n        );\r\n      }\r\n    }\r\n    if (targetName === 'ntDollorBalance') {\r\n      if (!targetValue) {\r\n        setNtDollorStr('');\r\n      } else {\r\n        setNtDollorStr(`$${targetValue}${numberToChinese(targetValue)}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  // TODO: 移除\r\n  // const handleTableToggle = () => {\r\n  //   setShowTableDialog((prev) => !prev);\r\n  // };\r\n\r\n  // 換匯種類變更\r\n  const handleExchangeTypeChange = (event) => {\r\n    setValue('exchangeType', event.target.value);\r\n    getEchgPropertyList(event.target.value);\r\n    const { inAccount, outAccount } = getValues();\r\n    setValue('outAccount', inAccount);\r\n    setValue('inAccount', outAccount);\r\n  };\r\n\r\n  // 取得帳戶餘額\r\n  const getAmount = (currency) => accountsList.find((item) => (\r\n    item.account === watch((currency === 'TWD') ? 'outAccount' : 'inAccount')\r\n  ))?.details.find((item) => (item.currency === selectedCurrency.ccyCd))?.balance || '0';\r\n\r\n  // TODO: 移除\r\n  // // 取得台幣帳戶餘額\r\n  // const getNTDAmt = () => ntdAccountsList.find((item) => (\r\n  //   watch('exchangeType') === '1' ? item.accountId === watch('outAccount') : item.accountId === watch('inAccount')\r\n  // ))?.accountBalx;\r\n\r\n  // TODO: 移除\r\n  // // 取得外幣帳戶餘額\r\n  // const getFrgnAmt = () => frgnAccountsList.find((item) => (\r\n  //   watch('exchangeType') === '1' ? item.accountId === watch('inAccount') : item.accountId === watch('outAccount')\r\n  // ))?.details.find((item) => item.ccyCd === selectedCurrency.ccyCd)?.acctBalx || '0';\r\n\r\n  // 檢查是否超出餘額\r\n  const checkOverAmt = (data) => {\r\n    const amt = Number(data);\r\n    // 判斷台轉外, 外轉台\r\n    const exchangeType = watch('exchangeType') === '1' ? 'n2f' : 'f2n';\r\n    // 判斷幣別\r\n    const isNTD = watch('outType') === '2';\r\n    const ntAmt = getAmount('TWD');\r\n    const frgnAmt = Number(getAmount(selectedCurrency.ccyCd).replace(/,/gi, ''));\r\n    // 如果是台轉外，檢查是否超過台幣餘額\r\n    if (exchangeType === 'n2f') {\r\n      if (isNTD) {\r\n        return amt > ntAmt;\r\n      }\r\n      if (!isNTD) {\r\n        return amt > ntAmt / selectedCurrency.sellRate;\r\n      }\r\n    }\r\n    // 如果是外轉台，檢查是否超過外幣餘額\r\n    if (exchangeType === 'f2n') {\r\n      if (isNTD) {\r\n        return amt / selectedCurrency.sellRate > frgnAmt;\r\n      }\r\n      if (!isNTD) {\r\n        return amt > frgnAmt;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // 取得換匯資訊與密文\r\n  const onSubmit = async (data) => {\r\n    const {\r\n      // currency,\r\n      exchangeType,\r\n      foreignBalance,\r\n      ntDollorBalance,\r\n      inAccount,\r\n      memo,\r\n      outAccount,\r\n      outType,\r\n      property,\r\n    } = data;\r\n    const trfAmt = outType === '1' ? foreignBalance : ntDollorBalance;\r\n    const checkOverResult = checkOverAmt(trfAmt);\r\n    if (checkOverResult) {\r\n      await showInfo('您輸入的金額已超過轉出帳號的餘額');\r\n      // TODO: 移除\r\n      // handleSetDialog('您輸入的金額已超過轉出帳號的餘額');\r\n      return;\r\n    }\r\n    // switchLoading(true);\r\n    dispatch(setWaittingVisible(true));\r\n    const param = {\r\n      trnsType: exchangeType,\r\n      outAcct: outAccount,\r\n      inAcct: inAccount,\r\n      ccyCd: selectedCurrency.ccyCd,\r\n      trfCcyCd: outType === '1' ? selectedCurrency.ccyCd : 'NTD',\r\n      trfAmt,\r\n      bankerCd: banker?.bankerCd || '',\r\n    };\r\n    const response = await getExchangeRateInfo(param);\r\n    dispatch(setWaittingVisible(false));\r\n    // switchLoading(false);\r\n    if (!response.message) {\r\n      const confirmData = {\r\n        ...response,\r\n        memo,\r\n        leglCode: property,\r\n        leglDesc: propertiesList.find((item) => item.leglCode === property).leglDesc,\r\n        outAccountAmount:\r\n          exchangeType === '1'\r\n            ? getAmount('TWD')\r\n            : Number(getAmount(selectedCurrency.ccyCd).replace(/,/gi, '')),\r\n      };\r\n      history.push('/E001001', { ...confirmData });\r\n    } else {\r\n      // TODO: 移除\r\n      // handleSetDialog(response.message);\r\n      await showInfo(response.message);\r\n    }\r\n  };\r\n\r\n  const generateAvailibleAmount = () => {\r\n    const ntAmt = getAmount('TWD');\r\n    const frgnAmt = Number(getAmount(selectedCurrency.ccyCd).replace(/,/gi, ''));\r\n    if (watch('exchangeType') === '1') {\r\n      return toCurrency(Math.round(ntAmt / selectedCurrency.sellRate) || 0);\r\n    }\r\n    return toCurrency(Math.round(frgnAmt * selectedCurrency.sellRate) || 0);\r\n  };\r\n\r\n  // TODO: 移除\r\n  // const ExchangeTableDialog = () => (\r\n  //   <Dialog\r\n  //     title=\"匯率\"\r\n  //     isOpen={showTableDialog}\r\n  //     onClose={handleTableToggle}\r\n  //     content={<ExchangeTable />}\r\n  //     action={<FEIBButton onClick={handleTableToggle}>確定</FEIBButton>}\r\n  //   />\r\n  // );\r\n\r\n  // const renderDialog = () => (\r\n  //   <Dialog\r\n  //     isOpen={openDialog}\r\n  //     onClose={handleCloseDialog}\r\n  //     content={<p>{dialogMessage}</p>}\r\n  //     action={<FEIBButton onClick={handleCloseDialog}>確認</FEIBButton>}\r\n  //   />\r\n  // );\r\n\r\n  /**\r\n   * 列出帳戶清單。\r\n   * @param {*} showTwdAccount 若為 true 則列出台幣帳戶清單，反之則列出外幣帳戶清單。\r\n   */\r\n  const renderAccountOption = (showTwdAccount) => (\r\n    accountsList\r\n      .filter((acct) => acct.details.find((item) => showTwdAccount && item.currency === 'TWD'))\r\n      .map((item) => (\r\n        <FEIBOption key={item.account} value={item.account}>{item.account}</FEIBOption>\r\n      ))\r\n  );\r\n\r\n  const renderTrnsTypeList = (data) => (\r\n    data.map((item) => (\r\n      <FEIBOption key={item.leglCode} value={item.leglCode}>{item.leglDesc}</FEIBOption>\r\n    ))\r\n  );\r\n\r\n  const renderNTBlance = () => (\r\n    <FEIBErrorMessage className=\"balance\">\r\n      可用餘額 NTD&nbsp;\r\n      {toCurrency(getAmount('TWD') || 0)}\r\n    </FEIBErrorMessage>\r\n  );\r\n\r\n  const renderFrgnBalance = () => (\r\n    <FEIBErrorMessage className=\"balance\">\r\n      可用餘額 &nbsp;\r\n      {selectedCurrency.ccyCd}\r\n      &nbsp;\r\n      {getAmount(selectedCurrency.ccyCd)}\r\n    </FEIBErrorMessage>\r\n  );\r\n\r\n  // TODO: 移除\r\n  // useEffect(() => {\r\n  //   setValue('exchangeType', '1');\r\n  //   setValue('outType', '1');\r\n  //   setValue('foreignBalance', '');\r\n  //   setValue('ntDollorBalance', '');\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    getEchgPropertyList('1', true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const selCcy = currencyTypeList.find((item) => item?.Currency === watch('currency'));\r\n    if (selCcy) {\r\n      setSelectedCurrency(selCcy);\r\n    }\r\n  }, [watch('currency')]);\r\n\r\n  return (\r\n    <Layout title=\"外幣換匯\">\r\n      <ExchangeWrapper style={{ padding: '2.4rem 1.6rem 2.4rem 1.6rem' }}>\r\n        <div className=\"borderBtnContainer\">\r\n          <FEIBBorderButton\r\n            className=\"customSize\"\r\n            type=\"button\"\r\n            onClick={() => showCustomPrompt({\r\n              title: '匯率',\r\n              message: <E00100Table />,\r\n              okContent: '確定',\r\n            })}\r\n          >\r\n            外匯匯率查詢\r\n          </FEIBBorderButton>\r\n        </div>\r\n        <form autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\r\n          <section>\r\n            <FEIBInputLabel className=\"exchangeTypeLabel\">換匯種類</FEIBInputLabel>\r\n            <Controller\r\n              name=\"exchangeType\"\r\n              control={control}\r\n              defaultValue=\"1\"\r\n              render={({ field }) => (\r\n                <RadioGroup\r\n                  {...field}\r\n                  aria-label=\"換匯種類\"\r\n                  id=\"exchangeType\"\r\n                  name=\"exchangeType\"\r\n                  defaultValue=\"1\"\r\n                  style={{ flexDirection: 'row', marginBottom: '.6rem' }}\r\n                  onChange={handleExchangeTypeChange}\r\n                >\r\n                  <FEIBRadioLabel value=\"1\" control={<FEIBRadio />} label=\"新臺幣轉外幣\" />\r\n                  <FEIBRadioLabel value=\"2\" control={<FEIBRadio />} label=\"外幣轉新臺幣\" />\r\n                </RadioGroup>\r\n              )}\r\n            />\r\n            <FEIBInputLabel>轉出帳號</FEIBInputLabel>\r\n            <Controller\r\n              name=\"outAccount\"\r\n              defaultValue=\"\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <FEIBSelect\r\n                  {...field}\r\n                  id=\"outAccount\"\r\n                  name=\"outAccount\"\r\n                  error={!!errors.outAccount}\r\n                >\r\n                  {renderAccountOption(watch('exchangeType') === '1')}\r\n                  {/*\r\n                    watch('exchangeType') === '1'\r\n                      ? (renderAccountOption(accountsList, watch('exchangeType')))\r\n                      : (renderFrgnAccountOption(frgnAccountsList))\r\n                  */}\r\n                </FEIBSelect>\r\n              )}\r\n            />\r\n            <FEIBErrorMessage>{errors.outAccount?.message}</FEIBErrorMessage>\r\n            {watch('exchangeType') === '1' ? renderNTBlance() : renderFrgnBalance()}\r\n            <FEIBInputLabel>換匯幣別</FEIBInputLabel>\r\n            <Controller\r\n              name=\"currency\"\r\n              defaultValue=\"\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <FEIBSelect {...field} id=\"currency\" name=\"currency\" error={!!errors.currency}>\r\n                  {currencyTypeList.map((item) => (\r\n                    <FEIBOption key={item?.Currency} value={item?.Currency}>\r\n                      {item?.CurrencyName}\r\n                      {item?.Currency}\r\n                    </FEIBOption>\r\n                  ))}\r\n                </FEIBSelect>\r\n              )}\r\n            />\r\n            <FEIBErrorMessage>{errors.currency?.message}</FEIBErrorMessage>\r\n            <FEIBErrorMessage className=\"balance\">\r\n              預估可換 &nbsp;\r\n              {watch('exchangeType') === '1' ? selectedCurrency.ccyCd : 'NTD'}\r\n              &nbsp;\r\n              {generateAvailibleAmount()}\r\n              （實際金額以交易結果為準）\r\n            </FEIBErrorMessage>\r\n            <FEIBInputLabel>轉入帳號</FEIBInputLabel>\r\n            <Controller\r\n              name=\"inAccount\"\r\n              defaultValue=\"\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <FEIBSelect {...field} id=\"inAccount\" name=\"inAccount\" error={!!errors.inAccount}>\r\n                  {renderAccountOption(watch('exchangeType') === '2')}\r\n                  {/*\r\n                    watch('exchangeType') === '1'\r\n                      ? (renderFrgnAccountOption(frgnAccountsList))\r\n                      : (renderNTAccountOption(ntdAccountsList))\r\n                  */}\r\n                </FEIBSelect>\r\n              )}\r\n            />\r\n            <FEIBErrorMessage>{errors.inAccount?.message}</FEIBErrorMessage>\r\n            {watch('exchangeType') === '1' ? renderFrgnBalance() : renderNTBlance()}\r\n            <Controller\r\n              name=\"outType\"\r\n              control={control}\r\n              defaultValue=\"1\"\r\n              render={({ field }) => (\r\n                <RadioGroup {...field} id=\"outType\" name=\"outType\" defaultValue=\"1\">\r\n                  <FEIBRadioLabel\r\n                    className=\"outTypeRadioLabel\"\r\n                    value=\"1\"\r\n                    control={<FEIBRadio />}\r\n                    label={`希望${watch('exchangeType') === '2' ? '轉出' : '轉入'}${selectedCurrency?.ccyName || ''}`}\r\n                  />\r\n                  <Controller\r\n                    name=\"foreignBalance\"\r\n                    defaultValue=\"\"\r\n                    control={control}\r\n                    render={({ balanceField }) => (\r\n                      <div>\r\n                        <FEIBInput\r\n                          {...balanceField}\r\n                          type=\"number\"\r\n                          inputMode=\"numeric\"\r\n                          id=\"foreignBalance\"\r\n                          name=\"foreignBalance\"\r\n                          placeholder={`請輸入${watch('exchangeType') === '2' ? '轉出' : '轉入'}金額`}\r\n                          error={!!errors.foreignBalance}\r\n                          disabled={watch('outType') !== '1'}\r\n                          onChange={handleBalanceChange}\r\n                          inputProps={{\r\n                            maxLength: 9,\r\n                            autoComplete: 'off',\r\n                          }}\r\n                        />\r\n                        <div className=\"balanceLayout\">{foreignDollorStr}</div>\r\n                      </div>\r\n                    )}\r\n                  />\r\n                  <FEIBErrorMessage>{errors.foreignBalance?.message}</FEIBErrorMessage>\r\n                  <FEIBRadioLabel\r\n                    className=\"outTypeRadioLabel\"\r\n                    value=\"2\"\r\n                    control={<FEIBRadio />}\r\n                    label={`希望${watch('exchangeType') === '2' ? '轉入' : '轉出'}新臺幣`}\r\n                  />\r\n                  <Controller\r\n                    name=\"ntDollorBalance\"\r\n                    defaultValue=\"\"\r\n                    control={control}\r\n                    render={({ balanceField }) => (\r\n                      <div>\r\n                        <FEIBInput\r\n                          {...balanceField}\r\n                          autoComplete=\"off\"\r\n                          type=\"number\"\r\n                          inputMode=\"numeric\"\r\n                          id=\"ntDollorBalance\"\r\n                          name=\"ntDollorBalance\"\r\n                          placeholder={`請輸入${watch('exchangeType') === '2' ? '轉入' : '轉出'}金額`}\r\n                          error={!!errors.ntDollorBalance}\r\n                          disabled={watch('outType') !== '2'}\r\n                          onChange={handleBalanceChange}\r\n                          inputProps={{\r\n                            maxLength: 9,\r\n                            autoComplete: 'off',\r\n                          }}\r\n                        />\r\n                        <div className=\"balanceLayout\">{ntDollorStr}</div>\r\n                      </div>\r\n                    )}\r\n                  />\r\n                  <FEIBErrorMessage>{errors.ntDollorBalance?.message}</FEIBErrorMessage>\r\n                </RadioGroup>\r\n              )}\r\n            />\r\n            <FEIBInputLabel>匯款性質</FEIBInputLabel>\r\n            <Controller\r\n              name=\"property\"\r\n              defaultValue=\"\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <FEIBSelect {...field} id=\"property\" name=\"property\" error={!!errors.property}>\r\n                  {renderTrnsTypeList(propertiesList)}\r\n                </FEIBSelect>\r\n              )}\r\n            />\r\n            <FEIBErrorMessage>{errors.property?.message}</FEIBErrorMessage>\r\n            <FEIBInputLabel>備註</FEIBInputLabel>\r\n            <Controller\r\n              name=\"memo\"\r\n              defaultValue=\"\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <FEIBInput\r\n                  {...field}\r\n                  autoComplete=\"off\"\r\n                  type=\"text\"\r\n                  id=\"memo\"\r\n                  name=\"memo\"\r\n                  placeholder=\"請輸入備註\"\r\n                  error={!!errors.memo}\r\n                />\r\n              )}\r\n            />\r\n            <FEIBErrorMessage>{errors.memo?.message}</FEIBErrorMessage>\r\n            <Accordion title=\"外幣換匯規範\" space=\"bottom\">\r\n              <E00100Rules />\r\n            </Accordion>\r\n            <Accordion space=\"bottom\">\r\n              <E00100Notice />\r\n            </Accordion>\r\n            {banker.bankerCd && <InfoArea>換匯匯率將依據本行員工優惠匯率進行交易</InfoArea>}\r\n            <div className=\"submitBtn\">\r\n              <FEIBButton type=\"submit\">同意條款並確認</FEIBButton>\r\n            </div>\r\n          </section>\r\n        </form>\r\n        {/* TODO: 移除 */}\r\n        {/* <ExchangeTableDialog /> */}\r\n        {/* {renderDialog()} */}\r\n      </ExchangeWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default E00100;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}