{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-unused-vars */import{useEffect,useState}from'react';import{useHistory}from'react-router';import{useForm}from'react-hook-form';import{Swiper,SwiperSlide}from'swiper/react';import SwiperCore,{Pagination}from'swiper/core';import Loading from'components/Loading';import EmptyData from'components/EmptyData';import Layout from'components/Layout/Layout';import DebitCard from'components/DebitCard/DebitCard';import InformationTape from'components/InformationTape';import{FEIBTabContext,FEIBTabPanel}from'components/elements';import FailImage from'assets/images/failIcon.png';import SuccessImage from'assets/images/successIcon.png';import{currencySymbolGenerator,dateToString}from'utilities/Generator';import{showCustomPrompt}from'utilities/MessageModal';// import { closeFunc } from 'utilities/AppScriptProxy';\nimport{getAccountsList}from'utilities/CacheData';import SearchIcon from'@material-ui/icons/Search';import DateRangePicker from'components/DateRangePicker';import{TabField}from'./fields/tabField';import DetailContent from'./components/detailContent';import ResultContent from'./components/resultContent';import{ReserveTransferSearchWrapper}from'./D00800.style';import{defaultValues,tabOptions,RESERVE_DATE_RANGE,TAB,RESULT_DATE_RANGE,panelOptions}from'./constants';import{getReservedTransDetails,getResultTransDetails}from'./api';/* Swiper modules */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";SwiperCore.use([Pagination]);var D00800=function D00800(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),accountsList=_useState2[0],setAccountsList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedAccount=_useState4[0],setSelectedAccount=_useState4[1];var _useState5=useState({reserve:{},result:{}}),_useState6=_slicedToArray(_useState5,2),searchList=_useState6[0],setSearchList=_useState6[1];var _useForm=useForm({defaultValues:defaultValues}),control=_useForm.control,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch;var _watch=watch([TAB,RESERVE_DATE_RANGE,RESULT_DATE_RANGE]),_watch2=_slicedToArray(_watch,3),curTab=_watch2[0],curReserveRange=_watch2[1],curResultRange=_watch2[2];var currentValue={sdate:dateToString(curTab==='1'?curReserveRange[0]:curResultRange[0]),edate:dateToString(curTab==='1'?curReserveRange[1]:curResultRange[1]),searchObj:curTab==='1'?searchList.reserve:searchList.result};var onSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var tab,reserveDateRange,resultDateRange,sdate,edate,acctId,ccycd,accountType,param,type,_ref3,bookList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tab=_ref.tab,reserveDateRange=_ref.reserveDateRange,resultDateRange=_ref.resultDateRange;sdate=dateToString(tab==='1'?reserveDateRange[0]:resultDateRange[0]);edate=dateToString(tab==='1'?reserveDateRange[1]:resultDateRange[1]);acctId=selectedAccount.acctId,ccycd=selectedAccount.ccycd,accountType=selectedAccount.accountType;param={acctId:acctId,ccycd:ccycd,accountType:accountType,sdate:sdate,edate:edate,queryType:3// QUESTION 目前 hardcode queryType = 3 ，意即只查詢網銀預約+臨櫃預約\n};type=tab==='1'?'reserve':'result';// 不同帳號的 reservedTransDetails 與 getResultTransDetails 回傳的資料結構不一樣.... 後續需請後端更正\nif(!(tab==='1')){_context.next=12;break;}_context.next=9;return getReservedTransDetails(param);case 9:_context.t0=_context.sent;_context.next=15;break;case 12:_context.next=14;return getResultTransDetails(param);case 14:_context.t0=_context.sent;case 15:_ref3=_context.t0;bookList=_ref3.bookList;setSearchList(function(prevSearchList){return _objectSpread(_objectSpread({},prevSearchList),{},_defineProperty({},type,_objectSpread(_objectSpread({},prevSearchList[type]),{},_defineProperty({},\"\".concat(acctId,\"_\").concat(sdate,\"_\").concat(edate),bookList))));});case 18:case\"end\":return _context.stop();}}},_callee);}));return function onSearch(_x){return _ref2.apply(this,arguments);};}();// 取得帳號清單\nvar fetchTransferOutAccounts=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var accountsListRes;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getAccountsList('MSC',/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(accts){var newAccts;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('accts',accts);newAccts=accts.map(function(acct){return{acctBranch:acct.branchName,// 分行代碼\nacctName:acct.alias,// 帳戶名稱或暱稱\nacctId:acct.accountNo,// 帳號\naccountType:acct.acctType,// 帳號類別\nacctBalx:acct.balance,// 帳戶餘額\nccycd:acct.currency// 幣別代碼\n};});setAccountsList(newAccts);accountsListRes=newAccts;setSelectedAccount(newAccts[0]);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref5.apply(this,arguments);};}());case 2:return _context3.abrupt(\"return\",accountsListRes.length?null:'查無帳戶資訊');case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchTransferOutAccounts(){return _ref4.apply(this,arguments);};}();var toConfirmPage=function toConfirmPage(reserveData){history.push('/D008001',_objectSpread(_objectSpread({},reserveData),selectedAccount));};// 轉出帳號卡片 swiper\nvar renderCard=function renderCard(){return accountsList.map(function(item){return/*#__PURE__*/_jsx(SwiperSlide,{children:/*#__PURE__*/_jsx(DebitCard,{branch:item.acctBranch,cardName:item.acctName||'--',account:item.acctId,balance:item.acctBalx,dollarSign:item.ccycd,color:\"purple\"})},item.acctId);});};var handleReserveDataDialogOpen=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return showCustomPrompt({title:'預約轉帳',message:/*#__PURE__*/_jsx(DetailContent,{contentData:{data:data,selectedAccount:selectedAccount}}),onOk:function onOk(){return toConfirmPage(data);},okContent:'取消交易',onClose:function onClose(){}});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function handleReserveDataDialogOpen(_x3){return _ref6.apply(this,arguments);};}();// 打開結果彈窗\nvar handleOpenResultDialog=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(data){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return showCustomPrompt({title:'預約轉帳結果',message:/*#__PURE__*/_jsx(ResultContent,{data:data,selectedAccount:selectedAccount})});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function handleOpenResultDialog(_x4){return _ref7.apply(this,arguments);};}();// 預約轉帳查詢列表\nvar renderSearchList=function renderSearchList(tabValue){var searchObj=currentValue.searchObj,sdate=currentValue.sdate,edate=currentValue.edate;var key=\"\".concat(selectedAccount===null||selectedAccount===void 0?void 0:selectedAccount.acctId,\"_\").concat(sdate,\"_\").concat(edate);var list=searchObj[key];if(!(selectedAccount!==null&&selectedAccount!==void 0&&selectedAccount.acctId)||!list)return/*#__PURE__*/_jsx(Loading,{space:\"both\",isCentered:true});if(!list.length)return/*#__PURE__*/_jsx(\"div\",{className:\"emptyConatiner\",children:/*#__PURE__*/_jsx(EmptyData,{})});var showImg=function showImg(stderrMsg){if(tabValue==='1')return undefined;return stderrMsg?FailImage:SuccessImage;};return list.map(function(item){return/*#__PURE__*/_jsx(InformationTape,{topLeft:tabValue==='1'?\"\".concat(item.inBank,\"-\").concat(item.inActNo):\"\".concat(item.inActNo),topRight:currencySymbolGenerator('TWD',parseFloat(item.amount)),bottomLeft:tabValue==='1'?\"\\u9810\\u7D04\\u8F49\\u5E33\\u65E5\\uFF1A\".concat(dateToString(item.payDate)):\"\\u4EA4\\u6613\\u65E5\\u671F\\uFF1A\".concat(item.trnsDate),bottomRight:tabValue==='1'?item.type:undefined,onClick:tabValue==='1'?function(){return handleReserveDataDialogOpen(item);}:function(){return handleOpenResultDialog(item);},img:showImg(item.stderrMsg)},item.inActNo);});};var renderTabPanels=function renderTabPanels(){return panelOptions.map(function(panel){return/*#__PURE__*/_jsxs(FEIBTabPanel,{value:panel.tabValue,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"searchDateRange\",children:[/*#__PURE__*/_jsx(SearchIcon,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DateRangePicker// 本身也可以是 Field\n,_objectSpread(_objectSpread({},panel.datePickerLimit),{},{control:control,name:panel.formName,label:\" \",value:watch(panel.formName)}))})]}),renderSearchList(panel.tabValue)]},panel.tabValue);});};var handleChangeSlide=function handleChangeSlide(_ref8){var activeIndex=_ref8.activeIndex;return setSelectedAccount(accountsList[activeIndex]);};// 切換帳號/Tab/日期範圍時 會檢查 searchList 有無特定的 key，若沒有就執行搜尋\nuseEffect(function(){if(!selectedAccount)return;var searchObj=currentValue.searchObj,sdate=currentValue.sdate,edate=currentValue.edate;var key=\"\".concat(selectedAccount.acctId,\"_\").concat(sdate,\"_\").concat(edate);if(!searchObj[key])handleSubmit(onSearch)();},[selectedAccount,curTab,curReserveRange,curResultRange]);console.log('selectedAccount',selectedAccount);return/*#__PURE__*/_jsx(Layout,{title:\"\\u9810\\u7D04\\u8F49\\u5E33\\u67E5\\u8A62/\\u53D6\\u6D88\",inspector:fetchTransferOutAccounts,children:/*#__PURE__*/_jsxs(ReserveTransferSearchWrapper,{className:\"searchResult\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cardArea\",children:/*#__PURE__*/_jsx(Swiper,{slidesPerView:1.14,spaceBetween:8,centeredSlides:true,pagination:true,onSlideChange:handleChangeSlide,children:renderCard()})}),/*#__PURE__*/_jsx(\"div\",{className:\"searchResultContainer\",children:/*#__PURE__*/_jsxs(FEIBTabContext,{value:curTab,children:[/*#__PURE__*/_jsx(TabField,{control:control,name:\"tab\",options:tabOptions}),renderTabPanels()]})})]})});};export default D00800;","map":{"version":3,"names":["useEffect","useState","useHistory","useForm","Swiper","SwiperSlide","SwiperCore","Pagination","Loading","EmptyData","Layout","DebitCard","InformationTape","FEIBTabContext","FEIBTabPanel","FailImage","SuccessImage","currencySymbolGenerator","dateToString","showCustomPrompt","getAccountsList","SearchIcon","DateRangePicker","TabField","DetailContent","ResultContent","ReserveTransferSearchWrapper","defaultValues","tabOptions","RESERVE_DATE_RANGE","TAB","RESULT_DATE_RANGE","panelOptions","getReservedTransDetails","getResultTransDetails","use","D00800","history","accountsList","setAccountsList","selectedAccount","setSelectedAccount","reserve","result","searchList","setSearchList","control","handleSubmit","watch","curTab","curReserveRange","curResultRange","currentValue","sdate","edate","searchObj","onSearch","tab","reserveDateRange","resultDateRange","acctId","ccycd","accountType","param","queryType","type","bookList","prevSearchList","fetchTransferOutAccounts","accts","console","log","newAccts","map","acct","acctBranch","branchName","acctName","alias","accountNo","acctType","acctBalx","balance","currency","accountsListRes","length","toConfirmPage","reserveData","push","renderCard","item","handleReserveDataDialogOpen","data","title","message","onOk","okContent","onClose","handleOpenResultDialog","renderSearchList","tabValue","key","list","showImg","stderrMsg","undefined","inBank","inActNo","parseFloat","amount","payDate","trnsDate","renderTabPanels","panel","datePickerLimit","formName","handleChangeSlide","activeIndex"],"sources":["C:/Users/allen/git/app2-webview/src/pages/D00800_ReserveTransferSearch/D00800v2.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { Pagination } from 'swiper/core';\r\n\r\nimport Loading from 'components/Loading';\r\nimport EmptyData from 'components/EmptyData';\r\nimport Layout from 'components/Layout/Layout';\r\nimport DebitCard from 'components/DebitCard/DebitCard';\r\nimport InformationTape from 'components/InformationTape';\r\nimport { FEIBTabContext, FEIBTabPanel } from 'components/elements';\r\nimport FailImage from 'assets/images/failIcon.png';\r\nimport SuccessImage from 'assets/images/successIcon.png';\r\nimport { currencySymbolGenerator, dateToString } from 'utilities/Generator';\r\nimport { showCustomPrompt } from 'utilities/MessageModal';\r\n\r\n// import { closeFunc } from 'utilities/AppScriptProxy';\r\nimport { getAccountsList } from 'utilities/CacheData';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport DateRangePicker from 'components/DateRangePicker';\r\nimport { TabField } from './fields/tabField';\r\nimport DetailContent from './components/detailContent';\r\nimport ResultContent from './components/resultContent';\r\nimport { ReserveTransferSearchWrapper } from './D00800.style';\r\nimport {\r\n  defaultValues, tabOptions, RESERVE_DATE_RANGE, TAB, RESULT_DATE_RANGE, panelOptions,\r\n} from './constants';\r\nimport { getReservedTransDetails, getResultTransDetails } from './api';\r\n\r\n/* Swiper modules */\r\nSwiperCore.use([Pagination]);\r\n\r\nconst D00800 = () => {\r\n  const history = useHistory();\r\n  const [accountsList, setAccountsList] = useState([]);\r\n  const [selectedAccount, setSelectedAccount] = useState(null);\r\n  const [searchList, setSearchList] = useState({ reserve: {}, result: {}});\r\n  const {control, handleSubmit, watch } = useForm({ defaultValues });\r\n  const [curTab, curReserveRange, curResultRange] = watch([TAB, RESERVE_DATE_RANGE, RESULT_DATE_RANGE]);\r\n  const currentValue = {\r\n    sdate: dateToString(curTab === '1' ? curReserveRange[0] : curResultRange[0]),\r\n    edate: dateToString(curTab === '1' ? curReserveRange[1] : curResultRange[1]),\r\n    searchObj: curTab === '1' ? searchList.reserve : searchList.result,\r\n  };\r\n\r\n  const onSearch = async ({ tab, reserveDateRange, resultDateRange }) => {\r\n    const sdate = dateToString(tab === '1' ? reserveDateRange[0] : resultDateRange[0]);\r\n    const edate = dateToString(tab === '1' ? reserveDateRange[1] : resultDateRange[1]);\r\n    const { acctId, ccycd, accountType } = selectedAccount;\r\n    const param = {\r\n      acctId,\r\n      ccycd,\r\n      accountType,\r\n      sdate,\r\n      edate,\r\n      queryType: 3, // QUESTION 目前 hardcode queryType = 3 ，意即只查詢網銀預約+臨櫃預約\r\n    };\r\n\r\n    const type = tab === '1' ? 'reserve' : 'result';\r\n\r\n    // 不同帳號的 reservedTransDetails 與 getResultTransDetails 回傳的資料結構不一樣.... 後續需請後端更正\r\n    const { bookList } = tab === '1' ? await getReservedTransDetails(param) : await getResultTransDetails(param);\r\n\r\n    setSearchList((prevSearchList) => ({\r\n      ...prevSearchList,\r\n      [type]: { ...prevSearchList[type], [`${acctId}_${sdate}_${edate}`]: bookList },\r\n    }));\r\n  };\r\n\r\n  // 取得帳號清單\r\n  const fetchTransferOutAccounts = async () => {\r\n    let accountsListRes;\r\n    await getAccountsList('MSC', async (accts) => {\r\n      console.log('accts', accts);\r\n      const newAccts = accts.map((acct) => ({\r\n        acctBranch: acct.branchName, // 分行代碼\r\n        acctName: acct.alias, // 帳戶名稱或暱稱\r\n        acctId: acct.accountNo, // 帳號\r\n        accountType: acct.acctType, // 帳號類別\r\n        acctBalx: acct.balance, // 帳戶餘額\r\n        ccycd: acct.currency, // 幣別代碼\r\n      }));\r\n      setAccountsList(newAccts);\r\n      accountsListRes = newAccts;\r\n      setSelectedAccount(newAccts[0]);\r\n    });\r\n    // TODO 若無 MSC 類別的帳戶，要給什麼提示訊息給使用者\r\n    return accountsListRes.length ? null : '查無帳戶資訊';\r\n  };\r\n\r\n  const toConfirmPage = (reserveData) => {\r\n    history.push('/D008001', { ...reserveData, ...selectedAccount });\r\n  };\r\n\r\n  // 轉出帳號卡片 swiper\r\n  const renderCard = () => accountsList.map((item) => (\r\n    <SwiperSlide key={item.acctId}>\r\n      <DebitCard\r\n        branch={item.acctBranch}\r\n        cardName={item.acctName || '--'}\r\n        account={item.acctId}\r\n        balance={item.acctBalx}\r\n        dollarSign={item.ccycd}\r\n        color=\"purple\"\r\n      />\r\n    </SwiperSlide>\r\n  ));\r\n\r\n  const handleReserveDataDialogOpen = async (data) => {\r\n    await showCustomPrompt({\r\n      title: '預約轉帳',\r\n      message: <DetailContent contentData={{ data, selectedAccount }} />,\r\n      onOk: () => toConfirmPage(data),\r\n      okContent: '取消交易',\r\n      onClose: () => {},\r\n    });\r\n  };\r\n  // 打開結果彈窗\r\n  const handleOpenResultDialog = async (data) => {\r\n    await showCustomPrompt({\r\n      title: '預約轉帳結果',\r\n      message: <ResultContent data={data} selectedAccount={selectedAccount} />,\r\n    });\r\n  };\r\n\r\n  // 預約轉帳查詢列表\r\n  const renderSearchList = (tabValue) => {\r\n    const { searchObj, sdate, edate } = currentValue;\r\n    const key = `${selectedAccount?.acctId}_${sdate}_${edate}`;\r\n    const list = searchObj[key];\r\n\r\n    if (!selectedAccount?.acctId || !list) return <Loading space=\"both\" isCentered />;\r\n    if (!list.length) return <div className=\"emptyConatiner\"><EmptyData /></div>;\r\n\r\n    const showImg = (stderrMsg) => {\r\n      if (tabValue === '1') return undefined;\r\n      return stderrMsg ? FailImage : SuccessImage;\r\n    };\r\n    return list.map((item) => (\r\n      <InformationTape\r\n        key={item.inActNo}\r\n        topLeft={tabValue === '1' ? `${item.inBank}-${item.inActNo}` : `${item.inActNo}`}\r\n        topRight={currencySymbolGenerator('TWD', parseFloat(item.amount))}\r\n        bottomLeft={tabValue === '1' ? `預約轉帳日：${dateToString(item.payDate)}` : `交易日期：${item.trnsDate}`}\r\n        bottomRight={tabValue === '1' ? item.type : undefined}\r\n        onClick={tabValue === '1' ? () => handleReserveDataDialogOpen(item) : () => handleOpenResultDialog(item)}\r\n        img={showImg(item.stderrMsg)}\r\n      />\r\n    ));\r\n  };\r\n\r\n  const renderTabPanels = () => panelOptions.map((panel) => (\r\n    <FEIBTabPanel key={panel.tabValue} value={panel.tabValue}>\r\n      <div className=\"searchDateRange\">\r\n        <SearchIcon />\r\n        <div>\r\n          <DateRangePicker // 本身也可以是 Field\r\n            {...panel.datePickerLimit}\r\n            control={control}\r\n            name={panel.formName}\r\n            label=\" \"\r\n            value={watch(panel.formName)}\r\n          />\r\n        </div>\r\n      </div>\r\n      {renderSearchList(panel.tabValue)}\r\n    </FEIBTabPanel>\r\n  ));\r\n\r\n  const handleChangeSlide = ({ activeIndex }) => setSelectedAccount(accountsList[activeIndex]);\r\n\r\n  // 切換帳號/Tab/日期範圍時 會檢查 searchList 有無特定的 key，若沒有就執行搜尋\r\n  useEffect(() => {\r\n    if (!selectedAccount) return;\r\n    const { searchObj, sdate, edate } = currentValue;\r\n    const key = `${selectedAccount.acctId}_${sdate}_${edate}`;\r\n    if (!searchObj[key]) handleSubmit(onSearch)();\r\n  }, [selectedAccount, curTab, curReserveRange, curResultRange]);\r\n\r\n  console.log('selectedAccount', selectedAccount);\r\n  return (\r\n    <Layout title=\"預約轉帳查詢/取消\" inspector={fetchTransferOutAccounts}>\r\n      <ReserveTransferSearchWrapper className=\"searchResult\">\r\n        <div className=\"cardArea\">\r\n          <Swiper\r\n            slidesPerView={1.14}\r\n            spaceBetween={8}\r\n            centeredSlides\r\n            pagination\r\n            onSlideChange={handleChangeSlide}\r\n          >\r\n            {renderCard()}\r\n          </Swiper>\r\n        </div>\r\n        <div className=\"searchResultContainer\">\r\n          <FEIBTabContext value={curTab}>\r\n            <TabField control={control} name=\"tab\" options={tabOptions} />\r\n            {renderTabPanels()}\r\n          </FEIBTabContext>\r\n        </div>\r\n      </ReserveTransferSearchWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default D00800;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}