{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import Theme from'themes/theme';import Layout from'components/Layout/Layout';import{MainScrollWrapper}from'components/Layout';import{FEIBButton,FEIBHintMessage}from'components/elements';import{DropdownField,TextInputField}from'components/Fields';import{toCurrency,dateToYMD,dateToString}from'utilities/Generator';import{closeFunc}from'utilities/AppScriptProxy';import{getDurationTuple}from'./utils/common';import{generatebindAccountNoOptions,generateCycleModeOptions,generateCycleTimingOptions,generateMonthOptions}from'./utils/options';import HeroWithEdit from'./components/HeroWithEdit';import{EditPageWrapper}from'./C00600.style';import{generateEditSchema}from'./validationSchema';/**\r\n * C00600 存錢計畫 (新增) 編輯頁\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DepositPlanEditPage=function DepositPlanEditPage(){var _location$state;var history=useHistory();var location=useLocation();var _useState=useState(),_useState2=_slicedToArray(_useState,2),newImageId=_useState2[0],setNewImageId=_useState2[1];var _useForm=useForm({defaultValues:{name:'',cycleDuration:4,cycleMode:2,cycleTiming:'',amount:'',bindAccountNo:''},resolver:yupResolver(generateEditSchema((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.program))}),control=_useForm.control,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,reset=_useForm.reset;var _watch=watch(),cycleDuration=_watch.cycleDuration,cycleMode=_watch.cycleMode,amount=_watch.amount,bindAccountNo=_watch.bindAccountNo;var getDefaultCycleTiming=function getDefaultCycleTiming(){var date=new Date().getDate();return date<28?date:28;};var getGoalAmount=function getGoalAmount(cycleAmount,cycle,mode){var duration=mode===1?4:1;return parseInt(cycleAmount,10)*cycle*duration;};var getRemainingBalance=function getRemainingBalance(accountNo){var _location$state$subAc,_location$state2,_location$state2$subA,_location$state2$subA2;return(_location$state$subAc=(_location$state2=location.state)===null||_location$state2===void 0?void 0:(_location$state2$subA=_location$state2.subAccounts)===null||_location$state2$subA===void 0?void 0:(_location$state2$subA2=_location$state2$subA.find(function(a){return a.accountNo===accountNo;}))===null||_location$state2$subA2===void 0?void 0:_location$state2$subA2.balance)!==null&&_location$state$subAc!==void 0?_location$state$subAc:0;};var getInputColor=function getInputColor(type){return type?Theme.colors.text.lightGray:Theme.colors.primary.brand;};var onSubmit=function onSubmit(data){var date=getDurationTuple(new Date(),data.cycleDuration,data.cycleMode,data.cycleTiming);var _location$state$progr=location.state.program,code=_location$state$progr.code,rate=_location$state$progr.rate;// if (newImageId === undefined) showError('請選擇圖片');\n// else {\nvar payload={// =====建立存錢計畫所需參數=====\nprogCode:code,imageId:newImageId!==null&&newImageId!==void 0?newImageId:1,// TODO 應改為提醒使用者尚未選取圖片。\nname:data.name,startDate:dateToYMD(date.begin),endDate:dateToYMD(date.end),cycleMode:data.cycleMode,cycleTiming:data.cycleTiming,amount:data.amount,bindAccountNo:data.bindAccountNo==='new'?null:data.bindAccountNo,currentBalance:getRemainingBalance(data.bindAccountNo),// =====渲染需求參數=====\ngoalAmount:getGoalAmount(data.amount,data.cycleDuration,data.cycleMode),extra:{rate:rate,period:\"\".concat(dateToString(new Date()),\" ~ \").concat(dateToString(date.end)),nextDeductionDate:dateToString(date.next)}};sessionStorage.setItem('C006003',JSON.stringify(data));history.push('/C006004',{isConfirmMode:true,payload:payload});// }\n};useEffect(function(){// 如果是專案型計畫，將資料傳入 form 中\nif(location.state.program.type){var _location$state$progr2;reset({name:location.state.program.name,cycleDuration:(_location$state$progr2=location.state.program.period)!==null&&_location$state$progr2!==void 0?_location$state$progr2:4,cycleMode:2,cycleTiming:getDefaultCycleTiming()});}// 當跳回此頁面時，填入先前的資訊\nvar backlog=sessionStorage.getItem('C006003');if(backlog){backlog=JSON.parse(backlog);setNewImageId(backlog.imageId);reset(_objectSpread({},backlog));}},[]);// 如果 location.state 不存在，屬於不正常行為，直接關閉該服務\nif(!location.state||!('program'in location.state))return closeFunc();var _location$state3=location.state,program=_location$state3.program,subAccounts=_location$state3.subAccounts,hasReachedMaxSubAccounts=_location$state3.hasReachedMaxSubAccounts;return/*#__PURE__*/_jsx(Layout,{title:\"\\u65B0\\u589E\\u5B58\\u9322\\u8A08\\u756B\",hasClearHeader:true,goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(MainScrollWrapper,{children:/*#__PURE__*/_jsx(EditPageWrapper,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(HeroWithEdit,{onChange:function onChange(id){return setNewImageId(id);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextInputField,{name:\"name\",control:control,labelName:\"\\u70BA\\u4F60\\u7684\\u8A08\\u756B\\u547D\\u540D\\u5427\",placeholder:\"\\u8ACB\\u8F38\\u51657\\u500B\\u4EE5\\u5167\\u7684\\u4E2D\\u82F1\\u6587\\u5B57\\u3001\\u6578\\u5B57\\u6216\\u7B26\\u865F\",disabled:!!program.type,$color:getInputColor(program.type)})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DropdownField,{options:generateMonthOptions(),name:\"cycleDuration\",control:control,labelName:\"\\u9810\\u8A08\\u5B58\\u9322\\u5340\\u9593\",disabled:!!program.type,$color:getInputColor(!!program.type)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-50\",children:/*#__PURE__*/_jsx(DropdownField,{options:generateCycleModeOptions(),name:\"cycleMode\",control:control,labelName:\"\\u5B58\\u9322\\u983B\\u7387\",disabled:!!program.type,$color:getInputColor(!!program.type)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-50\",children:[/*#__PURE__*/_jsx(DropdownField,{options:generateCycleTimingOptions(cycleMode),name:\"cycleTiming\",control:control,labelName:\"\\u9031\\u671F\",disabled:!!program.type,$color:getInputColor(!!program.type)}),/*#__PURE__*/_jsxs(FEIBHintMessage,{children:[\"\\u5171\",cycleDuration*(cycleMode===1?4:1),\"\\u6B21\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextInputField,{name:\"amount\",control:control,labelName:\"\\u9810\\u8A08\\u6BCF\\u671F\\u5B58\\u9322\\u91D1\\u984D\",type:\"number\"}),/*#__PURE__*/_jsx(FEIBHintMessage,{children:amount>0&&\"\\u5B58\\u6B3E\\u76EE\\u6A19\\u70BA \".concat(toCurrency(getGoalAmount(amount,cycleDuration,cycleMode)),\"\\u5143\")}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u91D1\\u984D\\u6700\\u4F4E\\uFF04\".concat(toCurrency(program.amountRange.month.min),\" \\u5143\\uFF0C\\u6700\\u9AD8\\uFF04\").concat(toCurrency(program.amountRange.month.max),\" \\u5143\\uFF0C\\u4EE5\\u842C\\u5143\\u70BA\\u55AE\\u4F4D\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(DropdownField,{options:generatebindAccountNoOptions(subAccounts,hasReachedMaxSubAccounts),name:\"bindAccountNo\",control:control,labelName:\"\\u9078\\u64C7\\u966A\\u4F60\\u5B58\\u9322\\u7684\\u5E33\\u865F\"}),/*#__PURE__*/_jsx(FEIBHintMessage,{children:bindAccountNo!=='*'&&bindAccountNo!=='new'&&\"\\u5B58\\u6B3E\\u9918\\u984D\\u70BA \".concat(toCurrency(getRemainingBalance(bindAccountNo)),\"\\u5143\")})]}),/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u78BA\\u8A8D\"})]})]})})})});};export default DepositPlanEditPage;","map":{"version":3,"names":["useState","useEffect","useHistory","useLocation","useForm","yupResolver","Theme","Layout","MainScrollWrapper","FEIBButton","FEIBHintMessage","DropdownField","TextInputField","toCurrency","dateToYMD","dateToString","closeFunc","getDurationTuple","generatebindAccountNoOptions","generateCycleModeOptions","generateCycleTimingOptions","generateMonthOptions","HeroWithEdit","EditPageWrapper","generateEditSchema","DepositPlanEditPage","history","location","newImageId","setNewImageId","defaultValues","name","cycleDuration","cycleMode","cycleTiming","amount","bindAccountNo","resolver","state","program","control","handleSubmit","watch","reset","getDefaultCycleTiming","date","Date","getDate","getGoalAmount","cycleAmount","cycle","mode","duration","parseInt","getRemainingBalance","accountNo","subAccounts","find","a","balance","getInputColor","type","colors","text","lightGray","primary","brand","onSubmit","data","code","rate","payload","progCode","imageId","startDate","begin","endDate","end","currentBalance","goalAmount","extra","period","nextDeductionDate","next","sessionStorage","setItem","JSON","stringify","push","isConfirmMode","backlog","getItem","parse","hasReachedMaxSubAccounts","goBack","id","amountRange","month","min","max"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00600_DepositPlan/C00600_3.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\nimport Theme from 'themes/theme';\r\nimport Layout from 'components/Layout/Layout';\r\nimport { MainScrollWrapper } from 'components/Layout';\r\nimport { FEIBButton, FEIBHintMessage } from 'components/elements';\r\nimport { DropdownField, TextInputField } from 'components/Fields';\r\nimport {\r\n  toCurrency,\r\n  dateToYMD,\r\n  dateToString,\r\n} from 'utilities/Generator';\r\n\r\nimport { closeFunc } from 'utilities/AppScriptProxy';\r\nimport { getDurationTuple} from './utils/common';\r\nimport {\r\n  generatebindAccountNoOptions,\r\n  generateCycleModeOptions,\r\n  generateCycleTimingOptions, generateMonthOptions,\r\n} from './utils/options';\r\nimport HeroWithEdit from './components/HeroWithEdit';\r\nimport { EditPageWrapper } from './C00600.style';\r\nimport { generateEditSchema } from './validationSchema';\r\n\r\n/**\r\n * C00600 存錢計畫 (新增) 編輯頁\r\n */\r\nconst DepositPlanEditPage = () => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [newImageId, setNewImageId] = useState();\r\n  const {\r\n    control, handleSubmit, watch, reset,\r\n  } = useForm({\r\n    defaultValues: {\r\n      name: '',\r\n      cycleDuration: 4,\r\n      cycleMode: 2,\r\n      cycleTiming: '',\r\n      amount: '',\r\n      bindAccountNo: '',\r\n    },\r\n    resolver: yupResolver(generateEditSchema(location.state?.program)),\r\n  });\r\n  const {\r\n    cycleDuration, cycleMode, amount, bindAccountNo,\r\n  } = watch();\r\n\r\n  const getDefaultCycleTiming = () => {\r\n    const date = new Date().getDate();\r\n    return date < 28 ? date : 28;\r\n  };\r\n\r\n  const getGoalAmount = (cycleAmount, cycle, mode) => {\r\n    const duration = mode === 1 ? 4 : 1;\r\n    return parseInt(cycleAmount, 10) * cycle * duration;\r\n  };\r\n\r\n  const getRemainingBalance = (accountNo) => location.state?.subAccounts?.find((a) => a.accountNo === accountNo)?.balance ?? 0;\r\n  const getInputColor = (type) => (type ? Theme.colors.text.lightGray : Theme.colors.primary.brand);\r\n\r\n  const onSubmit = (data) => {\r\n    const date = getDurationTuple(new Date(), data.cycleDuration, data.cycleMode, data.cycleTiming);\r\n    const {code, rate} = location.state.program;\r\n    // if (newImageId === undefined) showError('請選擇圖片');\r\n    // else {\r\n    const payload = {\r\n      // =====建立存錢計畫所需參數=====\r\n      progCode: code,\r\n      imageId: newImageId ?? 1, // TODO 應改為提醒使用者尚未選取圖片。\r\n      name: data.name,\r\n      startDate: dateToYMD(date.begin),\r\n      endDate: dateToYMD(date.end),\r\n      cycleMode: data.cycleMode,\r\n      cycleTiming: data.cycleTiming,\r\n      amount: data.amount,\r\n      bindAccountNo: data.bindAccountNo === 'new' ? null : data.bindAccountNo,\r\n      currentBalance: getRemainingBalance(data.bindAccountNo),\r\n      // =====渲染需求參數=====\r\n      goalAmount: getGoalAmount(data.amount, data.cycleDuration, data.cycleMode),\r\n      extra: {\r\n        rate,\r\n        period: `${dateToString(new Date())} ~ ${dateToString(date.end)}`,\r\n        nextDeductionDate: dateToString(date.next),\r\n      },\r\n    };\r\n    sessionStorage.setItem('C006003', JSON.stringify(data));\r\n    history.push('/C006004', { isConfirmMode: true, payload });\r\n    // }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // 如果是專案型計畫，將資料傳入 form 中\r\n    if (location.state.program.type) {\r\n      reset({\r\n        name: location.state.program.name,\r\n        cycleDuration: location.state.program.period ?? 4,\r\n        cycleMode: 2,\r\n        cycleTiming: getDefaultCycleTiming(),\r\n      });\r\n    }\r\n\r\n    // 當跳回此頁面時，填入先前的資訊\r\n    let backlog = sessionStorage.getItem('C006003');\r\n    if (backlog) {\r\n      backlog = JSON.parse(backlog);\r\n      setNewImageId(backlog.imageId);\r\n      reset({...backlog});\r\n    }\r\n  }, []);\r\n\r\n  // 如果 location.state 不存在，屬於不正常行為，直接關閉該服務\r\n  if (!location.state || !('program' in location.state)) return closeFunc();\r\n\r\n  const {program, subAccounts, hasReachedMaxSubAccounts} = location.state;\r\n\r\n  return (\r\n    <Layout title=\"新增存錢計畫\" hasClearHeader goBackFunc={() => history.goBack()}>\r\n      <MainScrollWrapper>\r\n        <EditPageWrapper>\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <HeroWithEdit onChange={(id) => setNewImageId(id)} />\r\n\r\n            <div className=\"flex\">\r\n              <div>\r\n                <TextInputField\r\n                  name=\"name\"\r\n                  control={control}\r\n                  labelName=\"為你的計畫命名吧\"\r\n                  placeholder=\"請輸入7個以內的中英文字、數字或符號\"\r\n                  disabled={!!program.type}\r\n                  $color={getInputColor(program.type)}\r\n                />\r\n              </div>\r\n              <div>\r\n                <DropdownField\r\n                  options={generateMonthOptions()}\r\n                  name=\"cycleDuration\"\r\n                  control={control}\r\n                  labelName=\"預計存錢區間\"\r\n                  disabled={!!program.type}\r\n                  $color={getInputColor(!!program.type)}\r\n                />\r\n              </div>\r\n              <div className=\"col-2\">\r\n                <div className=\"w-50\">\r\n                  <DropdownField\r\n                    options={generateCycleModeOptions()}\r\n                    name=\"cycleMode\"\r\n                    control={control}\r\n                    labelName=\"存錢頻率\"\r\n                    disabled={!!program.type}\r\n                    $color={getInputColor(!!program.type)}\r\n                  />\r\n                </div>\r\n                <div className=\"w-50\">\r\n                  <DropdownField\r\n                    options={generateCycleTimingOptions(cycleMode)}\r\n                    name=\"cycleTiming\"\r\n                    control={control}\r\n                    labelName=\"週期\"\r\n                    disabled={!!program.type}\r\n                    $color={getInputColor(!!program.type)}\r\n                  />\r\n                  <FEIBHintMessage>\r\n                    共\r\n                    {cycleDuration * (cycleMode === 1 ? 4 : 1)}\r\n                    次\r\n                  </FEIBHintMessage>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <TextInputField\r\n                  name=\"amount\"\r\n                  control={control}\r\n                  labelName=\"預計每期存錢金額\"\r\n                  type=\"number\"\r\n                />\r\n                <FEIBHintMessage>\r\n                  {(amount > 0) && `存款目標為 ${toCurrency(getGoalAmount(amount, cycleDuration, cycleMode))}元`}\r\n                </FEIBHintMessage>\r\n                <div>{`金額最低＄${toCurrency(program.amountRange.month.min)} 元，最高＄${toCurrency(program.amountRange.month.max)} 元，以萬元為單位`}</div>\r\n              </div>\r\n\r\n              <div>\r\n                <DropdownField\r\n                  options={generatebindAccountNoOptions(subAccounts, hasReachedMaxSubAccounts)}\r\n                  name=\"bindAccountNo\"\r\n                  control={control}\r\n                  labelName=\"選擇陪你存錢的帳號\"\r\n                />\r\n                <FEIBHintMessage>\r\n                  { ((bindAccountNo !== '*') && (bindAccountNo !== 'new')) && `存款餘額為 ${toCurrency(getRemainingBalance(bindAccountNo))}元` }\r\n                </FEIBHintMessage>\r\n              </div>\r\n\r\n              <FEIBButton type=\"submit\">確認</FEIBButton>\r\n            </div>\r\n          </form>\r\n        </EditPageWrapper>\r\n      </MainScrollWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default DepositPlanEditPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}