{"ast":null,"code":"import _objectWithoutProperties from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"extra\",\"goalAmount\"];import{useState,useEffect,useRef}from'react';import{useHistory,useLocation}from'react-router';import uuid from'react-uuid';import Layout from'components/Layout/Layout';import{MainScrollWrapper}from'components/Layout';import SuccessFailureAnimations from'components/SuccessFailureAnimations';import InformationList from'components/InformationList';import{FEIBButton}from'components/elements';import{currencySymbolGenerator,accountFormatter,dateToString,weekNumberToChinese,dateToYMD}from'utilities/Generator';import{closeFunc,startFunc,transactionAuth}from'utilities/AppScriptProxy';import{AuthCode}from'utilities/TxnAuthCode';import{showAnimationModal}from'utilities/MessageModal';import{FuncID}from'utilities/FuncID';import{createConfirm,createDepositPlan,updateDepositPlan}from'./api';import{AlertInvalidEntry,ConfirmToTransferSubAccountBalance}from'./utils/prompts';import{DetailPageWrapper}from'./C00600.style';/**\r\n * C00600 存錢計畫 資訊頁\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DepositPlanDetailPage=function DepositPlanDetailPage(){var history=useHistory();var location=useLocation();var mainRef=useRef();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),mode=_useState2[0],setMode=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),plan=_useState4[0],setPlan=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),program=_useState6[0],setProgram=_useState6[1];useEffect(function(){if(location.state&&'isConfirmMode'in location.state){// 資訊頁有二種使用情境：確認新增存錢計畫、閱覽存錢計畫資訊。\nif(location.state.isConfirmMode){// 設定成 (新增) 確認模式\nsetMode(1);setProgram(location.state.payload);}else{// 設定成 (已建立) 資訊模式\nsetMode(0);setPlan(location.state.plan);}}else{// Guard: 此頁面接續上一頁的操作，意指若未在該情況下進入此頁為不正常操作。\nAlertInvalidEntry({onBack:function onBack(){return history.goBack();}});}},[]);var handleImageUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(planId){var payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:payload={planId:planId,image:sessionStorage.getItem('C00600-hero')};_context.next=3;return updateDepositPlan(payload);case 3:sessionStorage.removeItem('C00600-hero');// 清除暫存背景圖。\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function handleImageUpload(_x){return _ref.apply(this,arguments);};}();var handleCreate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var extra,goalAmount,payload,response,auth,confirm;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:extra=program.extra,goalAmount=program.goalAmount,payload=_objectWithoutProperties(program,_excluded);// 11.30 目前後端設定是 transactionAuth 之後才可以進行 createDepositPlan\n// 否則會被判定惡意行為，這部分還需要等待後端進行調整\n// Step 1. 執行 存錢計畫建立\n_context2.next=3;return createDepositPlan(payload);case 3:response=_context2.sent;if(response!==null&&response!==void 0&&response.result){_context2.next=6;break;}return _context2.abrupt(\"return\");case 6:_context2.next=8;return transactionAuth(AuthCode.C00600);case 8:auth=_context2.sent;if(auth.result){_context2.next=11;break;}return _context2.abrupt(\"return\");case 11:_context2.next=13;return createConfirm();case 13:confirm=_context2.sent;if(!confirm.result){_context2.next=23;break;}if(!(payload.imageId===0)){_context2.next=18;break;}_context2.next=18;return handleImageUpload(response.planId);case 18:setMode(2);// 設定成 成功建立模式\nsessionStorage.removeItem('C006003');// 清除暫存表單資料。\nmainRef.current.scrollTo({top:0,behavior:'smooth'});// 建立成功後，將頁面滑至上方。\n_context2.next=24;break;case 23:showAnimationModal({isSuccess:false,errorTitle:'設定失敗',errorDesc:confirm.message,onClose:function onClose(){return closeFunc();}});case 24:case\"end\":return _context2.stop();}}},_callee2);}));return function handleCreate(){return _ref2.apply(this,arguments);};}();var handleConfirm=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(program.currentBalance>0){// 如果所選的子帳戶有餘額，要提示用戶自動轉帳。\n// TODO 要求使用者自己將餘額轉出。 onOk: () => handleCreate() 應修正！\nConfirmToTransferSubAccountBalance({onOk:function onOk(){return startFunc(FuncID.D00100);},onCancel:closeFunc});}else{handleCreate();}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function handleConfirm(){return _ref3.apply(this,arguments);};}();var renderModeTimingString=function renderModeTimingString(p){return p&&(p.cycleMode===1?\"\\u6BCF\\u9031\".concat(weekNumberToChinese(p.cycleTiming===0?7:p.cycleTiming)):\"\\u6BCF\\u6708\".concat(p.cycleTiming,\"\\u865F\"));};var renderListItem=function renderListItem(list){return list.map(function(l){return/*#__PURE__*/_jsx(InformationList,{title:l.label,content:l.value,caption:l.caption,remark:l.next,extra:typeof l.extra==='function'&&l.extra()},uuid());});};var renderProgramDetails=function renderProgramDetails(){var list=[{label:'存錢計畫名稱',value:program===null||program===void 0?void 0:program.name},{label:'適用利率',value:\"\".concat(program===null||program===void 0?void 0:program.extra.rate,\"%\")},{label:'存錢目標',value:currencySymbolGenerator('NTD',program===null||program===void 0?void 0:program.goalAmount)},{label:'計畫期間',value:program===null||program===void 0?void 0:program.extra.period},{type:'extra',label:'第一筆扣款日',value:dateToString(program===null||program===void 0?void 0:program.startDate),caption:'下一筆扣款日',next:program===null||program===void 0?void 0:program.extra.nextDeductionDate,extra:function extra(){return mode===2&&dateToYMD()===(program===null||program===void 0?void 0:program.startDate)?'扣款成功':undefined;}},{label:'存錢帳號',value:program!==null&&program!==void 0&&program.bindAccountNo?accountFormatter(program===null||program===void 0?void 0:program.bindAccountNo):'加開子帳戶'}];return renderListItem(list);};var renderPlanDetails=function renderPlanDetails(){var list=[{label:'存錢計畫名稱',value:plan===null||plan===void 0?void 0:plan.name},{label:'存錢計畫之帳號',value:accountFormatter(plan===null||plan===void 0?void 0:plan.bindAccountNo)},{label:'存錢計畫起始日',value:dateToString(plan===null||plan===void 0?void 0:plan.startDate)},{label:'存錢計畫到期日',value:dateToString(plan===null||plan===void 0?void 0:plan.endDate)},{label:'存錢週期',value:renderModeTimingString(plan)},{label:'第一筆扣款日',value:dateToString(plan===null||plan===void 0?void 0:plan.startDate)},{label:'目標金額',value:currencySymbolGenerator('NTD',plan===null||plan===void 0?void 0:plan.goalAmount)},{label:'每期存款金額',value:currencySymbolGenerator('NTD',plan===null||plan===void 0?void 0:plan.amount)},{label:'利率',value:\"\".concat(plan===null||plan===void 0?void 0:plan.progInfo.rate,\"% (\\u724C\\u544A+\\u8A08\\u756B\\u52A0\\u78BC\\u5229\\u7387)\")},{label:'累積存款金額',value:currencySymbolGenerator('NTD',plan===null||plan===void 0?void 0:plan.currentBalance)}];return renderListItem(list);};var renderTitle=function renderTitle(){switch(mode){case 0:return'存款計劃資訊';case 1:return'存款計劃確認';case 2:default:return'存款計劃設定結果';}};return/*#__PURE__*/_jsx(Layout,{title:renderTitle(),goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(MainScrollWrapper,{ref:mainRef,children:/*#__PURE__*/_jsxs(DetailPageWrapper,{children:[mode>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-4\",children:[mode===2&&/*#__PURE__*/_jsx(SuccessFailureAnimations,{isSuccess:true,successTitle:\"\\u8A2D\\u5B9A\\u6210\\u529F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u5B58\\u9322\\u91D1\\u984D\\u8207\\u9031\\u671F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-primary text-lg balance\",children:currencySymbolGenerator('NTD',program===null||program===void 0?void 0:program.amount)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-primary text-lg\",children:renderModeTimingString(program)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-primary\",children:\"\\u5F9E\\u4E3B\\u5E33\\u6236\\u81EA\\u52D5\\u6263\\u6B3E\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 list\",children:mode>0?renderProgramDetails():renderPlanDetails()}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4\",children:[mode===0&&/*#__PURE__*/_jsx(FEIBButton,{onClick:function onClick(){return history.push('/C006005',{plan:plan});},children:\"\\u7DE8\\u8F2F\"}),mode===1&&/*#__PURE__*/_jsx(FEIBButton,{onClick:handleConfirm,children:\"\\u78BA\\u8A8D\"}),mode===2&&/*#__PURE__*/_jsx(FEIBButton,{onClick:function onClick(){return history.push('/C00600');},children:\"\\u56DE\\u5B58\\u9322\\u8A08\\u756B\\u9996\\u9801\"})]})]})})});};export default DepositPlanDetailPage;","map":{"version":3,"names":["useState","useEffect","useRef","useHistory","useLocation","uuid","Layout","MainScrollWrapper","SuccessFailureAnimations","InformationList","FEIBButton","currencySymbolGenerator","accountFormatter","dateToString","weekNumberToChinese","dateToYMD","closeFunc","startFunc","transactionAuth","AuthCode","showAnimationModal","FuncID","createConfirm","createDepositPlan","updateDepositPlan","AlertInvalidEntry","ConfirmToTransferSubAccountBalance","DetailPageWrapper","DepositPlanDetailPage","history","location","mainRef","mode","setMode","plan","setPlan","program","setProgram","state","isConfirmMode","payload","onBack","goBack","handleImageUpload","planId","image","sessionStorage","getItem","removeItem","handleCreate","extra","goalAmount","response","result","C00600","auth","confirm","imageId","current","scrollTo","top","behavior","isSuccess","errorTitle","errorDesc","message","onClose","handleConfirm","currentBalance","onOk","D00100","onCancel","renderModeTimingString","p","cycleMode","cycleTiming","renderListItem","list","map","l","label","value","caption","next","renderProgramDetails","name","rate","period","type","startDate","nextDeductionDate","undefined","bindAccountNo","renderPlanDetails","endDate","amount","progInfo","renderTitle","push"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00600_DepositPlan/C00600_4.jsx"],"sourcesContent":["import { useState, useEffect, useRef} from 'react';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport uuid from 'react-uuid';\r\n\r\nimport Layout from 'components/Layout/Layout';\r\nimport { MainScrollWrapper } from 'components/Layout';\r\nimport SuccessFailureAnimations from 'components/SuccessFailureAnimations';\r\nimport InformationList from 'components/InformationList';\r\nimport { FEIBButton } from 'components/elements';\r\nimport {\r\n  currencySymbolGenerator,\r\n  accountFormatter,\r\n  dateToString,\r\n  weekNumberToChinese,\r\n  dateToYMD,\r\n} from 'utilities/Generator';\r\nimport { closeFunc, startFunc, transactionAuth } from 'utilities/AppScriptProxy';\r\n\r\nimport { AuthCode } from 'utilities/TxnAuthCode';\r\nimport { showAnimationModal } from 'utilities/MessageModal';\r\nimport { FuncID } from 'utilities/FuncID';\r\nimport { createConfirm, createDepositPlan, updateDepositPlan } from './api';\r\nimport { AlertInvalidEntry, ConfirmToTransferSubAccountBalance } from './utils/prompts';\r\nimport { DetailPageWrapper } from './C00600.style';\r\n\r\n/**\r\n * C00600 存錢計畫 資訊頁\r\n */\r\nconst DepositPlanDetailPage = () => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const mainRef = useRef();\r\n  const [mode, setMode] = useState(0);\r\n  const [plan, setPlan] = useState();\r\n  const [program, setProgram] = useState();\r\n\r\n  useEffect(() => {\r\n    if (location.state && ('isConfirmMode' in location.state)) {\r\n      // 資訊頁有二種使用情境：確認新增存錢計畫、閱覽存錢計畫資訊。\r\n      if (location.state.isConfirmMode) {\r\n        // 設定成 (新增) 確認模式\r\n        setMode(1);\r\n        setProgram(location.state.payload);\r\n      } else {\r\n        // 設定成 (已建立) 資訊模式\r\n        setMode(0);\r\n        setPlan(location.state.plan);\r\n      }\r\n    } else {\r\n      // Guard: 此頁面接續上一頁的操作，意指若未在該情況下進入此頁為不正常操作。\r\n      AlertInvalidEntry({ onBack: () => history.goBack() });\r\n    }\r\n  }, []);\r\n\r\n  const handleImageUpload = async (planId) => {\r\n    const payload = {\r\n      planId,\r\n      image: sessionStorage.getItem('C00600-hero'),\r\n    };\r\n\r\n    await updateDepositPlan(payload);\r\n\r\n    sessionStorage.removeItem('C00600-hero'); // 清除暫存背景圖。\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    const {extra, goalAmount, ...payload} = program;\r\n\r\n    // 11.30 目前後端設定是 transactionAuth 之後才可以進行 createDepositPlan\r\n    // 否則會被判定惡意行為，這部分還需要等待後端進行調整\r\n\r\n    // Step 1. 執行 存錢計畫建立\r\n    const response = await createDepositPlan(payload);\r\n    if (!response?.result) return;\r\n\r\n    // Step 2. 再執行 transactionAuth\r\n    const auth = await transactionAuth(AuthCode.C00600); // 需通過 2FA 或 網銀密碼 驗證才能建立計劃。\r\n    if (!auth.result) return;\r\n\r\n    // Step 3. 成功後再執行 createConfirm\r\n    const confirm = await createConfirm();\r\n\r\n    if (confirm.result) {\r\n      // 驗證成功之後，若 imageId=0 再上傳自訂的影像。\r\n      if (payload.imageId === 0) await handleImageUpload(response.planId);\r\n      setMode(2);// 設定成 成功建立模式\r\n      sessionStorage.removeItem('C006003'); // 清除暫存表單資料。\r\n      mainRef.current.scrollTo({ top: 0, behavior: 'smooth'});// 建立成功後，將頁面滑至上方。\r\n    } else {\r\n      showAnimationModal({\r\n        isSuccess: false,\r\n        errorTitle: '設定失敗',\r\n        errorDesc: confirm.message,\r\n        onClose: () => closeFunc(),\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    if (program.currentBalance > 0) {\r\n      // 如果所選的子帳戶有餘額，要提示用戶自動轉帳。\r\n      // TODO 要求使用者自己將餘額轉出。 onOk: () => handleCreate() 應修正！\r\n      ConfirmToTransferSubAccountBalance({ onOk: () => startFunc(FuncID.D00100), onCancel: closeFunc });\r\n    } else {\r\n      handleCreate();\r\n    }\r\n  };\r\n\r\n  const renderModeTimingString = (p) => p && (p.cycleMode === 1 ? `每週${weekNumberToChinese(p.cycleTiming === 0 ? 7 : p.cycleTiming)}` : `每月${p.cycleTiming}號`);\r\n\r\n  const renderListItem = (list) => list.map((l) => (\r\n    <InformationList\r\n      key={uuid()}\r\n      title={l.label}\r\n      content={l.value}\r\n      caption={l.caption}\r\n      remark={l.next}\r\n      extra={typeof l.extra === 'function' && l.extra()}\r\n    />\r\n  ));\r\n\r\n  const renderProgramDetails = () => {\r\n    const list = [\r\n      { label: '存錢計畫名稱', value: program?.name },\r\n      { label: '適用利率', value: `${program?.extra.rate}%` },\r\n      { label: '存錢目標', value: currencySymbolGenerator('NTD', program?.goalAmount) },\r\n      { label: '計畫期間', value: program?.extra.period },\r\n      {\r\n        type: 'extra',\r\n        label: '第一筆扣款日',\r\n        value: dateToString(program?.startDate),\r\n        caption: '下一筆扣款日',\r\n        next: program?.extra.nextDeductionDate,\r\n        extra: () => (mode === 2 && dateToYMD() === program?.startDate ? '扣款成功' : undefined),\r\n      },\r\n      { label: '存錢帳號', value: program?.bindAccountNo ? accountFormatter(program?.bindAccountNo) : '加開子帳戶' },\r\n    ];\r\n    return renderListItem(list);\r\n  };\r\n\r\n  const renderPlanDetails = () => {\r\n    const list = [\r\n      { label: '存錢計畫名稱', value: plan?.name },\r\n      { label: '存錢計畫之帳號', value: accountFormatter(plan?.bindAccountNo) },\r\n      { label: '存錢計畫起始日', value: dateToString(plan?.startDate) },\r\n      { label: '存錢計畫到期日', value: dateToString(plan?.endDate) },\r\n      { label: '存錢週期', value: renderModeTimingString(plan) },\r\n      { label: '第一筆扣款日', value: dateToString(plan?.startDate) },\r\n      { label: '目標金額', value: currencySymbolGenerator('NTD', plan?.goalAmount) },\r\n      { label: '每期存款金額', value: currencySymbolGenerator('NTD', plan?.amount) },\r\n      { label: '利率', value: `${plan?.progInfo.rate}% (牌告+計畫加碼利率)` },\r\n      { label: '累積存款金額', value: currencySymbolGenerator('NTD', plan?.currentBalance) },\r\n    ];\r\n    return renderListItem(list);\r\n  };\r\n\r\n  const renderTitle = () => {\r\n    switch (mode) {\r\n      case 0:\r\n        return '存款計劃資訊';\r\n      case 1:\r\n        return '存款計劃確認';\r\n      case 2:\r\n      default:\r\n        return '存款計劃設定結果';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout title={renderTitle()} goBackFunc={() => history.goBack()}>\r\n      <MainScrollWrapper ref={mainRef}>\r\n        <DetailPageWrapper>\r\n          { mode > 0 && (\r\n            <div className=\"px-4\">\r\n              { mode === 2 && <SuccessFailureAnimations isSuccess successTitle=\"設定成功\" /> }\r\n              <div className=\"info\">\r\n                <div>存錢金額與週期</div>\r\n                <div className=\"text-primary text-lg balance\">{currencySymbolGenerator('NTD', program?.amount)}</div>\r\n                <div className=\"text-primary text-lg\">{renderModeTimingString(program)}</div>\r\n                <div className=\"text-primary\">從主帳戶自動扣款</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <hr />\r\n          <div className=\"px-4 list\">\r\n            { mode > 0 ? renderProgramDetails() : renderPlanDetails() }\r\n          </div>\r\n          <div className=\"px-4\">\r\n            { mode === 0 && <FEIBButton onClick={() => history.push('/C006005', { plan })}>編輯</FEIBButton> }\r\n            { mode === 1 && <FEIBButton onClick={handleConfirm}>確認</FEIBButton> }\r\n            { mode === 2 && <FEIBButton onClick={() => history.push('/C00600')}>回存錢計畫首頁</FEIBButton> }\r\n          </div>\r\n        </DetailPageWrapper>\r\n      </MainScrollWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default DepositPlanDetailPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}