{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import{changePwd}from'pages/T00900_PwdModify/api';import{closeFunc,transactionAuth}from'utilities/AppScriptProxy';import{showAnimationModal}from'utilities/MessageModal';/* Elements */import Layout from'components/Layout/Layout';import{FEIBButton}from'components/elements';import e2ee from'utilities/E2ee';import{useDispatch}from'react-redux';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{PasswordInputField}from'components/Fields';import{AuthCode}from'utilities/TxnAuthCode';import PwdModifyWrapper from'./T00900.style';import{validationSchema}from'./validationSchema';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PwdModify=function PwdModify(){var dispatch=useDispatch();var _useForm=useForm({defaultValues:{password:'',newPassword:'',newPasswordCheck:''},resolver:yupResolver(validationSchema)}),handleSubmit=_useForm.handleSubmit,control=_useForm.control;// 設定結果彈窗\nvar setResultDialog=function setResultDialog(response){showAnimationModal({isSuccess:response,successTitle:'設定成功',successDesc:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u60A8\\u7684\\u7DB2\\u9280\\u5BC6\\u78BC\\u5DF2\\u8B8A\\u66F4\\u6210\\u529F\\u56C9\\uFF01\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u4E0B\\u6B21\\u8ACB\\u4F7F\\u7528\\u65B0\\u8A2D\\u5B9A\\u4E4B\\u5BC6\\u78BC\\u9032\\u884C\\u767B\\u5165\"})]}),errorTitle:'設定失敗',errorCode:'',errorDesc:'',onClose:function onClose(){return closeFunc();}});};// 呼叫變更網銀密碼 API\nvar handlePwdModify=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var password,newPassword,newPasswordCheck,jsRs,param,changePwdResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:password=_ref.password,newPassword=_ref.newPassword,newPasswordCheck=_ref.newPasswordCheck;_context.next=3;return transactionAuth(AuthCode.T00900);case 3:jsRs=_context.sent;if(!jsRs.result){_context.next=12;break;}dispatch(setWaittingVisible(true));param={password:e2ee(password),newPassword:e2ee(newPassword),newPasswordCheck:e2ee(newPasswordCheck),actionCode:1};_context.next=9;return changePwd(param);case 9:changePwdResponse=_context.sent;dispatch(setWaittingVisible(false));setResultDialog(changePwdResponse);case 12:case\"end\":return _context.stop();}}},_callee);}));return function handlePwdModify(_x){return _ref2.apply(this,arguments);};}();// 點擊儲存變更按鈕，表單驗證\nvar onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:handlePwdModify(values);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Layout,{title:\"\\u7DB2\\u9280\\u5BC6\\u78BC\\u8B8A\\u66F4\",children:/*#__PURE__*/_jsx(PwdModifyWrapper,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u60A8\\u7684\\u7DB2\\u9280\\u5BC6\\u78BC\",name:\"password\",control:control}),/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u65B0\\u7684\\u7DB2\\u9280\\u5BC6\\u78BC\",name:\"newPassword\",control:control}),/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u8ACB\\u78BA\\u8A8D\\u65B0\\u7684\\u7DB2\\u9280\\u5BC6\\u78BC\",name:\"newPasswordCheck\",control:control})]}),/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u5132\\u5B58\\u8B8A\\u66F4\"})]})})});};export default PwdModify;","map":{"version":3,"names":["useForm","yupResolver","changePwd","closeFunc","transactionAuth","showAnimationModal","Layout","FEIBButton","e2ee","useDispatch","setWaittingVisible","PasswordInputField","AuthCode","PwdModifyWrapper","validationSchema","PwdModify","dispatch","defaultValues","password","newPassword","newPasswordCheck","resolver","handleSubmit","control","setResultDialog","response","isSuccess","successTitle","successDesc","errorTitle","errorCode","errorDesc","onClose","handlePwdModify","T00900","jsRs","result","param","actionCode","changePwdResponse","onSubmit","values"],"sources":["C:/Users/allen/git/app2-webview/src/pages/T00900_PwdModify/T00900.js"],"sourcesContent":["import { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { changePwd } from 'pages/T00900_PwdModify/api';\r\nimport { closeFunc, transactionAuth } from 'utilities/AppScriptProxy';\r\nimport { showAnimationModal } from 'utilities/MessageModal';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport { FEIBButton } from 'components/elements';\r\nimport e2ee from 'utilities/E2ee';\r\n\r\nimport { useDispatch } from 'react-redux';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { PasswordInputField } from 'components/Fields';\r\nimport { AuthCode } from 'utilities/TxnAuthCode';\r\nimport PwdModifyWrapper from './T00900.style';\r\nimport { validationSchema } from './validationSchema';\r\n\r\nconst PwdModify = () => {\r\n  const dispatch = useDispatch();\r\n  const {handleSubmit, control } = useForm({\r\n    defaultValues: {\r\n      password: '',\r\n      newPassword: '',\r\n      newPasswordCheck: '',\r\n    },\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n  // 設定結果彈窗\r\n  const setResultDialog = (response) => {\r\n    showAnimationModal({\r\n      isSuccess: response,\r\n      successTitle: '設定成功',\r\n      successDesc: (\r\n        <>\r\n          <p>您的網銀密碼已變更成功囉！</p>\r\n          <p>下次請使用新設定之密碼進行登入</p>\r\n        </>\r\n      ),\r\n      errorTitle: '設定失敗',\r\n      errorCode: '',\r\n      errorDesc: '',\r\n      onClose: () => closeFunc(),\r\n    });\r\n  };\r\n\r\n  // 呼叫變更網銀密碼 API\r\n  const handlePwdModify = async ({password, newPassword, newPasswordCheck}) => {\r\n    const jsRs = await transactionAuth(AuthCode.T00900);\r\n    if (jsRs.result) {\r\n      dispatch(setWaittingVisible(true));\r\n      const param = {\r\n        password: e2ee(password),\r\n        newPassword: e2ee(newPassword),\r\n        newPasswordCheck: e2ee(newPasswordCheck),\r\n        actionCode: 1,\r\n      };\r\n      const changePwdResponse = await changePwd(param);\r\n      dispatch(setWaittingVisible(false));\r\n      setResultDialog(changePwdResponse);\r\n    }\r\n  };\r\n\r\n  // 點擊儲存變更按鈕，表單驗證\r\n  const onSubmit = async (values) => {\r\n    handlePwdModify(values);\r\n  };\r\n\r\n  return (\r\n    <Layout title=\"網銀密碼變更\">\r\n      <PwdModifyWrapper>\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div>\r\n            <PasswordInputField\r\n              labelName=\"您的網銀密碼\"\r\n              name=\"password\"\r\n              control={control}\r\n            />\r\n            <PasswordInputField\r\n              labelName=\"新的網銀密碼\"\r\n              name=\"newPassword\"\r\n              control={control}\r\n            />\r\n            <PasswordInputField\r\n              labelName=\"請確認新的網銀密碼\"\r\n              name=\"newPasswordCheck\"\r\n              control={control}\r\n            />\r\n          </div>\r\n          <FEIBButton type=\"submit\">儲存變更</FEIBButton>\r\n        </form>\r\n      </PwdModifyWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default PwdModify;\r\n"],"mappings":"0PAAA,OAASA,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,yBAAyB,CACrD,OAASC,SAAS,KAAQ,4BAA4B,CACtD,OAASC,SAAS,CAAEC,eAAe,KAAQ,0BAA0B,CACrE,OAASC,kBAAkB,KAAQ,wBAAwB,CAE3D,cACA,MAAOC,OAAM,KAAM,0BAA0B,CAC7C,OAASC,UAAU,KAAQ,qBAAqB,CAChD,MAAOC,KAAI,KAAM,gBAAgB,CAEjC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,kBAAkB,KAAQ,8BAA8B,CACjE,OAASC,kBAAkB,KAAQ,mBAAmB,CACtD,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,MAAOC,iBAAgB,KAAM,gBAAgB,CAC7C,OAASC,gBAAgB,KAAQ,oBAAoB,CAAC,6IAEtD,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,aAAiCT,OAAO,CAAC,CACvCiB,aAAa,CAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,gBAAgB,CAAE,EACpB,CAAC,CACDC,QAAQ,CAAEpB,WAAW,CAACa,gBAAgB,CACxC,CAAC,CAAC,CAPKQ,YAAY,UAAZA,YAAY,CAAEC,OAAO,UAAPA,OAAO,CAS5B;AACA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,QAAQ,CAAK,CACpCpB,kBAAkB,CAAC,CACjBqB,SAAS,CAAED,QAAQ,CACnBE,YAAY,CAAE,MAAM,CACpBC,WAAW,cACT,wCACE,qGAAoB,cACpB,iHAAsB,GAEzB,CACDC,UAAU,CAAE,MAAM,CAClBC,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,OAAO,CAAE,yBAAM7B,UAAS,EAAE,EAC5B,CAAC,CAAC,CACJ,CAAC,CAED;AACA,GAAM8B,gBAAe,6FAAG,gNAAQf,QAAQ,MAARA,QAAQ,CAAEC,WAAW,MAAXA,WAAW,CAAEC,gBAAgB,MAAhBA,gBAAgB,uBAClDhB,gBAAe,CAACQ,QAAQ,CAACsB,MAAM,CAAC,QAA7CC,IAAI,mBACNA,IAAI,CAACC,MAAM,0BACbpB,QAAQ,CAACN,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAC5B2B,KAAK,CAAG,CACZnB,QAAQ,CAAEV,IAAI,CAACU,QAAQ,CAAC,CACxBC,WAAW,CAAEX,IAAI,CAACW,WAAW,CAAC,CAC9BC,gBAAgB,CAAEZ,IAAI,CAACY,gBAAgB,CAAC,CACxCkB,UAAU,CAAE,CACd,CAAC,uBAC+BpC,UAAS,CAACmC,KAAK,CAAC,QAA1CE,iBAAiB,eACvBvB,QAAQ,CAACN,kBAAkB,CAAC,KAAK,CAAC,CAAC,CACnCc,eAAe,CAACe,iBAAiB,CAAC,CAAC,uDAEtC,kBAdKN,gBAAe,6CAcpB,CAED;AACA,GAAMO,SAAQ,6FAAG,kBAAOC,MAAM,wHAC5BR,eAAe,CAACQ,MAAM,CAAC,CAAC,wDACzB,kBAFKD,SAAQ,8CAEb,CAED,mBACE,KAAC,MAAM,EAAC,KAAK,CAAC,sCAAQ,uBACpB,KAAC,gBAAgB,wBACf,cAAM,QAAQ,CAAElB,YAAY,CAACkB,QAAQ,CAAE,wBACrC,oCACE,KAAC,kBAAkB,EACjB,SAAS,CAAC,sCAAQ,CAClB,IAAI,CAAC,UAAU,CACf,OAAO,CAAEjB,OAAQ,EACjB,cACF,KAAC,kBAAkB,EACjB,SAAS,CAAC,sCAAQ,CAClB,IAAI,CAAC,aAAa,CAClB,OAAO,CAAEA,OAAQ,EACjB,cACF,KAAC,kBAAkB,EACjB,SAAS,CAAC,wDAAW,CACrB,IAAI,CAAC,kBAAkB,CACvB,OAAO,CAAEA,OAAQ,EACjB,GACE,cACN,KAAC,UAAU,EAAC,IAAI,CAAC,QAAQ,sCAAkB,GACtC,EACU,EACZ,CAEb,CAAC,CAED,cAAeR,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}