{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useDispatch}from'react-redux';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import e2ee from'utilities/E2ee';import{closeFunc,transactionAuth}from'utilities/AppScriptProxy';import{AuthCode}from'utilities/TxnAuthCode';import{PasswordInputField}from'components/Fields';import{FEIBButton}from'components/elements';import Layout from'components/Layout/Layout';import{changeUserName}from'pages/T00800_ChangeUserName/api';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{showAnimationModal}from'utilities/MessageModal';import ChangeUserNameWrapper from'./T00800.style';import{validationSchema}from'./validationSchema';/**\r\n * T00800 使用者代號變更\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangeUserName=function ChangeUserName(){var dispatch=useDispatch();var _useForm=useForm({defaultValues:{userName:'',newUserName:'',newUserNameCheck:''},resolver:yupResolver(validationSchema)}),handleSubmit=_useForm.handleSubmit,control=_useForm.control;// 點擊儲存變更按鈕，表單驗證 呼叫變更使用者代號 API\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var userName,newUserName,newUserNameCheck,jsRs,param,_yield$changeUserName,code,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userName=_ref.userName,newUserName=_ref.newUserName,newUserNameCheck=_ref.newUserNameCheck;_context.next=3;return transactionAuth(AuthCode.T00800);case 3:jsRs=_context.sent;if(!jsRs.result){_context.next=14;break;}param={userName:e2ee(userName),newUserName:e2ee(newUserName),newUserNameCheck:e2ee(newUserNameCheck)};dispatch(setWaittingVisible(true));_context.next=9;return changeUserName(param);case 9:_yield$changeUserName=_context.sent;code=_yield$changeUserName.code;message=_yield$changeUserName.message;showAnimationModal({isSuccess:code==='0000',successTitle:'設定成功',successDesc:'您已成功變更使用者代號',errorTitle:'設定失敗',errorCode:code,// TODO\nerrorDesc:message,onClose:closeFunc});dispatch(setWaittingVisible(false));case 14:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Layout,{title:\"\\u4F7F\\u7528\\u8005\\u4EE3\\u865F\\u8B8A\\u66F4\",children:/*#__PURE__*/_jsx(ChangeUserNameWrapper,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PasswordInputField,{name:\"userName\",control:control,labelName:\"\\u60A8\\u7684\\u4F7F\\u7528\\u8005\\u4EE3\\u865F\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u4F7F\\u7528\\u8005\\u4EE3\\u865F(6-20\\u4F4D\\u82F1\\u6578\\u5B57)\"}),/*#__PURE__*/_jsx(PasswordInputField,{name:\"newUserName\",control:control,labelName:\"\\u65B0\\u7684\\u4F7F\\u7528\\u8005\\u4EE3\\u865F\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u65B0\\u7684\\u4F7F\\u7528\\u8005\\u4EE3\\u865F(6-20\\u4F4D\\u82F1\\u6578\\u5B57)\"}),/*#__PURE__*/_jsx(PasswordInputField,{name:\"newUserNameCheck\",control:control,labelName:\"\\u8ACB\\u78BA\\u8A8D\\u65B0\\u7684\\u4F7F\\u7528\\u8005\\u4EE3\\u865F\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u65B0\\u7684\\u4F7F\\u7528\\u8005\\u4EE3\\u865F(6-20\\u4F4D\\u82F1\\u6578\\u5B57)\"})]}),/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u5132\\u5B58\\u8B8A\\u66F4\"})]})})});};export default ChangeUserName;","map":{"version":3,"names":["useDispatch","useForm","yupResolver","e2ee","closeFunc","transactionAuth","AuthCode","PasswordInputField","FEIBButton","Layout","changeUserName","setWaittingVisible","showAnimationModal","ChangeUserNameWrapper","validationSchema","ChangeUserName","dispatch","defaultValues","userName","newUserName","newUserNameCheck","resolver","handleSubmit","control","onSubmit","T00800","jsRs","result","param","code","message","isSuccess","successTitle","successDesc","errorTitle","errorCode","errorDesc","onClose"],"sources":["C:/Users/allen/git/app2-webview/src/pages/T00800_ChangeUserName/T00800.js"],"sourcesContent":["import { useDispatch } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\nimport e2ee from 'utilities/E2ee';\r\nimport { closeFunc, transactionAuth } from 'utilities/AppScriptProxy';\r\nimport { AuthCode } from 'utilities/TxnAuthCode';\r\nimport { PasswordInputField } from 'components/Fields';\r\nimport { FEIBButton } from 'components/elements';\r\nimport Layout from 'components/Layout/Layout';\r\nimport { changeUserName } from 'pages/T00800_ChangeUserName/api';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\n\r\nimport { showAnimationModal } from 'utilities/MessageModal';\r\nimport ChangeUserNameWrapper from './T00800.style';\r\nimport { validationSchema } from './validationSchema';\r\n\r\n/**\r\n * T00800 使用者代號變更\r\n */\r\nconst ChangeUserName = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { handleSubmit, control } = useForm({\r\n    defaultValues: {\r\n      userName: '',\r\n      newUserName: '',\r\n      newUserNameCheck: '',\r\n    },\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n  // 點擊儲存變更按鈕，表單驗證 呼叫變更使用者代號 API\r\n  const onSubmit = async ({ userName, newUserName, newUserNameCheck }) => {\r\n    const jsRs = await transactionAuth(AuthCode.T00800);\r\n    if (jsRs.result) {\r\n      const param = {\r\n        userName: e2ee(userName),\r\n        newUserName: e2ee(newUserName),\r\n        newUserNameCheck: e2ee(newUserNameCheck),\r\n      };\r\n      dispatch(setWaittingVisible(true));\r\n      const { code, message } = await changeUserName(param);\r\n\r\n      showAnimationModal({\r\n        isSuccess: code === '0000',\r\n        successTitle: '設定成功',\r\n        successDesc: '您已成功變更使用者代號',\r\n        errorTitle: '設定失敗',\r\n        errorCode: code, // TODO\r\n        errorDesc: message,\r\n        onClose: closeFunc,\r\n      });\r\n\r\n      dispatch(setWaittingVisible(false));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout title=\"使用者代號變更\">\r\n      <ChangeUserNameWrapper>\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div>\r\n            <PasswordInputField\r\n              name=\"userName\"\r\n              control={control}\r\n              labelName=\"您的使用者代號\"\r\n              placeholder=\"請輸入使用者代號(6-20位英數字)\"\r\n            />\r\n            <PasswordInputField\r\n              name=\"newUserName\"\r\n              control={control}\r\n              labelName=\"新的使用者代號\"\r\n              placeholder=\"請輸入新的使用者代號(6-20位英數字)\"\r\n            />\r\n            <PasswordInputField\r\n              name=\"newUserNameCheck\"\r\n              control={control}\r\n              labelName=\"請確認新的使用者代號\"\r\n              placeholder=\"請輸入新的使用者代號(6-20位英數字)\"\r\n            />\r\n          </div>\r\n          <FEIBButton type=\"submit\">儲存變更</FEIBButton>\r\n        </form>\r\n      </ChangeUserNameWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ChangeUserName;\r\n"],"mappings":"0PAAA,OAASA,WAAW,KAAQ,aAAa,CACzC,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,yBAAyB,CAErD,MAAOC,KAAI,KAAM,gBAAgB,CACjC,OAASC,SAAS,CAAEC,eAAe,KAAQ,0BAA0B,CACrE,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,kBAAkB,KAAQ,mBAAmB,CACtD,OAASC,UAAU,KAAQ,qBAAqB,CAChD,MAAOC,OAAM,KAAM,0BAA0B,CAC7C,OAASC,cAAc,KAAQ,iCAAiC,CAChE,OAASC,kBAAkB,KAAQ,8BAA8B,CAEjE,OAASC,kBAAkB,KAAQ,wBAAwB,CAC3D,MAAOC,sBAAqB,KAAM,gBAAgB,CAClD,OAASC,gBAAgB,KAAQ,oBAAoB,CAErD;AACA;AACA,GAFA,wFAGA,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAMC,SAAQ,CAAGhB,WAAW,EAAE,CAE9B,aAAkCC,OAAO,CAAC,CACxCgB,aAAa,CAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,gBAAgB,CAAE,EACpB,CAAC,CACDC,QAAQ,CAAEnB,WAAW,CAACY,gBAAgB,CACxC,CAAC,CAAC,CAPMQ,YAAY,UAAZA,YAAY,CAAEC,OAAO,UAAPA,OAAO,CAS7B;AACA,GAAMC,SAAQ,6FAAG,iOAASN,QAAQ,MAARA,QAAQ,CAAEC,WAAW,MAAXA,WAAW,CAAEC,gBAAgB,MAAhBA,gBAAgB,uBAC5Cf,gBAAe,CAACC,QAAQ,CAACmB,MAAM,CAAC,QAA7CC,IAAI,mBACNA,IAAI,CAACC,MAAM,0BACPC,KAAK,CAAG,CACZV,QAAQ,CAAEf,IAAI,CAACe,QAAQ,CAAC,CACxBC,WAAW,CAAEhB,IAAI,CAACgB,WAAW,CAAC,CAC9BC,gBAAgB,CAAEjB,IAAI,CAACiB,gBAAgB,CACzC,CAAC,CACDJ,QAAQ,CAACL,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,sBACHD,eAAc,CAACkB,KAAK,CAAC,4CAA7CC,IAAI,uBAAJA,IAAI,CAAEC,OAAO,uBAAPA,OAAO,CAErBlB,kBAAkB,CAAC,CACjBmB,SAAS,CAAEF,IAAI,GAAK,MAAM,CAC1BG,YAAY,CAAE,MAAM,CACpBC,WAAW,CAAE,aAAa,CAC1BC,UAAU,CAAE,MAAM,CAClBC,SAAS,CAAEN,IAAI,CAAE;AACjBO,SAAS,CAAEN,OAAO,CAClBO,OAAO,CAAEjC,SACX,CAAC,CAAC,CAEFY,QAAQ,CAACL,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,uDAEvC,kBAvBKa,SAAQ,6CAuBb,CAED,mBACE,KAAC,MAAM,EAAC,KAAK,CAAC,4CAAS,uBACrB,KAAC,qBAAqB,wBACpB,cAAM,QAAQ,CAAEF,YAAY,CAACE,QAAQ,CAAE,wBACrC,oCACE,KAAC,kBAAkB,EACjB,IAAI,CAAC,UAAU,CACf,OAAO,CAAED,OAAQ,CACjB,SAAS,CAAC,4CAAS,CACnB,WAAW,CAAC,gFAAoB,EAChC,cACF,KAAC,kBAAkB,EACjB,IAAI,CAAC,aAAa,CAClB,OAAO,CAAEA,OAAQ,CACjB,SAAS,CAAC,4CAAS,CACnB,WAAW,CAAC,4FAAsB,EAClC,cACF,KAAC,kBAAkB,EACjB,IAAI,CAAC,kBAAkB,CACvB,OAAO,CAAEA,OAAQ,CACjB,SAAS,CAAC,8DAAY,CACtB,WAAW,CAAC,4FAAsB,EAClC,GACE,cACN,KAAC,UAAU,EAAC,IAAI,CAAC,QAAQ,sCAAkB,GACtC,EACe,EACjB,CAEb,CAAC,CAED,cAAeR,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}