{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import InfoArea from'components/InfoArea';import ProgressBar from'components/ProgressBar';import FEIBButton from'components/elements/FEIBButton';import ThreeColumnInfoPanel from'components/ThreeColumnInfoPanel';import ArrowNextButton from'components/ArrowNextButton';import{weekNumberToChinese,dateToString,stringToDate,switchZhNumber,toCurrency}from'utilities/Generator';import DepositPlanWrapper from'./DepositPlan.style';import{getStage}from'./DepositPlan.utils';/*\r\n* ==================== DepositPlan 組件說明 ====================\r\n* 存錢計畫下方資訊卡\r\n* ==================== DepositPlan 可傳參數 ====================\r\n* 1. currentBalance: number -> 目前金額，預設NTD。\r\n* 2. goalAmount: number -> 目標金額，預設NTD。\r\n* 3. endDate: string -> YYYYMMDD\r\n* 4. progInfo -> 存錢計劃適用方案(Program)資訊\r\n* 5. amount -> 每期存入金額，格式：99999。\r\n* 6. cycleMode -> 存入週期（1.每周、2.每月）\r\n* 7. cycleTiming -> 存入時機；每周：0～6(周日～周六)、每月：1~28及月底(31)\r\n* 8. onShowDetailClick: function -> 點擊「存錢歷程」觸發。\r\n* 9. onTerminatePlanClick: function -> 點擊「結束本計畫」觸發。\r\n* */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DepositPlan=function DepositPlan(_ref){var _ref$currentBalance=_ref.currentBalance,currentBalance=_ref$currentBalance===void 0?0:_ref$currentBalance,_ref$goalAmount=_ref.goalAmount,goalAmount=_ref$goalAmount===void 0?1000000:_ref$goalAmount,endDate=_ref.endDate,progInfo=_ref.progInfo,amount=_ref.amount,cycleMode=_ref.cycleMode,cycleTiming=_ref.cycleTiming,onShowDetailClick=_ref.onShowDetailClick,onTerminatePlanClick=_ref.onTerminatePlanClick;var progressPercentage=Math.trunc(currentBalance/goalAmount*100);var isPlanCompleted=progressPercentage>=100;var isPlanExpired=endDate&&stringToDate(endDate)<new Date();var isPlanFailed=progressPercentage<100&&isPlanExpired;var shouldShowButton=isPlanExpired||isPlanCompleted;var stage=getStage(isPlanFailed,progressPercentage);var rate=progInfo.rate;var fancyCycleTimming=function fancyCycleTimming(){if(cycleMode===1){return\"\\u5468\".concat(weekNumberToChinese(cycleTiming===0?7:cycleTiming));}return\"\".concat(cycleTiming,\"\\u865F\");};var bonusInfo=[{label:'適用利率',value:\"\".concat(rate,\"%\")},{label:\"\\u6BCF\".concat(cycleMode===1?'周':'月',\"\\u5B58\\u6B3E\\u65E5\"),value:fancyCycleTimming()},{label:'每次存款金額',value:switchZhNumber(amount)}];return/*#__PURE__*/_jsxs(DepositPlanWrapper,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pad flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:stage.animation,className:\"object-contain\",alt:\"\",width:\"124\",height:\"120\"}),/*#__PURE__*/_jsx(InfoArea,_objectSpread(_objectSpread({variant:\"top\",position:\"top\",space:\"auto\"},stage.infoAreaStyles),{},{children:stage.text})),/*#__PURE__*/_jsx(ProgressBar,{value:progressPercentage}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u76EE\\u524D\\u91D1\\u984D\",' ',/*#__PURE__*/_jsx(\"em\",{children:toCurrency(currentBalance)}),\"/\",switchZhNumber(goalAmount)]}),endDate&&/*#__PURE__*/_jsxs(\"div\",{children:[dateToString(endDate),\"\\u5230\\u671F\"]})]}),shouldShowButton?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FEIBButton,{className:\"mt-3\",onClick:onTerminatePlanClick,children:\"\\u7D50\\u675F\\u672C\\u8A08\\u756B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"blockGoBack\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"pad\",children:[/*#__PURE__*/_jsx(ThreeColumnInfoPanel,{content:bonusInfo}),/*#__PURE__*/_jsx(ArrowNextButton,{onClick:onShowDetailClick,children:\"\\u5B58\\u9322\\u6B77\\u7A0B\"})]})]})]});};export default DepositPlan;","map":{"version":3,"names":["InfoArea","ProgressBar","FEIBButton","ThreeColumnInfoPanel","ArrowNextButton","weekNumberToChinese","dateToString","stringToDate","switchZhNumber","toCurrency","DepositPlanWrapper","getStage","DepositPlan","currentBalance","goalAmount","endDate","progInfo","amount","cycleMode","cycleTiming","onShowDetailClick","onTerminatePlanClick","progressPercentage","Math","trunc","isPlanCompleted","isPlanExpired","Date","isPlanFailed","shouldShowButton","stage","rate","fancyCycleTimming","bonusInfo","label","value","animation","infoAreaStyles","text"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00600_DepositPlan/components/DepositPlan.jsx"],"sourcesContent":["import InfoArea from 'components/InfoArea';\r\nimport ProgressBar from 'components/ProgressBar';\r\nimport FEIBButton from 'components/elements/FEIBButton';\r\nimport ThreeColumnInfoPanel from 'components/ThreeColumnInfoPanel';\r\nimport ArrowNextButton from 'components/ArrowNextButton';\r\nimport {\r\n  weekNumberToChinese, dateToString, stringToDate, switchZhNumber, toCurrency,\r\n} from 'utilities/Generator';\r\n\r\nimport DepositPlanWrapper from './DepositPlan.style';\r\nimport { getStage } from './DepositPlan.utils';\r\n\r\n/*\r\n* ==================== DepositPlan 組件說明 ====================\r\n* 存錢計畫下方資訊卡\r\n* ==================== DepositPlan 可傳參數 ====================\r\n* 1. currentBalance: number -> 目前金額，預設NTD。\r\n* 2. goalAmount: number -> 目標金額，預設NTD。\r\n* 3. endDate: string -> YYYYMMDD\r\n* 4. progInfo -> 存錢計劃適用方案(Program)資訊\r\n* 5. amount -> 每期存入金額，格式：99999。\r\n* 6. cycleMode -> 存入週期（1.每周、2.每月）\r\n* 7. cycleTiming -> 存入時機；每周：0～6(周日～周六)、每月：1~28及月底(31)\r\n* 8. onShowDetailClick: function -> 點擊「存錢歷程」觸發。\r\n* 9. onTerminatePlanClick: function -> 點擊「結束本計畫」觸發。\r\n* */\r\n\r\nconst DepositPlan = ({\r\n  currentBalance = 0,\r\n  goalAmount = 1000000,\r\n  endDate,\r\n  progInfo,\r\n  amount,\r\n  cycleMode,\r\n  cycleTiming,\r\n  onShowDetailClick,\r\n  onTerminatePlanClick,\r\n}) => {\r\n  const progressPercentage = Math.trunc((currentBalance / goalAmount) * 100);\r\n  const isPlanCompleted = progressPercentage >= 100;\r\n  const isPlanExpired = endDate && (stringToDate(endDate) < new Date());\r\n  const isPlanFailed = progressPercentage < 100 && isPlanExpired;\r\n  const shouldShowButton = isPlanExpired || isPlanCompleted;\r\n  const stage = getStage(isPlanFailed, progressPercentage);\r\n\r\n  const { rate } = progInfo;\r\n  const fancyCycleTimming = () => {\r\n    if (cycleMode === 1) {\r\n      return `周${weekNumberToChinese(cycleTiming === 0 ? 7 : cycleTiming)}`;\r\n    }\r\n    return `${cycleTiming}號`;\r\n  };\r\n  const bonusInfo = [\r\n    { label: '適用利率', value: `${rate}%`},\r\n    { label: `每${cycleMode === 1 ? '周' : '月'}存款日`, value: fancyCycleTimming()},\r\n    { label: '每次存款金額', value: switchZhNumber(amount)},\r\n  ];\r\n\r\n  return (\r\n    <DepositPlanWrapper>\r\n      <div className=\"pad flex\">\r\n        <img src={stage.animation} className=\"object-contain\" alt=\"\" width=\"124\" height=\"120\" />\r\n        <InfoArea variant=\"top\" position=\"top\" space=\"auto\" {...stage.infoAreaStyles}>\r\n          {stage.text}\r\n        </InfoArea>\r\n        <ProgressBar value={progressPercentage} />\r\n        <div>\r\n          目前金額\r\n          {' '}\r\n          {/* TODO 若存入的錢不是以萬元為單位時，格式會跑掉，需要確認後續的呈現方式 */}\r\n          {/* <em>{switchZhNumber(currentBalance)}</em> */}\r\n          <em>{toCurrency(currentBalance)}</em>\r\n          /\r\n          {switchZhNumber(goalAmount)}\r\n        </div>\r\n        { endDate && (\r\n        <div>\r\n          {dateToString(endDate)}\r\n          到期\r\n        </div>\r\n        )}\r\n\r\n      </div>\r\n      {shouldShowButton ? (\r\n        <>\r\n          <FEIBButton className=\"mt-3\" onClick={onTerminatePlanClick}>結束本計畫</FEIBButton>\r\n\r\n          {/* Use as indicator to overwrite goBackFunc (in Layout) or not. */}\r\n          <div className=\"blockGoBack\" />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <hr />\r\n          <div className=\"pad\">\r\n            <ThreeColumnInfoPanel content={bonusInfo} />\r\n            <ArrowNextButton onClick={onShowDetailClick}>存錢歷程</ArrowNextButton>\r\n          </div>\r\n        </>\r\n      )}\r\n    </DepositPlanWrapper>\r\n  );\r\n};\r\n\r\nexport default DepositPlan;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}