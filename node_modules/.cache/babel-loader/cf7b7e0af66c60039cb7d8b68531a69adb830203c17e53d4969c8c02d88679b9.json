{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useHistory}from'react-router';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import{transactionAuth}from'utilities/AppScriptProxy';import{showAnimationModal}from'utilities/MessageModal';/* Elements */import Layout from'components/Layout/Layout';import Accordion from'components/Accordion';import{FEIBButton}from'components/elements';import{PasswordInputField}from'components/Fields';import{AuthCode}from'utilities/TxnAuthCode';import{useDispatch}from'react-redux';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{activate}from'./api';/* Styles */import CardLessSettingWrapper from'./T00400.style';import DealContent from'./dealContent';import{validationSchema}from'./validationSchema';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardLessATM=function CardLessATM(){var _useForm=useForm({defaultValues:{withdrawPwd:'',withdrawPwdCheck:''},resolver:yupResolver(validationSchema)}),handleSubmit=_useForm.handleSubmit,control=_useForm.control;var history=useHistory();var dispatch=useDispatch();// 開通無卡提款與設定無卡提款密碼\nvar activateWithdrawAndSetPwd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(param){var _yield$transactionAut,result,activateRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return transactionAuth(AuthCode.T00400);case 2:_yield$transactionAut=_context.sent;result=_yield$transactionAut.result;if(!result){_context.next=11;break;}dispatch(setWaittingVisible(true));_context.next=8;return activate(param);case 8:activateRes=_context.sent;// 開通狀態顯示\nshowAnimationModal({isSuccess:!!activateRes,successTitle:'設定成功',errorTitle:'設定失敗',errorDesc:'設定失敗',onClose:function onClose(){return history.goBack();}});dispatch(setWaittingVisible(false));case 11:case\"end\":return _context.stop();}}},_callee);}));return function activateWithdrawAndSetPwd(_x){return _ref.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2){var withdrawPwd;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:withdrawPwd=_ref2.withdrawPwd;activateWithdrawAndSetPwd(withdrawPwd);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x2){return _ref3.apply(this,arguments);};}();var renderPage=function renderPage(){return/*#__PURE__*/_jsxs(\"form\",{id:\"withdrawPwdForm\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u63D0\\u6B3E\\u5BC6\\u78BC\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u63D0\\u6B3E\\u5BC6\\u78BC(4-12\\u4F4D\\u6578\\u5B57)\",name:\"withdrawPwd\",control:control}),/*#__PURE__*/_jsx(PasswordInputField,{labelName:\"\\u78BA\\u8A8D\\u63D0\\u6B3E\\u5BC6\\u78BC\",placeholder:\"\\u8ACB\\u518D\\u8F38\\u5165\\u4E00\\u6B21\\u63D0\\u6B3E\\u5BC6\\u78BC(4-12\\u4F4D\\u6578\\u5B57)\",name:\"withdrawPwdCheck\",control:control}),/*#__PURE__*/_jsx(Accordion,{title:\"\\u7121\\u5361\\u63D0\\u6B3E\\u7D04\\u5B9A\\u4E8B\\u9805\",space:\"both\",children:/*#__PURE__*/_jsx(DealContent,{})}),/*#__PURE__*/_jsx(Accordion,{space:\"bottom\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u672C\\u4EA4\\u6613\\u9650\\u664215\\u5206\\u9418\\u5167\\u6709\\u6548\\uFF0C\\u8ACB\\u65BC\\u4EA4\\u6613\\u6709\\u6548\\u6642\\u9593\\u5167\\uFF0C\\u81F3\\u672C\\u884C\\u63D0\\u4F9B\\u7121\\u5361\\u63D0\\u6B3E\\u529F\\u80FD\\u4E4BATM\\u5B8C\\u6210\\u63D0\\u6B3E\\u3002\\u82E5\\u903E\\u6642\\u8ACB\\u91CD\\u65B0\\u7533\\u8ACB\\u3002(\\u5BE6\\u969B\\u4EA4\\u6613\\u6709\\u6548\\u6642\\u9593\\u4EE5\\u672C\\u884C\\u7CFB\\u7D71\\u6642\\u9593\\u70BA\\u6E96)\\u3002\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u63D0\\u9192\\u60A8\\uFF0CATM\\u63D0\\u6B3E\\u6642\\u8ACB\\u52D9\\u5FC5\\u78BA\\u8A8D\\u60A8\\u7684\\u5B58\\u6B3E\\u9918\\u984D\\u662F\\u5426\\u8DB3\\u5920\\uFF0C\\u907F\\u514D\\u63D0\\u6B3E\\u5931\\u6557\\u3002 \"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u7121\\u5361\\u63D0\\u6B3E\\u5BC6\\u78BC\\u9023\\u7E8C\\u932F\\u8AA43\\u6B21\\uFF0C\\u5373\\u9396\\u4F4F\\u670D\\u52D9\\uFF0C\\u9808\\u91CD\\u65B0\\u7533\\u8ACB\\u670D\\u52D9\\u3002\"})]})})]}),/*#__PURE__*/_jsx(FEIBButton,{type:\"submit\",children:\"\\u540C\\u610F\\u689D\\u6B3E\\u4E26\\u9001\\u51FA\"})]});};return/*#__PURE__*/_jsx(Layout,{title:\"\\u7121\\u5361\\u63D0\\u6B3E\\u8A2D\\u5B9A\",goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(CardLessSettingWrapper,{children:renderPage()})});};export default CardLessATM;","map":{"version":3,"names":["useHistory","useForm","yupResolver","transactionAuth","showAnimationModal","Layout","Accordion","FEIBButton","PasswordInputField","AuthCode","useDispatch","setWaittingVisible","activate","CardLessSettingWrapper","DealContent","validationSchema","CardLessATM","defaultValues","withdrawPwd","withdrawPwdCheck","resolver","handleSubmit","control","history","dispatch","activateWithdrawAndSetPwd","param","T00400","result","activateRes","isSuccess","successTitle","errorTitle","errorDesc","onClose","goBack","onSubmit","renderPage"],"sources":["C:/Users/allen/git/app2-webview/src/pages/T00400_CardLessSetting/T00400_1.js"],"sourcesContent":["import { useHistory } from 'react-router';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { transactionAuth } from 'utilities/AppScriptProxy';\r\nimport { showAnimationModal } from 'utilities/MessageModal';\r\n\r\n/* Elements */\r\nimport Layout from 'components/Layout/Layout';\r\nimport Accordion from 'components/Accordion';\r\nimport { FEIBButton } from 'components/elements';\r\nimport { PasswordInputField } from 'components/Fields';\r\n\r\nimport { AuthCode } from 'utilities/TxnAuthCode';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { activate } from './api';\r\n\r\n/* Styles */\r\nimport CardLessSettingWrapper from './T00400.style';\r\nimport DealContent from './dealContent';\r\nimport { validationSchema } from './validationSchema';\r\n\r\nconst CardLessATM = () => {\r\n  const {handleSubmit, control } = useForm({\r\n    defaultValues: {\r\n      withdrawPwd: '',\r\n      withdrawPwdCheck: '',\r\n    },\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  // 開通無卡提款與設定無卡提款密碼\r\n  const activateWithdrawAndSetPwd = async (param) => {\r\n    const {result} = await transactionAuth(AuthCode.T00400);\r\n    if (result) {\r\n      dispatch(setWaittingVisible(true));\r\n      const activateRes = await activate(param);\r\n\r\n      // 開通狀態顯示\r\n      showAnimationModal({\r\n        isSuccess: !!activateRes,\r\n        successTitle: '設定成功',\r\n        errorTitle: '設定失敗',\r\n        errorDesc: '設定失敗',\r\n        onClose: () => history.goBack(),\r\n      });\r\n      dispatch(setWaittingVisible(false));\r\n    }\r\n  };\r\n\r\n  const onSubmit = async ({ withdrawPwd }) => {\r\n    activateWithdrawAndSetPwd(withdrawPwd);\r\n  };\r\n\r\n  const renderPage = () => (\r\n    <form id=\"withdrawPwdForm\" onSubmit={handleSubmit(onSubmit)}>\r\n      <div>\r\n        <PasswordInputField\r\n          labelName=\"提款密碼\"\r\n          placeholder=\"請輸入提款密碼(4-12位數字)\"\r\n          name=\"withdrawPwd\"\r\n          control={control}\r\n        />\r\n        <PasswordInputField\r\n          labelName=\"確認提款密碼\"\r\n          placeholder=\"請再輸入一次提款密碼(4-12位數字)\"\r\n          name=\"withdrawPwdCheck\"\r\n          control={control}\r\n        />\r\n        <Accordion title=\"無卡提款約定事項\" space=\"both\">\r\n          <DealContent />\r\n        </Accordion>\r\n        <Accordion space=\"bottom\">\r\n          <ul>\r\n            <li>本交易限時15分鐘內有效，請於交易有效時間內，至本行提供無卡提款功能之ATM完成提款。若逾時請重新申請。(實際交易有效時間以本行系統時間為準)。</li>\r\n            <li>提醒您，ATM提款時請務必確認您的存款餘額是否足夠，避免提款失敗。 </li>\r\n            <li>無卡提款密碼連續錯誤3次，即鎖住服務，須重新申請服務。</li>\r\n          </ul>\r\n        </Accordion>\r\n      </div>\r\n      <FEIBButton type=\"submit\">\r\n        同意條款並送出\r\n      </FEIBButton>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <Layout title=\"無卡提款設定\" goBackFunc={() => history.goBack()}>\r\n      <CardLessSettingWrapper>{renderPage()}</CardLessSettingWrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CardLessATM;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}