{"ast":null,"code":"import _objectSpread from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/allen/git/app2-webview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router';import{useDispatch}from'react-redux';import parse from'html-react-parser';import Main from'components/Layout';import Loading from'components/Loading';import Accordion from'components/Accordion';import Layout from'components/Layout/Layout';import CreditCard from'components/CreditCard';import{FEIBButton}from'components/elements';import InformationList from'components/InformationList';import{setWaittingVisible}from'stores/reducers/ModalReducer';import{FuncID}from'utilities/FuncID';import{closeFunc,startFunc}from'utilities/AppScriptProxy';import{getCreditCardTerms,queryCardInfo}from'./api';import{getCardListing,getCreditListing}from'./utils';import{InfoPageWrapper}from'./C00700.style';/**\r\n * C00700_1 信用卡 資訊\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var C007001=function C007001(){var _location$state;// TODO location.state 參數可以被 refactor\nvar history=useHistory();var location=useLocation();var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),cardInfo=_useState2[0],setCardInfo=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),terms=_useState4[0],setTerms=_useState4[1];var cardNo=(_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.isBankeeCard?location.state.cards[0].cardNo:'';useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var cardInfoRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setWaittingVisible(true));_context.next=3;return queryCardInfo(cardNo);case 3:cardInfoRes=_context.sent;setCardInfo(cardInfoRes);dispatch(setWaittingVisible(false));case 6:case\"end\":return _context.stop();}}},_callee);})),[]);var lazyLoadTerms=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(terms){_context2.next=6;break;}_context2.t0=setTerms;_context2.next=4;return getCreditCardTerms();case 4:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function lazyLoadTerms(){return _ref2.apply(this,arguments);};}();// 如果 location.state 不存在，屬於不正常行為，直接關閉該服務\nif(!location.state)return closeFunc();return/*#__PURE__*/_jsx(Layout,{title:\"\\u4FE1\\u7528\\u5361\\u8CC7\\u8A0A\",goBackFunc:function goBackFunc(){return history.goBack();},children:/*#__PURE__*/_jsx(Main,{children:/*#__PURE__*/_jsxs(InfoPageWrapper,{children:[!!cardInfo&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CreditCard,{cardName:location.state.isBankeeCard?'Bankee信用卡':'所有信用卡',accountNo:cardNo,color:\"green\",annotation:\"\\u5DF2\\u4F7F\\u7528\\u984D\\u5EA6\",balance:cardInfo===null||cardInfo===void 0?void 0:cardInfo.usedCardLimit})})}),/*#__PURE__*/_jsxs(\"div\",{children:[getCardListing(cardInfo).map(function(d){return/*#__PURE__*/_jsx(InformationList,_objectSpread({},d),d.key);}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"heading\",children:\"\\u984D\\u5EA6\\u8CC7\\u8A0A\"}),/*#__PURE__*/_jsxs(\"div\",{children:[getCreditListing(cardInfo).map(function(d){return/*#__PURE__*/_jsx(InformationList,_objectSpread({},d),d.key);}),/*#__PURE__*/_jsx(\"hr\",{})]})]}),/*#__PURE__*/_jsx(Accordion,{className:\"mb-4\",title:\"\\u6CE8\\u610F\\u4E8B\\u9805\",onClick:lazyLoadTerms,children:terms?parse(terms):/*#__PURE__*/_jsx(Loading,{space:\"both\",isCentered:true})}),/*#__PURE__*/_jsx(FEIBButton,{onClick:function onClick(){return startFunc(FuncID.R00400,{cardNo:cardNo});},children:\"\\u7E73\\u8CBB\"})]})})});};export default C007001;","map":{"version":3,"names":["useState","useEffect","useHistory","useLocation","useDispatch","parse","Main","Loading","Accordion","Layout","CreditCard","FEIBButton","InformationList","setWaittingVisible","FuncID","closeFunc","startFunc","getCreditCardTerms","queryCardInfo","getCardListing","getCreditListing","InfoPageWrapper","C007001","history","location","dispatch","cardInfo","setCardInfo","terms","setTerms","cardNo","state","isBankeeCard","cards","cardInfoRes","lazyLoadTerms","goBack","usedCardLimit","map","d","key","R00400"],"sources":["C:/Users/allen/git/app2-webview/src/pages/C00700_CreditCard/C00700_1.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\nimport parse from 'html-react-parser';\r\n\r\nimport Main from 'components/Layout';\r\nimport Loading from 'components/Loading';\r\nimport Accordion from 'components/Accordion';\r\nimport Layout from 'components/Layout/Layout';\r\nimport CreditCard from 'components/CreditCard';\r\nimport { FEIBButton } from 'components/elements';\r\nimport InformationList from 'components/InformationList';\r\nimport { setWaittingVisible } from 'stores/reducers/ModalReducer';\r\nimport { FuncID } from 'utilities/FuncID';\r\nimport { closeFunc, startFunc } from 'utilities/AppScriptProxy';\r\n\r\nimport { getCreditCardTerms, queryCardInfo } from './api';\r\nimport { getCardListing, getCreditListing } from './utils';\r\nimport { InfoPageWrapper } from './C00700.style';\r\n\r\n/**\r\n * C00700_1 信用卡 資訊\r\n */\r\nconst C007001 = () => {\r\n  // TODO location.state 參數可以被 refactor\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const [cardInfo, setCardInfo] = useState();\r\n  const [terms, setTerms] = useState();\r\n  const cardNo = location.state?.isBankeeCard ? location.state.cards[0].cardNo : '';\r\n\r\n  useEffect(async () => {\r\n    dispatch(setWaittingVisible(true));\r\n\r\n    const cardInfoRes = await queryCardInfo(cardNo);\r\n    setCardInfo(cardInfoRes);\r\n\r\n    dispatch(setWaittingVisible(false));\r\n  }, []);\r\n\r\n  const lazyLoadTerms = async () => {\r\n    if (!terms) setTerms(await getCreditCardTerms());\r\n  };\r\n\r\n  // 如果 location.state 不存在，屬於不正常行為，直接關閉該服務\r\n  if (!location.state) return closeFunc();\r\n  return (\r\n    <Layout title=\"信用卡資訊\" goBackFunc={() => history.goBack()}>\r\n      <Main>\r\n        <InfoPageWrapper>\r\n          {!!cardInfo && (\r\n          <>\r\n            <div>\r\n              <div>\r\n                <CreditCard\r\n                  cardName={location.state.isBankeeCard ? 'Bankee信用卡' : '所有信用卡'}\r\n                  accountNo={cardNo}\r\n                  color=\"green\"\r\n                  annotation=\"已使用額度\"\r\n                  balance={cardInfo?.usedCardLimit}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              {getCardListing(cardInfo).map((d) => <InformationList key={d.key} {...d} />)}\r\n              <hr />\r\n            </div>\r\n            <div className=\"heading\">額度資訊</div>\r\n            <div>\r\n              {getCreditListing(cardInfo).map((d) => <InformationList key={d.key} {...d} />)}\r\n              <hr />\r\n            </div>\r\n          </>\r\n          )}\r\n\r\n          <Accordion className=\"mb-4\" title=\"注意事項\" onClick={lazyLoadTerms}>\r\n            { terms ? parse(terms) : <Loading space=\"both\" isCentered /> }\r\n          </Accordion>\r\n          <FEIBButton onClick={() => startFunc(FuncID.R00400, { cardNo })}>繳費</FEIBButton>\r\n        </InfoPageWrapper>\r\n      </Main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default C007001;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}